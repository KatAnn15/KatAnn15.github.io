/*! For license information please see main.7c89bdddf12d7c90825a.js.LICENSE.txt */
(()=>{var e,t,n={480:(e,t,n)=>{"use strict";var r=n(532),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!(a[y]||r&&r[y]||v&&v[y]||u&&u[y])){var g=h(n,y);try{c(t,y,g)}catch(e){}}}}return t}},103:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var o,u,s=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(s[l]=o[l]);if(t){u=t(o);for(var f=0;f<u.length;f++)r.call(o,u[f])&&(s[u[f]]=o[u[f]])}}return s}},428:(e,t,n)=>{"use strict";var r=n(134);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},526:(e,t,n)=>{e.exports=n(428)()},134:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},691:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i,a=n(709),o=(i=a)&&"object"===r(i)&&"default"in i?i.default:i,u=new(n(47)),s=u.getBrowser(),c=(u.getCPU(),u.getDevice()),l=u.getEngine(),f=u.getOS(),h=u.getUA(),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";return e||t},p=function(){return!("undefined"==typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},v=function(e){var t=p();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)};function m(e){return m="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},m(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){return b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function x(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var S="mobile",I="tablet",T="smarttv",R="console",N="wearable",A=void 0,C={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},O={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},P={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},D=function(e,t,n,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{vendor:d(t.vendor),model:d(t.model),os:d(n.name),osVersion:d(n.version),ua:d(r)})},L=function(e){switch(e){case S:return{isMobile:!0};case I:return{isTablet:!0};case T:return{isSmartTV:!0};case R:return{isConsole:!0};case N:return{isWearable:!0};case A:return{isBrowser:!0};default:return P}}(c.type);var M,U=function(){return"string"==typeof h&&-1!==h.indexOf("Edg/")},F=function(){return c.type===A},j=function(){return s.name===C.Edge},V=function(){return v("iPad")},q=c.type===T,B=c.type===R,z=c.type===N,W=s.name===C.MobileSafari||V(),H=s.name===C.Chromium,K=function(){switch(c.type){case S:case I:return!0;default:return!1}}()||V(),G=c.type===S,Q=c.type===I||V(),$=F(),J=F(),Y=f.name===O.Android,X=f.name===O.WindowsPhone,Z=f.name===O.IOS||V(),ee=s.name===C.Chrome,te=s.name===C.Firefox,ne=s.name===C.Safari||s.name===C.MobileSafari,re=s.name===C.Opera,ie=s.name===C.InternetExplorer||s.name===C.Ie,ae=d(f.version),oe=d(f.name),ue=d(s.version),se=d(s.major),ce=d(s.name),le=d(c.vendor),fe=d(c.model),he=d(l.name),de=d(l.version),pe=d(h),ve=j()||U(),me=s.name===C.Yandex,ye=d(c.type,"browser"),ge=(M=p())&&(/iPad|iPhone|iPod/.test(M.platform)||"MacIntel"===M.platform&&M.maxTouchPoints>1)&&!window.MSStream,be=V(),we=v("iPhone"),ke=v("iPod"),_e=function(){var e=p(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return"string"==typeof t&&/electron/.test(t)}(),xe=U(),Ee=j()&&!U(),Se=f.name===O.Windows,Ie=f.name===O.MAC_OS,Te=s.name===C.MIUI,Re=s.name===C.SamsungBrowser;t.tq=K,t.Em=Q},802:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=n(709),a=n(103),o=n(853);function u(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(u(227));var s=new Set,c={};function l(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(c[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,v={},m={};function y(e,t,n,i){if(null==t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(r(t)){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function g(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){b[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];b[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){b[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){b[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){b[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){b[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){b[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){b[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){b[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var w=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=b.hasOwnProperty(t)?b[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(y(t,n,i,r)&&(n=null),r||null===i?function(e){return!!p.call(m,e)||!p.call(v,e)&&(d.test(e)?m[e]=!0:(v[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(w,k);b[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(w,k);b[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(w,k);b[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){b[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),b.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){b[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=60103,S=60106,I=60107,T=60108,R=60114,N=60109,A=60110,C=60112,O=60113,P=60120,D=60115,L=60116,M=60121,U=60128,F=60129,j=60130,V=60131;if("function"==typeof Symbol&&Symbol.for){var q=Symbol.for;E=q("react.element"),S=q("react.portal"),I=q("react.fragment"),T=q("react.strict_mode"),R=q("react.profiler"),N=q("react.provider"),A=q("react.context"),C=q("react.forward_ref"),O=q("react.suspense"),P=q("react.suspense_list"),D=q("react.memo"),L=q("react.lazy"),M=q("react.block"),q("react.scope"),U=q("react.opaque.id"),F=q("react.debug_trace_mode"),j=q("react.offscreen"),V=q("react.legacy_hidden")}var B,z="function"==typeof Symbol&&Symbol.iterator;function W(e){return null===e||"object"!==r(e)?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}function H(e){if(void 0===B)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var K=!1;function G(e,t){if(!e||K)return"";K=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===("undefined"==typeof Reflect?"undefined":r(Reflect))&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var i=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){i=e}e.call(t.prototype)}else{try{throw Error()}catch(e){i=e}e()}}catch(e){if(e&&i&&"string"==typeof e.stack){for(var a=e.stack.split("\n"),o=i.stack.split("\n"),u=a.length-1,s=o.length-1;1<=u&&0<=s&&a[u]!==o[s];)s--;for(;1<=u&&0<=s;u--,s--)if(a[u]!==o[s]){if(1!==u||1!==s)do{if(u--,0>--s||a[u]!==o[s])return"\n"+a[u].replace(" at new "," at ")}while(1<=u&&0<=s);break}}}finally{K=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function Q(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function $(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case R:return"Profiler";case T:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList"}if("object"===r(e))switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case D:return $(e.type);case M:return $(e._render);case L:t=e._payload,e=e._init;try{return $(e(t))}catch(e){}}return null}function J(e){switch(r(e)){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ee(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function te(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ne(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=J(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function re(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function ie(e,t){re(e,t);var n=J(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,J(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&ee(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ue(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+J(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ce(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(u(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(u(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(u(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:J(n)}}function fe(e,t){var n=J(t.value),r=J(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function he(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",pe="http://www.w3.org/2000/svg";function ve(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function me(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ve(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ye,ge,be=(ge=function(e,t){if(e.namespaceURI!==pe||"innerHTML"in e)e.innerHTML=t;else{for((ye=ye||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ye.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function we(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_e=["Webkit","ms","Moz","O"];function xe(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function Ee(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){_e.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var Se=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(Se[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(u(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(u(60));if("object"!==r(t.dangerouslySetInnerHTML)||!("__html"in t.dangerouslySetInnerHTML))throw Error(u(61))}if(null!=t.style&&"object"!==r(t.style))throw Error(u(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Re(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,Ae=null,Ce=null;function Oe(e){if(e=ai(e)){if("function"!=typeof Ne)throw Error(u(280));var t=e.stateNode;t&&(t=ui(t),Ne(e.stateNode,e.type,t))}}function Pe(e){Ae?Ce?Ce.push(e):Ce=[e]:Ae=e}function De(){if(Ae){var e=Ae,t=Ce;if(Ce=Ae=null,Oe(e),t)for(e=0;e<t.length;e++)Oe(t[e])}}function Le(e,t){return e(t)}function Me(e,t,n,r,i){return e(t,n,r,i)}function Ue(){}var Fe=Le,je=!1,Ve=!1;function qe(){null===Ae&&null===Ce||(Ue(),De())}function Be(e,t){var n=e.stateNode;if(null===n)return null;var i=ui(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(u(231,t,r(n)));return n}var ze=!1;if(h)try{var We={};Object.defineProperty(We,"passive",{get:function(){ze=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch(ge){ze=!1}function He(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var Ke=!1,Ge=null,Qe=!1,$e=null,Je={onError:function(e){Ke=!0,Ge=e}};function Ye(e,t,n,r,i,a,o,u,s){Ke=!1,Ge=null,He.apply(Je,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function et(e){if(Xe(e)!==e)throw Error(u(188))}function tt(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(u(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return et(i),e;if(a===r)return et(i),t;a=a.sibling}throw Error(u(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o)throw Error(u(189))}}if(n.alternate!==r)throw Error(u(190))}if(3!==n.tag)throw Error(u(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function nt(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var rt,it,at,ot,ut=!1,st=[],ct=null,lt=null,ft=null,ht=new Map,dt=new Map,pt=[],vt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function yt(e,t){switch(e){case"focusin":case"focusout":ct=null;break;case"dragenter":case"dragleave":lt=null;break;case"mouseover":case"mouseout":ft=null;break;case"pointerover":case"pointerout":ht.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function gt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=mt(t,n,r,i,a),null!==t&&(null!==(t=ai(t))&&it(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bt(e){var t=ii(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ze(n)))return e.blockedOn=t,void ot(e.lanePriority,(function(){o.unstable_runWithPriority(e.priority,(function(){at(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=tn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ai(n))&&it(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){wt(e)&&n.delete(t)}function _t(){for(ut=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=ai(e.blockedOn))&&rt(e);break}for(var t=e.targetContainers;0<t.length;){var n=tn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ct&&wt(ct)&&(ct=null),null!==lt&&wt(lt)&&(lt=null),null!==ft&&wt(ft)&&(ft=null),ht.forEach(kt),dt.forEach(kt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,ut||(ut=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,_t)))}function Et(e){function t(t){return xt(t,e)}if(0<st.length){xt(st[0],e);for(var n=1;n<st.length;n++){var r=st[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ct&&xt(ct,e),null!==lt&&xt(lt,e),null!==ft&&xt(ft,e),ht.forEach(t),dt.forEach(t),n=0;n<pt.length;n++)(r=pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<pt.length&&null===(n=pt[0]).blockedOn;)bt(n),null===n.blockedOn&&pt.shift()}function St(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:St("Animation","AnimationEnd"),animationiteration:St("Animation","AnimationIteration"),animationstart:St("Animation","AnimationStart"),transitionend:St("Transition","TransitionEnd")},Tt={},Rt={};function Nt(e){if(Tt[e])return Tt[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Rt)return Tt[e]=n[t];return e}h&&(Rt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var At=Nt("animationend"),Ct=Nt("animationiteration"),Ot=Nt("animationstart"),Pt=Nt("transitionend"),Dt=new Map,Lt=new Map,Mt=["abort","abort",At,"animationEnd",Ct,"animationIteration",Ot,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Pt,"transitionEnd","waiting","waiting"];function Ut(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Lt.set(r,t),Dt.set(r,i),l(i,[r])}}(0,o.unstable_now)();var Ft=8;function jt(e){if(0!=(1&e))return Ft=15,1;if(0!=(2&e))return Ft=14,2;if(0!=(4&e))return Ft=13,4;var t=24&e;return 0!==t?(Ft=12,t):0!=(32&e)?(Ft=11,32):0!==(t=192&e)?(Ft=10,t):0!=(256&e)?(Ft=9,256):0!==(t=3584&e)?(Ft=8,t):0!=(4096&e)?(Ft=7,4096):0!==(t=4186112&e)?(Ft=6,t):0!==(t=62914560&e)?(Ft=5,t):67108864&e?(Ft=4,67108864):0!=(134217728&e)?(Ft=3,134217728):0!==(t=805306368&e)?(Ft=2,t):0!=(1073741824&e)?(Ft=1,1073741824):(Ft=8,e)}function Vt(e,t){var n=e.pendingLanes;if(0===n)return Ft=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Ft=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=jt(s),i=Ft):0!==(u&=a)&&(r=jt(u),i=Ft)}else 0!==(a=n&~o)?(r=jt(a),i=Ft):0!==u&&(r=jt(u),i=Ft);if(0===r)return 0;if(r=n&((0>(r=31-Kt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(jt(t),i<=Ft)return t;Ft=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Kt(t)),r|=e[n],t&=~i;return r}function qt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Bt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=zt(24&~t))?Bt(10,t):e;case 10:return 0===(e=zt(192&~t))?Bt(8,t):e;case 8:return 0===(e=zt(3584&~t))&&(0===(e=zt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=zt(805306368&~t))&&(t=268435456),t}throw Error(u(358,e))}function zt(e){return e&-e}function Wt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ht(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Kt(t)]=n}var Kt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Gt(e)/Qt|0)|0},Gt=Math.log,Qt=Math.LN2;var $t=o.unstable_UserBlockingPriority,Jt=o.unstable_runWithPriority,Yt=!0;function Xt(e,t,n,r){je||Ue();var i=en,a=je;je=!0;try{Me(i,e,t,n,r)}finally{(je=a)||qe()}}function Zt(e,t,n,r){Jt($t,en.bind(null,e,t,n,r))}function en(e,t,n,r){var i;if(Yt)if((i=0==(4&t))&&0<st.length&&-1<vt.indexOf(e))e=mt(null,e,t,n,r),st.push(e);else{var a=tn(e,t,n,r);if(null===a)i&&yt(e,r);else{if(i){if(-1<vt.indexOf(e))return e=mt(a,e,t,n,r),void st.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ct=gt(ct,e,t,n,r,i),!0;case"dragenter":return lt=gt(lt,e,t,n,r,i),!0;case"mouseover":return ft=gt(ft,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ht.set(a,gt(ht.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,dt.set(a,gt(dt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;yt(e,r)}Ur(e,t,r,null,n)}}}function tn(e,t,n,r){var i=Re(r);if(null!==(i=ii(i))){var a=Xe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Ze(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Ur(e,t,r,i,n),null}var nn=null,rn=null,an=null;function on(){if(an)return an;var e,t,n=rn,r=n.length,i="value"in nn?nn.value:nn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return an=i.slice(e,1<t?1-t:void 0)}function un(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function sn(){return!0}function cn(){return!1}function ln(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:cn,this.isPropagationStopped=cn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),t}var fn,hn,dn,pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vn=ln(pn),mn=a({},pn,{view:0,detail:0}),yn=ln(mn),gn=a({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(fn=e.screenX-dn.screenX,hn=e.screenY-dn.screenY):hn=fn=0,dn=e),fn)},movementY:function(e){return"movementY"in e?e.movementY:hn}}),bn=ln(gn),wn=ln(a({},gn,{dataTransfer:0})),kn=ln(a({},mn,{relatedTarget:0})),_n=ln(a({},pn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=a({},pn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),En=ln(xn),Sn=ln(a({},pn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Rn[e])&&!!t[e]}function An(){return Nn}var Cn=a({},mn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=un(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Tn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?un(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?un(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),On=ln(Cn),Pn=ln(a({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=ln(a({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Ln=ln(a({},pn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=a({},gn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Un=ln(Mn),Fn=[9,13,27,32],jn=h&&"CompositionEvent"in window,Vn=null;h&&"documentMode"in document&&(Vn=document.documentMode);var qn=h&&"TextEvent"in window&&!Vn,Bn=h&&(!jn||Vn&&8<Vn&&11>=Vn),zn=String.fromCharCode(32),Wn=!1;function Hn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===r(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Qn[e.type]:"textarea"===t}function Jn(e,t,n,r){Pe(r),0<(t=jr(t,"onChange")).length&&(n=new vn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function Zn(e){Cr(e,0)}function er(e){if(Z(oi(e)))return e}function tr(e,t){if("change"===e)return t}var nr=!1;if(h){var rr;if(h){var ir="oninput"in document;if(!ir){var ar=document.createElement("div");ar.setAttribute("oninput","return;"),ir="function"==typeof ar.oninput}rr=ir}else rr=!1;nr=rr&&(!document.documentMode||9<document.documentMode)}function or(){Yn&&(Yn.detachEvent("onpropertychange",ur),Xn=Yn=null)}function ur(e){if("value"===e.propertyName&&er(Xn)){var t=[];if(Jn(t,Xn,e,Re(e)),e=Zn,je)e(t);else{je=!0;try{Le(e,t)}finally{je=!1,qe()}}}}function sr(e,t,n){"focusin"===e?(or(),Xn=n,(Yn=t).attachEvent("onpropertychange",ur)):"focusout"===e&&or()}function cr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return er(Xn)}function lr(e,t){if("click"===e)return er(t)}function fr(e,t){if("input"===e||"change"===e)return er(t)}var hr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},dr=Object.prototype.hasOwnProperty;function pr(e,t){if(hr(e,t))return!0;if("object"!==r(e)||null===e||"object"!==r(t)||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!dr.call(t,n[i])||!hr(e[n[i]],t[n[i]]))return!1;return!0}function vr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mr(e,t){var n,r=vr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vr(r)}}function yr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?yr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=ee();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=ee((e=t.contentWindow).document)}return t}function br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var wr=h&&"documentMode"in document&&11>=document.documentMode,kr=null,_r=null,xr=null,Er=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Er||null==kr||kr!==ee(r)||("selectionStart"in(r=kr)&&br(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&pr(xr,r)||(xr=r,0<(r=jr(_r,"onSelect")).length&&(t=new vn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Ut("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ut("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ut(Mt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Tr=0;Tr<Ir.length;Tr++)Lt.set(Ir[Tr],0);f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Ar(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,s,c){if(Ye.apply(this,arguments),Ke){if(!Ke)throw Error(u(198));var l=Ge;Ke=!1,Ge=null,Qe||(Qe=!0,$e=l)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Ar(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Ar(i,u,c),a=s}}}if(Qe)throw e=$e,Qe=!1,$e=null,e}function Or(e,t){var n=si(t),r=e+"__bubble";n.has(r)||(Mr(t,e,2,!1),n.add(r))}var Pr="_reactListening"+Math.random().toString(36).slice(2);function Dr(e){e[Pr]||(e[Pr]=!0,s.forEach((function(t){Nr.has(t)||Lr(t,!1,e,null),Lr(t,!0,e,null)})))}function Lr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Nr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=si(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Mr(a,e,i,t),o.add(u))}function Mr(e,t,n,r){var i=Lt.get(t);switch(void 0===i?2:i){case 0:i=Xt;break;case 1:i=Zt;break;default:i=en}n=i.bind(null,t,n,e),i=void 0,!ze||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ur(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ii(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Ve)return e(t,n);Ve=!0;try{Fe(e,t,n)}finally{Ve=!1,qe()}}((function(){var r=a,i=Re(n),o=[];e:{var u=Dt.get(e);if(void 0!==u){var s=vn,c=e;switch(e){case"keypress":if(0===un(n))break e;case"keydown":case"keyup":s=On;break;case"focusin":c="focus",s=kn;break;case"focusout":c="blur",s=kn;break;case"beforeblur":case"afterblur":s=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=bn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=wn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case At:case Ct:case Ot:s=_n;break;case Pt:s=Ln;break;case"scroll":s=yn;break;case"wheel":s=Un;break;case"copy":case"cut":case"paste":s=En;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Pn}var l=0!=(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Be(p,h))&&l.push(Fr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0==(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=n.relatedTarget||n.fromElement)||!ii(c)&&!c[ni])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ii(c):null)&&(c!==(f=Xe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=bn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Pn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:oi(s),d=null==c?u:oi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ii(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Vr(d))p++;for(d=0,v=h;v;v=Vr(v))d++;for(;0<p-d;)l=Vr(l),p--;for(;0<d-p;)h=Vr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Vr(l),h=Vr(h)}l=null}else l=null;null!==s&&qr(o,u,s,l,!1),null!==c&&null!==f&&qr(o,f,c,l,!0)}if("select"===(s=(u=r?oi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=tr;else if($n(u))if(nr)m=fr;else{m=cr;var y=sr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=lr);switch(m&&(m=m(e,r))?Jn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&oe(u,"number",u.value)),y=r?oi(r):window,e){case"focusin":($n(y)||"true"===y.contentEditable)&&(kr=y,_r=r,xr=null);break;case"focusout":xr=_r=kr=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,Sr(o,n,i);break;case"selectionchange":if(wr)break;case"keydown":case"keyup":Sr(o,n,i)}var g;if(jn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?Hn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(g=on()):(rn="value"in(nn=i)?nn.value:nn.textContent,Gn=!0)),0<(y=jr(r,b)).length&&(b=new Sn(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=Kn(n))&&(b.data=g))),(g=qn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Wn=!0,zn);case"textInput":return(e=t.data)===zn&&Wn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!jn&&Hn(e,t)?(e=on(),an=rn=nn=null,Gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=jr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Cr(o,t)}))}function Fr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Be(e,n))&&r.unshift(Fr(e,a,i)),null!=(a=Be(e,t))&&r.push(Fr(e,a,i))),e=e.return}return r}function Vr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Be(n,a))&&o.unshift(Fr(n,s,u)):i||null!=(s=Be(n,a))&&o.push(Fr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Br(){}var zr=null,Wr=null;function Hr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Kr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"===r(t.dangerouslySetInnerHTML)&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gr="function"==typeof setTimeout?setTimeout:void 0,Qr="function"==typeof clearTimeout?clearTimeout:void 0;function $r(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Jr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var Zr=Math.random().toString(36).slice(2),ei="__reactFiber$"+Zr,ti="__reactProps$"+Zr,ni="__reactContainer$"+Zr,ri="__reactEvents$"+Zr;function ii(e){var t=e[ei];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ni]||n[ei]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[ei])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ai(e){return!(e=e[ei]||e[ni])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function oi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(u(33))}function ui(e){return e[ti]||null}function si(e){var t=e[ri];return void 0===t&&(t=e[ri]=new Set),t}var ci=[],li=-1;function fi(e){return{current:e}}function hi(e){0>li||(e.current=ci[li],ci[li]=null,li--)}function di(e,t){li++,ci[li]=e.current,e.current=t}var pi={},vi=fi(pi),mi=fi(!1),yi=pi;function gi(e,t){var n=e.type.contextTypes;if(!n)return pi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function bi(e){return null!=(e=e.childContextTypes)}function wi(){hi(mi),hi(vi)}function ki(e,t,n){if(vi.current!==pi)throw Error(u(168));di(vi,t),di(mi,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(u(108,$(t)||"Unknown",i));return a({},n,r)}function xi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pi,yi=vi.current,di(vi,e),di(mi,mi.current),!0}function Ei(e,t,n){var r=e.stateNode;if(!r)throw Error(u(169));n?(e=_i(e,t,yi),r.__reactInternalMemoizedMergedChildContext=e,hi(mi),hi(vi),di(vi,e)):hi(mi),di(mi,n)}var Si=null,Ii=null,Ti=o.unstable_runWithPriority,Ri=o.unstable_scheduleCallback,Ni=o.unstable_cancelCallback,Ai=o.unstable_shouldYield,Ci=o.unstable_requestPaint,Oi=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Di=o.unstable_ImmediatePriority,Li=o.unstable_UserBlockingPriority,Mi=o.unstable_NormalPriority,Ui=o.unstable_LowPriority,Fi=o.unstable_IdlePriority,ji={},Vi=void 0!==Ci?Ci:function(){},qi=null,Bi=null,zi=!1,Wi=Oi(),Hi=1e4>Wi?Oi:function(){return Oi()-Wi};function Ki(){switch(Pi()){case Di:return 99;case Li:return 98;case Mi:return 97;case Ui:return 96;case Fi:return 95;default:throw Error(u(332))}}function Gi(e){switch(e){case 99:return Di;case 98:return Li;case 97:return Mi;case 96:return Ui;case 95:return Fi;default:throw Error(u(332))}}function Qi(e,t){return e=Gi(e),Ti(e,t)}function $i(e,t,n){return e=Gi(e),Ri(e,t,n)}function Ji(){if(null!==Bi){var e=Bi;Bi=null,Ni(e)}Yi()}function Yi(){if(!zi&&null!==qi){zi=!0;var e=0;try{var t=qi;Qi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),qi=null}catch(t){throw null!==qi&&(qi=qi.slice(e+1)),Ri(Di,Ji),t}finally{zi=!1}}}var Xi=x.ReactCurrentBatchConfig;function Zi(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ea=fi(null),ta=null,na=null,ra=null;function ia(){ra=na=ta=null}function aa(e){var t=ea.current;hi(ea),e.type._context._currentValue=t}function oa(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ua(e,t){ta=e,ra=na=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(jo=!0),e.firstContext=null)}function sa(e,t){if(ra!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(ra=e,t=1073741823),t={context:e,observedBits:t,next:null},null===na){if(null===ta)throw Error(u(308));na=t,ta.dependencies={lanes:0,firstContext:t,responders:null}}else na=na.next=t;return e._currentValue}var ca=!1;function la(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ha(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function da(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function pa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function va(e,t,n,r){var i=e.updateQueue;ca=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=i.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"==typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null==(s="function"==typeof(p=v.payload)?p.call(d,h,s):p))break e;h=a({},h,s);break e;case 2:ca=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===f&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=f,zu|=u,e.lanes=u,e.memoizedState=h}}function ma(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(u(191,i));i.call(r)}}}var ya=(new i.Component).refs;function ga(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ba={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ps(),i=vs(e),a=ha(r,i);a.payload=t,null!=n&&(a.callback=n),da(e,a),ms(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ps(),i=vs(e),a=ha(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),da(e,a),ms(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ps(),r=vs(e),i=ha(n,r);i.tag=2,null!=t&&(i.callback=t),da(e,i),ms(e,r,n)}};function wa(e,t,n,r,i,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!pr(n,r)||!pr(i,a))}function ka(e,t,n){var i=!1,a=pi,o=t.contextType;return"object"===r(o)&&null!==o?o=sa(o):(a=bi(t)?yi:vi.current,o=(i=null!=(i=t.contextTypes))?gi(e,a):pi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ba,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function _a(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ba.enqueueReplaceState(t,t.state,null)}function xa(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=ya,la(e);var o=t.contextType;"object"===r(o)&&null!==o?a.context=sa(o):(o=bi(t)?yi:vi.current,a.context=gi(e,o)),va(e,n,a,i),a.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(ga(e,t,o,n),a.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(t=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ba.enqueueReplaceState(a,a.state,null),va(e,n,a,i),a.state=e.memoizedState),"function"==typeof a.componentDidMount&&(e.flags|=4)}var Ea=Array.isArray;function Sa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!==r(e)){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(u(309));var i=n.stateNode}if(!i)throw Error(u(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===ya&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!=typeof e)throw Error(u(284));if(!n._owner)throw Error(u(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(u(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ta(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Qs(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Xs(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function l(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=Sa(e,t,n),r.return=e,r):((r=$s(n.type,n.key,n.props,null,e.mode,r)).ref=Sa(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Zs(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Js(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Xs(""+t,e.mode,n)).return=e,t;if("object"===r(t)&&null!==t){switch(t.$$typeof){case E:return(n=$s(t.type,t.key,t.props,null,e.mode,n)).ref=Sa(e,null,t),n.return=e,n;case S:return(t=Zs(t,e.mode,n)).return=e,t}if(Ea(t)||W(t))return(t=Js(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function p(e,t,n,i){var a=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==a?null:c(e,t,""+n,i);if("object"===r(n)&&null!==n){switch(n.$$typeof){case E:return n.key===a?n.type===I?h(e,t,n.props.children,i,a):l(e,t,n,i):null;case S:return n.key===a?f(e,t,n,i):null}if(Ea(n)||W(n))return null!==a?null:h(e,t,n,i,null);Ia(e,n)}return null}function v(e,t,n,i,a){if("string"==typeof i||"number"==typeof i)return c(t,e=e.get(n)||null,""+i,a);if("object"===r(i)&&null!==i){switch(i.$$typeof){case E:return e=e.get(null===i.key?n:i.key)||null,i.type===I?h(t,e,i.props.children,a,i.key):l(t,e,i,a);case S:return f(t,e=e.get(null===i.key?n:i.key)||null,i,a)}if(Ea(i)||W(i))return h(t,e=e.get(n)||null,i,a,null);Ia(t,i)}return null}function m(r,a,u,s){for(var c=null,l=null,f=a,h=a=0,m=null;null!==f&&h<u.length;h++){f.index>h?(m=f,f=null):m=f.sibling;var y=p(r,f,u[h],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(r,f),a=o(y,a,h),null===l?c=y:l.sibling=y,l=y,f=m}if(h===u.length)return n(r,f),c;if(null===f){for(;h<u.length;h++)null!==(f=d(r,u[h],s))&&(a=o(f,a,h),null===l?c=f:l.sibling=f,l=f);return c}for(f=i(r,f);h<u.length;h++)null!==(m=v(f,r,h,u[h],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?h:m.key),a=o(m,a,h),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(r,e)})),c}function y(r,a,s,c){var l=W(s);if("function"!=typeof l)throw Error(u(150));if(null==(s=l.call(s)))throw Error(u(151));for(var f=l=null,h=a,m=a=0,y=null,g=s.next();null!==h&&!g.done;m++,g=s.next()){h.index>m?(y=h,h=null):y=h.sibling;var b=p(r,h,g.value,c);if(null===b){null===h&&(h=y);break}e&&h&&null===b.alternate&&t(r,h),a=o(b,a,m),null===f?l=b:f.sibling=b,f=b,h=y}if(g.done)return n(r,h),l;if(null===h){for(;!g.done;m++,g=s.next())null!==(g=d(r,g.value,c))&&(a=o(g,a,m),null===f?l=g:f.sibling=g,f=g);return l}for(h=i(r,h);!g.done;m++,g=s.next())null!==(g=v(h,r,m,g.value,c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===f?l=g:f.sibling=g,f=g);return e&&h.forEach((function(e){return t(r,e)})),l}return function(e,i,o,c){var l="object"===r(o)&&null!==o&&o.type===I&&null===o.key;l&&(o=o.props.children);var f="object"===r(o)&&null!==o;if(f)switch(o.$$typeof){case E:e:{for(f=o.key,l=i;null!==l;){if(l.key===f){if(7===l.tag){if(o.type===I){n(e,l.sibling),(i=a(l,o.props.children)).return=e,e=i;break e}}else if(l.elementType===o.type){n(e,l.sibling),(i=a(l,o.props)).ref=Sa(e,l,o),i.return=e,e=i;break e}n(e,l);break}t(e,l),l=l.sibling}o.type===I?((i=Js(o.props.children,e.mode,c,o.key)).return=e,e=i):((c=$s(o.type,o.key,o.props,null,e.mode,c)).ref=Sa(e,i,o),c.return=e,e=c)}return s(e);case S:e:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(e,i.sibling),(i=a(i,o.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Zs(o,e.mode,c)).return=e,e=i}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==i&&6===i.tag?(n(e,i.sibling),(i=a(i,o)).return=e,e=i):(n(e,i),(i=Xs(o,e.mode,c)).return=e,e=i),s(e);if(Ea(o))return m(e,i,o,c);if(W(o))return y(e,i,o,c);if(f&&Ia(e,o),void 0===o&&!l)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(u(152,$(e.type)||"Component"))}return n(e,i)}}var Ra=Ta(!0),Na=Ta(!1),Aa={},Ca=fi(Aa),Oa=fi(Aa),Pa=fi(Aa);function Da(e){if(e===Aa)throw Error(u(174));return e}function La(e,t){switch(di(Pa,t),di(Oa,e),di(Ca,Aa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:me(null,"");break;default:t=me(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}hi(Ca),di(Ca,t)}function Ma(){hi(Ca),hi(Oa),hi(Pa)}function Ua(e){Da(Pa.current);var t=Da(Ca.current),n=me(t,e.type);t!==n&&(di(Oa,e),di(Ca,n))}function Fa(e){Oa.current===e&&(hi(Ca),hi(Oa))}var ja=fi(0);function Va(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qa=null,Ba=null,za=!1;function Wa(e,t){var n=Ks(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ha(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ka(e){if(za){var t=Ba;if(t){var n=t;if(!Ha(e,t)){if(!(t=Jr(n.nextSibling))||!Ha(e,t))return e.flags=-1025&e.flags|2,za=!1,void(qa=e);Wa(qa,n)}qa=e,Ba=Jr(t.firstChild)}else e.flags=-1025&e.flags|2,za=!1,qa=e}}function Ga(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;qa=e}function Qa(e){if(e!==qa)return!1;if(!za)return Ga(e),za=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Kr(t,e.memoizedProps))for(t=Ba;t;)Wa(e,t),t=Jr(t.nextSibling);if(Ga(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(u(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ba=Jr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ba=null}}else Ba=qa?Jr(e.stateNode.nextSibling):null;return!0}function $a(){Ba=qa=null,za=!1}var Ja=[];function Ya(){for(var e=0;e<Ja.length;e++)Ja[e]._workInProgressVersionPrimary=null;Ja.length=0}var Xa=x.ReactCurrentDispatcher,Za=x.ReactCurrentBatchConfig,eo=0,to=null,no=null,ro=null,io=!1,ao=!1;function oo(){throw Error(u(321))}function uo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!hr(e[n],t[n]))return!1;return!0}function so(e,t,n,r,i,a){if(eo=a,to=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xa.current=null===e||null===e.memoizedState?Lo:Mo,e=n(r,i),ao){a=0;do{if(ao=!1,!(25>a))throw Error(u(301));a+=1,ro=no=null,t.updateQueue=null,Xa.current=Uo,e=n(r,i)}while(ao)}if(Xa.current=Do,t=null!==no&&null!==no.next,eo=0,ro=no=to=null,io=!1,t)throw Error(u(300));return e}function co(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ro?to.memoizedState=ro=e:ro=ro.next=e,ro}function lo(){if(null===no){var e=to.alternate;e=null!==e?e.memoizedState:null}else e=no.next;var t=null===ro?to.memoizedState:ro.next;if(null!==t)ro=t,no=e;else{if(null===e)throw Error(u(310));e={memoizedState:(no=e).memoizedState,baseState:no.baseState,baseQueue:no.baseQueue,queue:no.queue,next:null},null===ro?to.memoizedState=ro=e:ro=ro.next=e}return ro}function fo(e,t){return"function"==typeof t?t(e):t}function ho(e){var t=lo(),n=t.queue;if(null===n)throw Error(u(311));n.lastRenderedReducer=e;var r=no,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=o=a=null,c=i;do{var l=c.lane;if((eo&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(o=s=f,a=r):s=s.next=f,to.lanes|=l,zu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=o,hr(r,t.memoizedState)||(jo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function po(e){var t=lo(),n=t.queue;if(null===n)throw Error(u(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);hr(a,t.memoizedState)||(jo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function vo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(eo&e)===e)&&(t._workInProgressVersionPrimary=r,Ja.push(t))),e)return n(t._source);throw Ja.push(t),Error(u(350))}function mo(e,t,n,r){var i=Lu;if(null===i)throw Error(u(349));var a=t._getVersion,o=a(t._source),s=Xa.current,c=s.useState((function(){return vo(i,t,n)})),l=c[1],f=c[0];c=ro;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=to;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!hr(o,e)){e=n(t._source),hr(f,e)||(l(e),e=vs(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,u=e;0<u;){var s=31-Kt(u),c=1<<s;r[s]|=e,u&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=vs(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),hr(p,n)&&hr(v,t)&&hr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:fo,lastRenderedState:f}).dispatch=l=Po.bind(null,to,e),c.queue=e,c.baseQueue=null,f=vo(i,t,n),c.memoizedState=c.baseState=f),f}function yo(e,t,n){return mo(lo(),e,t,n)}function go(e){var t=co();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e}).dispatch=Po.bind(null,to,e),[t.memoizedState,e]}function bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=to.updateQueue)?(t={lastEffect:null},to.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function wo(e){return e={current:e},co().memoizedState=e}function ko(){return lo().memoizedState}function _o(e,t,n,r){var i=co();to.flags|=e,i.memoizedState=bo(1|t,n,void 0,void 0===r?null:r)}function xo(e,t,n,r){var i=lo();r=void 0===r?null:r;var a=void 0;if(null!==no){var o=no.memoizedState;if(a=o.destroy,null!==r&&uo(r,o.deps))return void bo(t,n,a,r)}to.flags|=e,i.memoizedState=bo(1|t,n,a,r)}function Eo(e,t){return _o(516,4,e,t)}function So(e,t){return xo(516,4,e,t)}function Io(e,t){return xo(4,2,e,t)}function To(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ro(e,t,n){return n=null!=n?n.concat([e]):null,xo(4,2,To.bind(null,t,e),n)}function No(){}function Ao(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&uo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=lo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&uo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Oo(e,t){var n=Ki();Qi(98>n?98:n,(function(){e(!0)})),Qi(97<n?97:n,(function(){var n=Za.transition;Za.transition=1;try{e(!1),t()}finally{Za.transition=n}}))}function Po(e,t,n){var r=ps(),i=vs(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===to||null!==o&&o===to)ao=io=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,hr(s,u))return}catch(e){}ms(e,i,r)}}var Do={readContext:sa,useCallback:oo,useContext:oo,useEffect:oo,useImperativeHandle:oo,useLayoutEffect:oo,useMemo:oo,useReducer:oo,useRef:oo,useState:oo,useDebugValue:oo,useDeferredValue:oo,useTransition:oo,useMutableSource:oo,useOpaqueIdentifier:oo,unstable_isNewReconciler:!1},Lo={readContext:sa,useCallback:function(e,t){return co().memoizedState=[e,void 0===t?null:t],e},useContext:sa,useEffect:Eo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,_o(4,2,To.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=co();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=co();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Po.bind(null,to,e),[r.memoizedState,e]},useRef:wo,useState:go,useDebugValue:No,useDeferredValue:function(e){var t=go(e),n=t[0],r=t[1];return Eo((function(){var t=Za.transition;Za.transition=1;try{r(e)}finally{Za.transition=t}}),[e]),n},useTransition:function(){var e=go(!1),t=e[0];return wo(e=Oo.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=co();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},mo(r,e,t,n)},useOpaqueIdentifier:function(){if(za){var e=!1,t=function(e){return{$$typeof:U,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(u(355))})),n=go(t)[1];return 0==(2&to.mode)&&(to.flags|=516,bo(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return go(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Mo={readContext:sa,useCallback:Ao,useContext:sa,useEffect:So,useImperativeHandle:Ro,useLayoutEffect:Io,useMemo:Co,useReducer:ho,useRef:ko,useState:function(){return ho(fo)},useDebugValue:No,useDeferredValue:function(e){var t=ho(fo),n=t[0],r=t[1];return So((function(){var t=Za.transition;Za.transition=1;try{r(e)}finally{Za.transition=t}}),[e]),n},useTransition:function(){var e=ho(fo)[0];return[ko().current,e]},useMutableSource:yo,useOpaqueIdentifier:function(){return ho(fo)[0]},unstable_isNewReconciler:!1},Uo={readContext:sa,useCallback:Ao,useContext:sa,useEffect:So,useImperativeHandle:Ro,useLayoutEffect:Io,useMemo:Co,useReducer:po,useRef:ko,useState:function(){return po(fo)},useDebugValue:No,useDeferredValue:function(e){var t=po(fo),n=t[0],r=t[1];return So((function(){var t=Za.transition;Za.transition=1;try{r(e)}finally{Za.transition=t}}),[e]),n},useTransition:function(){var e=po(fo)[0];return[ko().current,e]},useMutableSource:yo,useOpaqueIdentifier:function(){return po(fo)[0]},unstable_isNewReconciler:!1},Fo=x.ReactCurrentOwner,jo=!1;function Vo(e,t,n,r){t.child=null===e?Na(t,null,n,r):Ra(t,e.child,n,r)}function qo(e,t,n,r,i){n=n.render;var a=t.ref;return ua(t,i),r=so(e,t,n,r,a,i),null===e||jo?(t.flags|=1,Vo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,uu(e,t,i))}function Bo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!=typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=$s(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,zo(e,t,o,r,i,a))}return o=e.child,0==(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:pr)(i,r)&&e.ref===t.ref)?uu(e,t,a):(t.flags|=1,(e=Qs(o,r)).ref=t.ref,e.return=t,t.child=e)}function zo(e,t,n,r,i,a){if(null!==e&&pr(e.memoizedProps,r)&&e.ref===t.ref){if(jo=!1,0==(a&i))return t.lanes=e.lanes,uu(e,t,a);0!=(16384&e.flags)&&(jo=!0)}return Ko(e,t,n,r,a)}function Wo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},Es(t,n);else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},Es(t,e),null;t.memoizedState={baseLanes:0},Es(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Es(t,r);return Vo(e,t,i,n),t.child}function Ho(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Ko(e,t,n,r,i){var a=bi(n)?yi:vi.current;return a=gi(t,a),ua(t,i),n=so(e,t,n,r,a,i),null===e||jo?(t.flags|=1,Vo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,uu(e,t,i))}function Go(e,t,n,i,a){if(bi(n)){var o=!0;xi(t)}else o=!1;if(ua(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,i),xa(t,n,i,a),i=!0;else if(null===e){var u=t.stateNode,s=t.memoizedProps;u.props=s;var c=u.context,l=n.contextType;"object"===r(l)&&null!==l?l=sa(l):l=gi(t,l=bi(n)?yi:vi.current);var f=n.getDerivedStateFromProps,h="function"==typeof f||"function"==typeof u.getSnapshotBeforeUpdate;h||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(s!==i||c!==l)&&_a(t,u,i,l),ca=!1;var d=t.memoizedState;u.state=d,va(t,i,u,a),c=t.memoizedState,s!==i||d!==c||mi.current||ca?("function"==typeof f&&(ga(t,n,f,i),c=t.memoizedState),(s=ca||wa(t,n,s,i,d,c,l))?(h||"function"!=typeof u.UNSAFE_componentWillMount&&"function"!=typeof u.componentWillMount||("function"==typeof u.componentWillMount&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&u.UNSAFE_componentWillMount()),"function"==typeof u.componentDidMount&&(t.flags|=4)):("function"==typeof u.componentDidMount&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=c),u.props=i,u.state=c,u.context=l,i=s):("function"==typeof u.componentDidMount&&(t.flags|=4),i=!1)}else{u=t.stateNode,fa(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:Zi(t.type,s),u.props=l,h=t.pendingProps,d=u.context,"object"===r(c=n.contextType)&&null!==c?c=sa(c):c=gi(t,c=bi(n)?yi:vi.current);var p=n.getDerivedStateFromProps;(f="function"==typeof p||"function"==typeof u.getSnapshotBeforeUpdate)||"function"!=typeof u.UNSAFE_componentWillReceiveProps&&"function"!=typeof u.componentWillReceiveProps||(s!==h||d!==c)&&_a(t,u,i,c),ca=!1,d=t.memoizedState,u.state=d,va(t,i,u,a);var v=t.memoizedState;s!==h||d!==v||mi.current||ca?("function"==typeof p&&(ga(t,n,p,i),v=t.memoizedState),(l=ca||wa(t,n,l,i,d,v,c))?(f||"function"!=typeof u.UNSAFE_componentWillUpdate&&"function"!=typeof u.componentWillUpdate||("function"==typeof u.componentWillUpdate&&u.componentWillUpdate(i,v,c),"function"==typeof u.UNSAFE_componentWillUpdate&&u.UNSAFE_componentWillUpdate(i,v,c)),"function"==typeof u.componentDidUpdate&&(t.flags|=4),"function"==typeof u.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof u.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof u.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=v),u.props=i,u.state=v,u.context=c,i=l):("function"!=typeof u.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof u.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),i=!1)}return Qo(e,t,n,i,o,a)}function Qo(e,t,n,r,i,a){Ho(e,t);var o=0!=(64&t.flags);if(!r&&!o)return i&&Ei(t,n,!1),uu(e,t,a);r=t.stateNode,Fo.current=t;var u=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ra(t,e.child,null,a),t.child=Ra(t,null,u,a)):Vo(e,t,u,a),t.memoizedState=r.state,i&&Ei(t,n,!0),t.child}function $o(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),La(e,t.containerInfo)}var Jo,Yo,Xo,Zo={dehydrated:null,retryLane:0};function eu(e,t,n){var r,i=t.pendingProps,a=ja.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),di(ja,1&a),null===e?(void 0!==i.fallback&&Ka(t),e=i.children,a=i.fallback,o?(e=tu(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Zo,e):"number"==typeof i.unstable_expectedLoadTime?(e=tu(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Zo,t.lanes=33554432,e):((n=Ys({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ru(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Zo,i):(n=nu(e,t,i.children,n),t.memoizedState=null,n))}function tu(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Ys(t,i,0,null),n=Js(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function nu(e,t,n,r){var i=e.child;return e=i.sibling,n=Qs(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ru(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0==(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Qs(o,u),null!==e?r=Qs(e,r):(r=Js(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function iu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),oa(e.return,t)}function au(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function ou(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Vo(e,t,r.children,n),0!=(2&(r=ja.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&iu(e,n);else if(19===e.tag)iu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(di(ja,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Va(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),au(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Va(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}au(t,!0,n,null,a,t.lastEffect);break;case"together":au(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function uu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zu|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(u(153));if(null!==t.child){for(n=Qs(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Qs(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function su(e,t){if(!za)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return bi(t.type)&&wi(),null;case 3:return Ma(),hi(mi),hi(vi),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Qa(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Fa(t);var i=Da(Pa.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(u(166));return null}if(e=Da(Ca.current),Qa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ei]=t,r[ti]=o,n){case"dialog":Or("cancel",r),Or("close",r);break;case"iframe":case"object":case"embed":Or("load",r);break;case"video":case"audio":for(e=0;e<Rr.length;e++)Or(Rr[e],r);break;case"source":Or("error",r);break;case"img":case"image":case"link":Or("error",r),Or("load",r);break;case"details":Or("toggle",r);break;case"input":ne(r,o),Or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Or("invalid",r);break;case"textarea":le(r,o),Or("invalid",r)}for(var s in Ie(n,o),e=null,o)o.hasOwnProperty(s)&&(i=o[s],"children"===s?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):c.hasOwnProperty(s)&&null!=i&&"onScroll"===s&&Or("scroll",r));switch(n){case"input":X(r),ae(r,o,!0);break;case"textarea":X(r),he(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Br)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(s=9===i.nodeType?i:i.ownerDocument,e===de&&(e=ve(n)),e===de?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ei]=t,e[ti]=r,Jo(e,t),t.stateNode=e,s=Te(n,r),n){case"dialog":Or("cancel",e),Or("close",e),i=r;break;case"iframe":case"object":case"embed":Or("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Or(Rr[i],e);i=r;break;case"source":Or("error",e),i=r;break;case"img":case"image":case"link":Or("error",e),Or("load",e),i=r;break;case"details":Or("toggle",e),i=r;break;case"input":ne(e,r),i=te(e,r),Or("invalid",e);break;case"option":i=ue(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Or("invalid",e);break;case"textarea":le(e,r),i=ce(e,r),Or("invalid",e);break;default:i=r}Ie(n,i);var l=i;for(o in l)if(l.hasOwnProperty(o)){var f=l[o];"style"===o?Ee(e,f):"dangerouslySetInnerHTML"===o?null!=(f=f?f.__html:void 0)&&be(e,f):"children"===o?"string"==typeof f?("textarea"!==n||""!==f)&&we(e,f):"number"==typeof f&&we(e,""+f):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(c.hasOwnProperty(o)?null!=f&&"onScroll"===o&&Or("scroll",e):null!=f&&_(e,o,f,s))}switch(n){case"input":X(e),ae(e,r,!1);break;case"textarea":X(e),he(e);break;case"option":null!=r.value&&e.setAttribute("value",""+J(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?se(e,!!r.multiple,o,!1):null!=r.defaultValue&&se(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Br)}Hr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(u(166));n=Da(Pa.current),Da(Ca.current),Qa(t)?(r=t.stateNode,n=t.memoizedProps,r[ei]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ei]=t,t.stateNode=r)}return null;case 13:return hi(ja),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Qa(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&ja.current)?0===Vu&&(Vu=3):(0!==Vu&&3!==Vu||(Vu=4),null===Lu||0==(134217727&zu)&&0==(134217727&Wu)||ws(Lu,Uu))),(r||n)&&(t.flags|=4),null);case 4:return Ma(),null===e&&Dr(t.stateNode.containerInfo),null;case 10:return aa(t),null;case 17:return bi(t.type)&&wi(),null;case 19:if(hi(ja),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(s=r.rendering))if(o)su(r,!1);else{if(0!==Vu||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(s=Va(e))){for(t.flags|=64,su(r,!1),null!==(o=s.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return di(ja,1&ja.current|2),t.child}e=e.sibling}null!==r.tail&&Hi()>Qu&&(t.flags|=64,o=!0,su(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Va(s))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),su(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!za)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Hi()-r.renderingStartTime>Qu&&1073741824!==n&&(t.flags|=64,o=!0,su(r,!1),t.lanes=33554432);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Hi(),n.sibling=null,t=ja.current,di(ja,o?1&t|2:1&t),n):null;case 23:case 24:return Ss(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(u(156,t.tag))}function lu(e){switch(e.tag){case 1:bi(e.type)&&wi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Ma(),hi(mi),hi(vi),Ya(),0!=(64&(t=e.flags)))throw Error(u(285));return e.flags=-4097&t|64,e;case 5:return Fa(e),null;case 13:return hi(ja),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return hi(ja),null;case 4:return Ma(),null;case 10:return aa(e),null;case 23:case 24:return Ss(),null;default:return null}}function fu(e,t){try{var n="",r=t;do{n+=Q(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function hu(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,i){var o=e.memoizedProps;if(o!==i){e=t.stateNode,Da(Ca.current);var u,s=null;switch(n){case"input":o=te(e,o),i=te(e,i),s=[];break;case"option":o=ue(e,o),i=ue(e,i),s=[];break;case"select":o=a({},o,{value:void 0}),i=a({},i,{value:void 0}),s=[];break;case"textarea":o=ce(e,o),i=ce(e,i),s=[];break;default:"function"!=typeof o.onClick&&"function"==typeof i.onClick&&(e.onclick=Br)}for(h in Ie(n,i),n=null,o)if(!i.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var l=o[h];for(u in l)l.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(c.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var f=i[h];if(l=null!=o?o[h]:void 0,i.hasOwnProperty(h)&&f!==l&&(null!=f||null!=l))if("style"===h)if(l){for(u in l)!l.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in f)f.hasOwnProperty(u)&&l[u]!==f[u]&&(n||(n={}),n[u]=f[u])}else n||(s||(s=[]),s.push(h,n)),n=f;else"dangerouslySetInnerHTML"===h?(f=f?f.__html:void 0,l=l?l.__html:void 0,null!=f&&l!==f&&(s=s||[]).push(h,f)):"children"===h?"string"!=typeof f&&"number"!=typeof f||(s=s||[]).push(h,""+f):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(c.hasOwnProperty(h)?(null!=f&&"onScroll"===h&&Or("scroll",e),s||l===f||(s=[])):"object"===r(f)&&null!==f&&f.$$typeof===U?f.toString():(s=s||[]).push(h,f))}n&&(s=s||[]).push("style",n);var h=s;(t.updateQueue=h)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var du="function"==typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=ha(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xu||(Xu=!0,Zu=r),hu(0,t)},n}function vu(e,t,n){(n=ha(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return hu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===es?es=new Set([this]):es.add(this),hu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var mu="function"==typeof WeakSet?WeakSet:Set;function yu(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Bs(e,t)}else t.current=null}function gu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Zi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&$r(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(u(163))}function bu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(js(n,e),Fs(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Zi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&ma(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ma(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Hr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Et(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(u(163))}function wu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xe("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(Ii&&"function"==typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(Si,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))js(t,n);else{r=t;try{i()}catch(e){Bs(r,e)}}n=n.next}while(n!==e)}break;case 1:if(yu(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Bs(t,e)}break;case 5:yu(t);break;case 4:Tu(e,t)}}function _u(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function xu(e){return 5===e.tag||3===e.tag||4===e.tag}function Eu(e){e:{for(var t=e.return;null!==t;){if(xu(t))break e;t=t.return}throw Error(u(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(u(161))}16&n.flags&&(we(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||xu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Su(e,n,t):Iu(e,n,t)}function Su(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Br));else if(4!==r&&null!==(e=e.child))for(Su(e,t,n),e=e.sibling;null!==e;)Su(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Tu(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(u(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var o=e,s=i,c=s;;)if(ku(o,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(o=n,s=i.stateNode,8===o.nodeType?o.parentNode.removeChild(s):o.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ru(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[ti]=r,"input"===e&&"radio"===r.type&&null!=r.name&&re(n,r),Te(e,i),t=Te(e,r),i=0;i<a.length;i+=2){var o=a[i],s=a[i+1];"style"===o?Ee(n,s):"dangerouslySetInnerHTML"===o?be(n,s):"children"===o?we(n,s):_(n,o,s,t)}switch(e){case"input":ie(n,r);break;case"textarea":fe(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?se(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?se(n,!!r.multiple,r.defaultValue,!0):se(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(u(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,Et(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Gu=Hi(),wu(t.child,!0)),void Nu(t);case 19:return void Nu(t);case 17:return;case 23:case 24:return void wu(t,null!==t.memoizedState)}throw Error(u(163))}function Nu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new mu),t.forEach((function(t){var r=Ws.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Au(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Cu=Math.ceil,Ou=x.ReactCurrentDispatcher,Pu=x.ReactCurrentOwner,Du=0,Lu=null,Mu=null,Uu=0,Fu=0,ju=fi(0),Vu=0,qu=null,Bu=0,zu=0,Wu=0,Hu=0,Ku=null,Gu=0,Qu=1/0;function $u(){Qu=Hi()+500}var Ju,Yu=null,Xu=!1,Zu=null,es=null,ts=!1,ns=null,rs=90,is=[],as=[],os=null,us=0,ss=null,cs=-1,ls=0,fs=0,hs=null,ds=!1;function ps(){return 0!=(48&Du)?Hi():-1!==cs?cs:cs=Hi()}function vs(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Ki()?1:2;if(0===ls&&(ls=Bu),0!==Xi.transition){0!==fs&&(fs=null!==Ku?Ku.pendingLanes:0),e=ls;var t=4186112&~fs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Ki(),0!=(4&Du)&&98===e?e=Bt(12,ls):e=Bt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ls),e}function ms(e,t,n){if(50<us)throw us=0,ss=null,Error(u(185));if(null===(e=ys(e,t)))return null;Ht(e,t,n),e===Lu&&(Wu|=t,4===Vu&&ws(e,Uu));var r=Ki();1===t?0!=(8&Du)&&0==(48&Du)?ks(e):(gs(e,n),0===Du&&($u(),Ji())):(0==(4&Du)||98!==r&&99!==r||(null===os?os=new Set([e]):os.add(e)),gs(e,n)),Ku=e}function ys(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function gs(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Kt(o),c=1<<s,l=a[s];if(-1===l){if(0==(c&r)||0!=(c&i)){l=t,jt(c);var f=Ft;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);o&=~c}if(r=Vt(e,e===Lu?Uu:0),t=Ft,0===r)null!==n&&(n!==ji&&Ni(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==ji&&Ni(n)}15===t?(n=ks.bind(null,e),null===qi?(qi=[n],Bi=Ri(Di,Yi)):qi.push(n),n=ji):14===t?n=$i(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(u(358,e))}}(t),n=$i(n,bs.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function bs(e){if(cs=-1,fs=ls=0,0!=(48&Du))throw Error(u(327));var t=e.callbackNode;if(Us()&&e.callbackNode!==t)return null;var n=Vt(e,e===Lu?Uu:0);if(0===n)return null;var r=n,i=Du;Du|=16;var a=Rs();for(Lu===e&&Uu===r||($u(),Is(e,r));;)try{Cs();break}catch(t){Ts(e,t)}if(ia(),Ou.current=a,Du=i,null!==Mu?r=0:(Lu=null,Uu=0,r=Vu),0!=(Bu&Wu))Is(e,0);else if(0!==r){if(2===r&&(Du|=64,e.hydrate&&(e.hydrate=!1,$r(e.containerInfo)),0!==(n=qt(e))&&(r=Ns(e,n))),1===r)throw t=qu,Is(e,0),ws(e,n),gs(e,Hi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(u(345));case 2:Ds(e);break;case 3:if(ws(e,n),(62914560&n)===n&&10<(r=Gu+500-Hi())){if(0!==Vt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ps(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Gr(Ds.bind(null,e),r);break}Ds(e);break;case 4:if(ws(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var o=31-Kt(n);a=1<<o,(o=r[o])>i&&(i=o),n&=~a}if(n=i,10<(n=(120>(n=Hi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Cu(n/1960))-n)){e.timeoutHandle=Gr(Ds.bind(null,e),n);break}Ds(e);break;case 5:Ds(e);break;default:throw Error(u(329))}}return gs(e,Hi()),e.callbackNode===t?bs.bind(null,e):null}function ws(e,t){for(t&=~Hu,t&=~Wu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Kt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!=(48&Du))throw Error(u(327));if(Us(),e===Lu&&0!=(e.expiredLanes&Uu)){var t=Uu,n=Ns(e,t);0!=(Bu&Wu)&&(n=Ns(e,t=Vt(e,t)))}else n=Ns(e,t=Vt(e,0));if(0!==e.tag&&2===n&&(Du|=64,e.hydrate&&(e.hydrate=!1,$r(e.containerInfo)),0!==(t=qt(e))&&(n=Ns(e,t))),1===n)throw n=qu,Is(e,0),ws(e,t),gs(e,Hi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ds(e),gs(e,Hi()),null}function _s(e,t){var n=Du;Du|=1;try{return e(t)}finally{0===(Du=n)&&($u(),Ji())}}function xs(e,t){var n=Du;Du&=-2,Du|=8;try{return e(t)}finally{0===(Du=n)&&($u(),Ji())}}function Es(e,t){di(ju,Fu),Fu|=t,Bu|=t}function Ss(){Fu=ju.current,hi(ju)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Qr(n)),null!==Mu)for(n=Mu.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&wi();break;case 3:Ma(),hi(mi),hi(vi),Ya();break;case 5:Fa(r);break;case 4:Ma();break;case 13:case 19:hi(ja);break;case 10:aa(r);break;case 23:case 24:Ss()}n=n.return}Lu=e,Mu=Qs(e.current,null),Uu=Fu=Bu=t,Vu=0,qu=null,Hu=Wu=zu=0}function Ts(e,t){for(;;){var n=Mu;try{if(ia(),Xa.current=Do,io){for(var i=to.memoizedState;null!==i;){var a=i.queue;null!==a&&(a.pending=null),i=i.next}io=!1}if(eo=0,ro=no=to=null,ao=!1,Pu.current=null,null===n||null===n.return){Vu=1,qu=t,Mu=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Uu,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==c&&"object"===r(c)&&"function"==typeof c.then){var l=c;if(0==(2&s.mode)){var f=s.alternate;f?(s.updateQueue=f.updateQueue,s.memoizedState=f.memoizedState,s.lanes=f.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!=(1&ja.current),d=u;do{var p;if(p=13===d.tag){var v=d.memoizedState;if(null!==v)p=null!==v.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var y=d.updateQueue;if(null===y){var g=new Set;g.add(l),d.updateQueue=g}else y.add(l);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var b=ha(-1,1);b.tag=2,da(s,b)}s.lanes|=1;break e}c=void 0,s=t;var w=o.pingCache;if(null===w?(w=o.pingCache=new du,c=new Set,w.set(l,c)):void 0===(c=w.get(l))&&(c=new Set,w.set(l,c)),!c.has(s)){c.add(s);var k=zs.bind(null,o,l,s);l.then(k,k)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);c=Error(($(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Vu&&(Vu=2),c=fu(c,s),d=u;do{switch(d.tag){case 3:o=c,d.flags|=4096,t&=-t,d.lanes|=t,pa(d,pu(0,o,t));break e;case 1:o=c;var _=d.type,x=d.stateNode;if(0==(64&d.flags)&&("function"==typeof _.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===es||!es.has(x)))){d.flags|=4096,t&=-t,d.lanes|=t,pa(d,vu(d,o,t));break e}}d=d.return}while(null!==d)}Ps(n)}catch(e){t=e,Mu===n&&null!==n&&(Mu=n=n.return);continue}break}}function Rs(){var e=Ou.current;return Ou.current=Do,null===e?Do:e}function Ns(e,t){var n=Du;Du|=16;var r=Rs();for(Lu===e&&Uu===t||Is(e,t);;)try{As();break}catch(t){Ts(e,t)}if(ia(),Du=n,Ou.current=r,null!==Mu)throw Error(u(261));return Lu=null,Uu=0,Vu}function As(){for(;null!==Mu;)Os(Mu)}function Cs(){for(;null!==Mu&&!Ai();)Os(Mu)}function Os(e){var t=Ju(e.alternate,e,Fu);e.memoizedProps=e.pendingProps,null===t?Ps(e):Mu=t,Pu.current=null}function Ps(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=cu(n,t,Fu)))return void(Mu=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Fu)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=lu(t)))return n.flags&=2047,void(Mu=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Mu=t);Mu=t=e}while(null!==t);0===Vu&&(Vu=5)}function Ds(e){var t=Ki();return Qi(99,Ls.bind(null,e,t)),null}function Ls(e,t){do{Us()}while(null!==ns);if(0!=(48&Du))throw Error(u(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(u(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var o=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Kt(a),l=1<<c;i[c]=0,o[c]=-1,s[c]=-1,a&=~l}if(null!==os&&0==(24&r)&&os.has(e)&&os.delete(e),e===Lu&&(Mu=Lu=null,Uu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Du,Du|=32,Pu.current=null,zr=Yt,br(o=gr())){if("selectionStart"in o)s={start:o.selectionStart,end:o.selectionEnd};else e:if(s=(s=o.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(e){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=o,y=null;t:for(;;){for(var g;m!==s||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===o)break t;if(y===s&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Wr={focusedElem:o,selectionRange:s},Yt=!1,hs=null,ds=!1,Yu=r;do{try{Ms()}catch(e){if(null===Yu)throw Error(u(330));Bs(Yu,e),Yu=Yu.nextEffect}}while(null!==Yu);hs=null,Yu=r;do{try{for(o=e;null!==Yu;){var b=Yu.flags;if(16&b&&we(Yu.stateNode,""),128&b){var w=Yu.alternate;if(null!==w){var k=w.ref;null!==k&&("function"==typeof k?k(null):k.current=null)}}switch(1038&b){case 2:Eu(Yu),Yu.flags&=-3;break;case 6:Eu(Yu),Yu.flags&=-3,Ru(Yu.alternate,Yu);break;case 1024:Yu.flags&=-1025;break;case 1028:Yu.flags&=-1025,Ru(Yu.alternate,Yu);break;case 4:Ru(Yu.alternate,Yu);break;case 8:Tu(o,s=Yu);var _=s.alternate;_u(s),null!==_&&_u(_)}Yu=Yu.nextEffect}}catch(e){if(null===Yu)throw Error(u(330));Bs(Yu,e),Yu=Yu.nextEffect}}while(null!==Yu);if(k=Wr,w=gr(),b=k.focusedElem,o=k.selectionRange,w!==b&&b&&b.ownerDocument&&yr(b.ownerDocument.documentElement,b)){null!==o&&br(b)&&(w=o.start,void 0===(k=o.end)&&(k=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(k,b.value.length)):(k=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(k=k.getSelection(),s=b.textContent.length,_=Math.min(o.start,s),o=void 0===o.end?_:Math.min(o.end,s),!k.extend&&_>o&&(s=o,o=_,_=s),s=mr(b,_),a=mr(b,o),s&&a&&(1!==k.rangeCount||k.anchorNode!==s.node||k.anchorOffset!==s.offset||k.focusNode!==a.node||k.focusOffset!==a.offset)&&((w=w.createRange()).setStart(s.node,s.offset),k.removeAllRanges(),_>o?(k.addRange(w),k.extend(a.node,a.offset)):(w.setEnd(a.node,a.offset),k.addRange(w))))),w=[];for(k=b;k=k.parentNode;)1===k.nodeType&&w.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(k=w[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Yt=!!zr,Wr=zr=null,e.current=n,Yu=r;do{try{for(b=e;null!==Yu;){var x=Yu.flags;if(36&x&&bu(b,Yu.alternate,Yu),128&x){w=void 0;var E=Yu.ref;if(null!==E){var S=Yu.stateNode;Yu.tag,w=S,"function"==typeof E?E(w):E.current=w}}Yu=Yu.nextEffect}}catch(e){if(null===Yu)throw Error(u(330));Bs(Yu,e),Yu=Yu.nextEffect}}while(null!==Yu);Yu=null,Vi(),Du=i}else e.current=n;if(ts)ts=!1,ns=e,rs=t;else for(Yu=r;null!==Yu;)t=Yu.nextEffect,Yu.nextEffect=null,8&Yu.flags&&((x=Yu).sibling=null,x.stateNode=null),Yu=t;if(0===(r=e.pendingLanes)&&(es=null),1===r?e===ss?us++:(us=0,ss=e):us=0,n=n.stateNode,Ii&&"function"==typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(Si,n,void 0,64==(64&n.current.flags))}catch(e){}if(gs(e,Hi()),Xu)throw Xu=!1,e=Zu,Zu=null,e;return 0!=(8&Du)||Ji(),null}function Ms(){for(;null!==Yu;){var e=Yu.alternate;ds||null===hs||(0!=(8&Yu.flags)?nt(Yu,hs)&&(ds=!0):13===Yu.tag&&Au(e,Yu)&&nt(Yu,hs)&&(ds=!0));var t=Yu.flags;0!=(256&t)&&gu(e,Yu),0==(512&t)||ts||(ts=!0,$i(97,(function(){return Us(),null}))),Yu=Yu.nextEffect}}function Us(){if(90!==rs){var e=97<rs?97:rs;return rs=90,Qi(e,Vs)}return!1}function Fs(e,t){is.push(t,e),ts||(ts=!0,$i(97,(function(){return Us(),null})))}function js(e,t){as.push(t,e),ts||(ts=!0,$i(97,(function(){return Us(),null})))}function Vs(){if(null===ns)return!1;var e=ns;if(ns=null,0!=(48&Du))throw Error(u(331));var t=Du;Du|=32;var n=as;as=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],o=i.destroy;if(i.destroy=void 0,"function"==typeof o)try{o()}catch(e){if(null===a)throw Error(u(330));Bs(a,e)}}for(n=is,is=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(e){if(null===a)throw Error(u(330));Bs(a,e)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Du=t,Ji(),!0}function qs(e,t,n){da(e,t=pu(0,t=fu(n,t),1)),t=ps(),null!==(e=ys(e,1))&&(Ht(e,1,t),gs(e,t))}function Bs(e,t){if(3===e.tag)qs(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){qs(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===es||!es.has(r))){var i=vu(n,e=fu(t,e),1);if(da(n,i),i=ps(),null!==(n=ys(n,1)))Ht(n,1,i),gs(n,i);else if("function"==typeof r.componentDidCatch&&(null===es||!es.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function zs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ps(),e.pingedLanes|=e.suspendedLanes&n,Lu===e&&(Uu&n)===n&&(4===Vu||3===Vu&&(62914560&Uu)===Uu&&500>Hi()-Gu?Is(e,0):Hu|=n),gs(e,t)}function Ws(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Ki()?1:2:(0===ls&&(ls=Bu),0===(t=zt(62914560&~ls))&&(t=4194304))),n=ps(),null!==(e=ys(e,t))&&(Ht(e,t,n),gs(e,n))}function Hs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(e,t,n,r){return new Hs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Qs(e,t){var n=e.alternate;return null===n?((n=Ks(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function $s(e,t,n,i,a,o){var s=2;if(i=e,"function"==typeof e)Gs(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case I:return Js(n.children,a,o,t);case F:s=8,a|=16;break;case T:s=8,a|=1;break;case R:return(e=Ks(12,n,t,8|a)).elementType=R,e.type=R,e.lanes=o,e;case O:return(e=Ks(13,n,t,a)).type=O,e.elementType=O,e.lanes=o,e;case P:return(e=Ks(19,n,t,a)).elementType=P,e.lanes=o,e;case j:return Ys(n,a,o,t);case V:return(e=Ks(24,n,t,a)).elementType=V,e.lanes=o,e;default:if("object"===r(e)&&null!==e)switch(e.$$typeof){case N:s=10;break e;case A:s=9;break e;case C:s=11;break e;case D:s=14;break e;case L:s=16,i=null;break e;case M:s=22;break e}throw Error(u(130,null==e?e:r(e),""))}return(t=Ks(s,n,t,a)).elementType=e,t.type=i,t.lanes=o,t}function Js(e,t,n,r){return(e=Ks(7,e,r,t)).lanes=n,e}function Ys(e,t,n,r){return(e=Ks(23,e,r,t)).elementType=j,e.lanes=n,e}function Xs(e,t,n){return(e=Ks(6,e,null,t)).lanes=n,e}function Zs(e,t,n){return(t=Ks(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ec(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Wt(0),this.expirationTimes=Wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.mutableSourceEagerHydrationData=null}function tc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function nc(e,t,n,r){var i=t.current,a=ps(),o=vs(i);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(u(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(bi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(u(171))}if(1===n.tag){var c=n.type;if(bi(c)){n=_i(n,c,s);break e}}n=s}else n=pi;return null===t.context?t.context=n:t.pendingContext=n,(t=ha(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),da(i,t),ms(i,o,a),o}function rc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ic(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ac(e,t){ic(e,t),(e=e.alternate)&&ic(e,t)}function oc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new ec(e,t,null!=n&&!0===n.hydrate),t=Ks(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,la(t),e[ni]=n.current,Dr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function uc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"==typeof i){var u=i;i=function(){var e=rc(o);u.call(e)}}nc(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new oc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"==typeof i){var s=i;i=function(){var e=rc(o);s.call(e)}}xs((function(){nc(t,o,e,i)}))}return rc(o)}function cc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!uc(t))throw Error(u(200));return tc(e,t,null,n)}Ju=function(e,t,n){var i=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||mi.current)jo=!0;else{if(0==(n&i)){switch(jo=!1,t.tag){case 3:$o(t),$a();break;case 5:Ua(t);break;case 1:bi(t.type)&&xi(t);break;case 4:La(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var a=t.type._context;di(ea,a._currentValue),a._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?eu(e,t,n):(di(ja,1&ja.current),null!==(t=uu(e,t,n))?t.sibling:null);di(ja,1&ja.current);break;case 19:if(i=0!=(n&t.childLanes),0!=(64&e.flags)){if(i)return ou(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),di(ja,ja.current),i)break;return null;case 23:case 24:return t.lanes=0,Wo(e,t,n)}return uu(e,t,n)}jo=0!=(16384&e.flags)}else jo=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=gi(t,vi.current),ua(t,n),a=so(null,t,i,e,a,n),t.flags|=1,"object"===r(a)&&null!==a&&"function"==typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,bi(i)){var o=!0;xi(t)}else o=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,la(t);var s=i.getDerivedStateFromProps;"function"==typeof s&&ga(t,i,s,e),a.updater=ba,t.stateNode=a,a._reactInternals=t,xa(t,i,e,n),t=Qo(null,t,i,!0,o,n)}else t.tag=0,Vo(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(o=a._init)(a._payload),t.type=a,o=t.tag=function(e){if("function"==typeof e)return Gs(e)?1:0;if(null!=e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(a),e=Zi(a,e),o){case 0:t=Ko(null,t,a,e,n);break e;case 1:t=Go(null,t,a,e,n);break e;case 11:t=qo(null,t,a,e,n);break e;case 14:t=Bo(null,t,a,Zi(a.type,e),i,n);break e}throw Error(u(306,a,""))}return t;case 0:return i=t.type,a=t.pendingProps,Ko(e,t,i,a=t.elementType===i?a:Zi(i,a),n);case 1:return i=t.type,a=t.pendingProps,Go(e,t,i,a=t.elementType===i?a:Zi(i,a),n);case 3:if($o(t),i=t.updateQueue,null===e||null===i)throw Error(u(282));if(i=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,fa(e,t),va(t,i,null,n),(i=t.memoizedState.element)===a)$a(),t=uu(e,t,n);else{if((o=(a=t.stateNode).hydrate)&&(Ba=Jr(t.stateNode.containerInfo.firstChild),qa=t,o=za=!0),o){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(o=e[a])._workInProgressVersionPrimary=e[a+1],Ja.push(o);for(n=Na(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Vo(e,t,i,n),$a();t=t.child}return t;case 5:return Ua(t),null===e&&Ka(t),i=t.type,a=t.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,Kr(i,a)?s=null:null!==o&&Kr(i,o)&&(t.flags|=16),Ho(e,t),Vo(e,t,s,n),t.child;case 6:return null===e&&Ka(t),null;case 13:return eu(e,t,n);case 4:return La(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ra(t,null,i,n):Vo(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,qo(e,t,i,a=t.elementType===i?a:Zi(i,a),n);case 7:return Vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value;var c=t.type._context;if(di(ea,c._currentValue),c._currentValue=o,null!==s)if(c=s.value,0===(o=hr(c,o)?0:0|("function"==typeof i._calculateChangedBits?i._calculateChangedBits(c,o):1073741823))){if(s.children===a.children&&!mi.current){t=uu(e,t,n);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var l=c.dependencies;if(null!==l){s=c.child;for(var f=l.firstContext;null!==f;){if(f.context===i&&0!=(f.observedBits&o)){1===c.tag&&((f=ha(-1,n&-n)).tag=2,da(c,f)),c.lanes|=n,null!==(f=c.alternate)&&(f.lanes|=n),oa(c.return,n),l.lanes|=n;break}f=f.next}}else s=10===c.tag&&c.type===t.type?null:c.child;if(null!==s)s.return=c;else for(s=c;null!==s;){if(s===t){s=null;break}if(null!==(c=s.sibling)){c.return=s.return,s=c;break}s=s.return}c=s}Vo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=(o=t.pendingProps).children,ua(t,n),i=i(a=sa(a,o.unstable_observedBits)),t.flags|=1,Vo(e,t,i,n),t.child;case 14:return o=Zi(a=t.type,t.pendingProps),Bo(e,t,a,o=Zi(a.type,o),i,n);case 15:return zo(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Zi(i,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,bi(i)?(e=!0,xi(t)):e=!1,ua(t,n),ka(t,i,a),xa(t,i,a,n),Qo(null,t,i,!0,e,n);case 19:return ou(e,t,n);case 23:case 24:return Wo(e,t,n)}throw Error(u(156,t.tag))},oc.prototype.render=function(e){nc(e,this._internalRoot,null,null)},oc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;nc(null,e,null,(function(){t[ni]=null}))},rt=function(e){13===e.tag&&(ms(e,4,ps()),ac(e,4))},it=function(e){13===e.tag&&(ms(e,67108864,ps()),ac(e,67108864))},at=function(e){if(13===e.tag){var t=ps(),n=vs(e);ms(e,n,t),ac(e,n)}},ot=function(e,t){return t()},Ne=function(e,t,n){switch(t){case"input":if(ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ui(r);if(!i)throw Error(u(90));Z(r),ie(r,i)}}}break;case"textarea":fe(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Le=_s,Me=function(e,t,n,r,i){var a=Du;Du|=4;try{return Qi(98,e.bind(null,t,n,r,i))}finally{0===(Du=a)&&($u(),Ji())}},Ue=function(){0==(49&Du)&&(function(){if(null!==os){var e=os;os=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,gs(e,Hi())}))}Ji()}(),Us())},Fe=function(e,t){var n=Du;Du|=2;try{return e(t)}finally{0===(Du=n)&&($u(),Ji())}};var lc={Events:[ai,oi,ui,Pe,De,Us,{current:!1}]},fc={findFiberByHostInstance:ii,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},hc={bundleType:fc.bundleType,version:fc.version,rendererPackageName:fc.rendererPackageName,rendererConfig:fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=tt(e))?null:e.stateNode},findFiberByHostInstance:fc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{Si=dc.inject(hc),Ii=dc}catch(ge){}}t.render=function(e,t,n){if(!uc(t))throw Error(u(200));return sc(null,e,t,!1,n)}},169:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(802)},15:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,a=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,h=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,k=r?Symbol.for("react.scope"):60119;function _(e){if("object"===n(e)&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case f:case h:case o:case s:case u:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case y:case m:case c:return e;default:return t}}case a:return t}}}function x(e){return _(e)===h}t.AsyncMode=f,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=o,t.Lazy=y,t.Memo=m,t.Portal=a,t.Profiler=s,t.StrictMode=u,t.Suspense=p,t.isAsyncMode=function(e){return x(e)||_(e)===f},t.isConcurrentMode=x,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===n(e)&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===a},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===u},t.isSuspense=function(e){return _(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===h||e===s||e===u||e===p||e===v||"object"===n(e)&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===b||e.$$typeof===w||e.$$typeof===k||e.$$typeof===g)},t.typeOf=_},532:(e,t,n)=>{"use strict";e.exports=n(15)},266:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},231:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=n(266);e.exports=p,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var a=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],i=0,o=0,u="",s=t&&t.delimiter||"/";null!=(n=a.exec(e));){var f=n[0],h=n[1],d=n.index;if(u+=e.slice(o,d),o=d+f.length,h)u+=h[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],b=n[6],w=n[7];u&&(r.push(u),u="");var k=null!=v&&null!=p&&p!==v,_="+"===b||"*"===b,x="?"===b||"*"===b,E=n[2]||s,S=y||g;r.push({name:m||i++,prefix:v||"",delimiter:E,optional:x,repeat:_,partial:k,asterisk:!!w,pattern:S?l(S):w?".*":"[^"+c(E)+"]+?"})}}return o<e.length&&(u+=e.substr(o)),u&&r.push(u),r}function u(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),a=0;a<e.length;a++)"object"===r(e[a])&&(n[a]=new RegExp("^(?:"+e[a].pattern+")$",h(t)));return function(t,r){for(var a="",o=t||{},s=(r||{}).pretty?u:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!=typeof l){var f,h=o[l.name];if(null==h){if(l.optional){l.partial&&(a+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(i(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(f=s(h[d]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");a+=(0===d?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?encodeURI(h).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):s(h),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');a+=l.prefix+f}}else a+=l}return a}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function f(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){i(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,a=!1!==n.end,o="",u=0;u<e.length;u++){var s=e[u];if("string"==typeof s)o+=c(s);else{var l=c(s.prefix),d="(?:"+s.pattern+")";t.push(s),s.repeat&&(d+="(?:"+l+d+")*"),o+=d=s.optional?s.partial?l+"("+d+")?":"(?:"+l+"("+d+"))?":l+"("+d+")"}}var p=c(n.delimiter||"/"),v=o.slice(-p.length)===p;return r||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":r&&v?"":"(?="+p+"|$)",f(new RegExp("^"+o,h(n)),t)}function p(e,t,n){return i(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return f(e,t)}(e,t):i(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(p(e[i],t,n).source);return f(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(o(e,n),t,n)}(e,t,n)}},563:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i=n(103),a=60103,o=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var u=60109,s=60110,c=60112;t.Suspense=60113;var l=60115,f=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;a=h("react.element"),o=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),u=h("react.provider"),s=h("react.context"),c=h("react.forward_ref"),t.Suspense=h("react.suspense"),l=h("react.memo"),f=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==r(e)&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var w=b.prototype=new g;w.constructor=b,i(w,y.prototype),w.isPureReactComponent=!0;var k={current:null},_=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,r)&&!x.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:k.current}}function S(e){return"object"===r(e)&&null!==e&&e.$$typeof===a}var I=/\/+/g;function T(e,t){return"object"===r(e)&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,n,i,u){var s=r(e);"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case a:case o:c=!0}}if(c)return u=u(c=e),e=""===i?"."+T(c,0):i,Array.isArray(u)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),R(u,t,n,"",(function(e){return e}))):null!=u&&(S(u)&&(u=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(u,n+(!u.key||c&&c.key===u.key?"":(""+u.key).replace(I,"$&/")+"/")+e)),t.push(u)),1;if(c=0,i=""===i?".":i+":",Array.isArray(e))for(var l=0;l<e.length;l++){var f=i+T(s=e[l],l);c+=R(s,t,n,f,u)}else if(f=function(e){return null===e||"object"!==r(e)?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof f)for(e=f.call(e),l=0;!(s=e.next()).done;)c+=R(s=s.value,t,n,f=i+T(s,l++),u);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function N(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var C={current:null};function O(){var e=C.current;if(null===e)throw Error(p(321));return e}var P={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error(p(143));return e}},t.Component=y,t.PureComponent=b,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null==e)throw Error(p(267,e));var r=i({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!x.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];r.children=c}return{$$typeof:a,type:e.type,key:o,ref:u,props:r,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:l,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},709:(e,t,n)=>{"use strict";e.exports=n(563)},245:(e,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var r,i,a,o;if("object"===("undefined"==typeof performance?"undefined":n(performance))&&"function"==typeof performance.now){var u=performance;t.unstable_now=function(){return u.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,f=null,h=function e(){if(null!==l)try{var n=t.unstable_now();l(!0,n),l=null}catch(t){throw setTimeout(e,0),t}};r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(h,0))},i=function(e,t){f=setTimeout(e,t)},a=function(){clearTimeout(f)},t.unstable_shouldYield=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var v=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,y=null,g=-1,b=5,w=0;t.unstable_shouldYield=function(){return t.unstable_now()>=w},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var k=new MessageChannel,_=k.port2;k.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();w=e+b;try{y(!0,e)?_.postMessage(null):(m=!1,y=null)}catch(e){throw _.postMessage(null),e}}else m=!1},r=function(e){y=e,m||(m=!0,_.postMessage(null))},i=function(e,n){g=d((function(){e(t.unstable_now())}),n)},a=function(){p(g),g=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function S(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>I(o,n))void 0!==s&&0>I(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>I(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],R=[],N=1,A=null,C=3,O=!1,P=!1,D=!1;function L(e){for(var t=E(R);null!==t;){if(null===t.callback)S(R);else{if(!(t.startTime<=e))break;S(R),t.sortIndex=t.expirationTime,x(T,t)}t=E(R)}}function M(e){if(D=!1,L(e),!P)if(null!==E(T))P=!0,r(U);else{var t=E(R);null!==t&&i(M,t.startTime-e)}}function U(e,n){P=!1,D&&(D=!1,a()),O=!0;var r=C;try{for(L(n),A=E(T);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"==typeof o){A.callback=null,C=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"==typeof u?A.callback=u:A===E(T)&&S(T),L(n)}else S(T);A=E(T)}if(null!==A)var s=!0;else{var c=E(R);null!==c&&i(M,c.startTime-n),s=!1}return s}finally{A=null,C=r,O=!1}}var F=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||O||(P=!0,r(U))},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return E(T)},t.unstable_next=function(e){switch(C){case 1:case 2:case 3:var t=3;break;default:t=C}var n=C;C=t;try{return e()}finally{C=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=C;C=e;try{return t()}finally{C=n}},t.unstable_scheduleCallback=function(e,o,u){var s=t.unstable_now();switch("object"===n(u)&&null!==u?u="number"==typeof(u=u.delay)&&0<u?s+u:s:u=s,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:N++,callback:o,priorityLevel:e,startTime:u,expirationTime:c=u+c,sortIndex:-1},u>s?(e.sortIndex=u,x(R,e),null===E(T)&&e===E(R)&&(D?a():D=!0,i(M,u-s))):(e.sortIndex=c,x(T,e),P||O||(P=!0,r(U))),e},t.unstable_wrapCallback=function(e){var t=C;return function(){var n=C;C=t;try{return e.apply(this,arguments)}finally{C=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(245)},47:function(e,t,n){var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}e=n.nmd(e),function(a,o){"use strict";var u="function",s="undefined",c="object",l="string",f="model",h="name",d="type",p="vendor",v="version",m="architecture",y="console",g="mobile",b="tablet",w="smarttv",k="wearable",_="embedded",x={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return i(e)===l&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return i(e)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:o},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),i(t)===s?e:e.substring(0,255)}},E={rgx:function(e,t){for(var n,r,a,s,l,f,h=0;h<t.length&&!l;){var d=t[h],p=t[h+1];for(n=r=0;n<d.length&&!l;)if(l=d[n++].exec(e))for(a=0;a<p.length;a++)f=l[++r],i(s=p[a])===c&&s.length>0?2==s.length?i(s[1])==u?this[s[0]]=s[1].call(this,f):this[s[0]]=s[1]:3==s.length?i(s[1])!==u||s[1].exec&&s[1].test?this[s[0]]=f?f.replace(s[1],s[2]):o:this[s[0]]=f?s[1].call(this,f,s[2]):o:4==s.length&&(this[s[0]]=f?s[3].call(this,f.replace(s[1],s[2])):o):this[s]=f||o;h+=2}},str:function(e,t){for(var n in t)if(i(t[n])===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(x.has(t[n][r],e))return"?"===n?o:n}else if(x.has(t[n],e))return"?"===n?o:n;return e}},S={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},I={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[v,[h,"Chrome"]],[/(?:edge|edgios|edga|edg)\/([\w\.]+)/i],[v,[h,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[h,v],[/opios[\/\s]+([\w\.]+)/i],[v,[h,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[v,[h,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,v],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[v,[h,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[v,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[v,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[v,[h,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[v,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[v,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure Browser"],v],[/focus\/([\w\.]+)/i],[v,[h,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[v,[h,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[v,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[v,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[v,[h,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[v,[h,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[v,[h,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[h,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 Browser"],v],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],v],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[h,v],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[h],[/;fbav\/([\w\.]+);/i],[v,[h,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[h,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[h,v],[/\bgsa\/([\w\.]+)\s.*safari\//i],[v,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[v,[h,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[h,"Chrome WebView"],v],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[v,[h,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[h,v],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[v,[h,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[v,h],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[h,[v,E.str,S.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[h,v],[/(navigator|netscape)\/([\w\.-]+)/i],[[h,"Netscape"],v],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[v,[h,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[h,v]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,x.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[m,/ower/,"",x.lowerize]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,x.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[f,[p,"Samsung"],[d,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[f,[p,"Samsung"],[d,g]],[/\((ip(?:hone|od)[\s\w]*);/i],[f,[p,"Apple"],[d,g]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[p,"Apple"],[d,b]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[f,[p,"Huawei"],[d,b]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[f,[p,"Huawei"],[d,g]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[f,/_/g," "],[p,"Xiaomi"],[d,g]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[f,/_/g," "],[p,"Xiaomi"],[d,b]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[f,[p,"OPPO"],[d,g]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[f,[p,"Vivo"],[d,g]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[f,[p,"Realme"],[d,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[f,[p,"Motorola"],[d,g]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[p,"Motorola"],[d,b]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[f,[p,"LG"],[d,b]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[f,[p,"LG"],[d,g]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[f,[p,"Lenovo"],[d,b]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[f,/_/g," "],[p,"Nokia"],[d,g]],[/droid.+;\s(pixel\sc)[\s)]/i],[f,[p,"Google"],[d,b]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[f,[p,"Google"],[d,g]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[p,"Sony"],[d,g]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[f,"Xperia Tablet"],[p,"Sony"],[d,b]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[f,[p,"OnePlus"],[d,g]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[f,[p,"Amazon"],[d,b]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[f,"Fire Phone"],[p,"Amazon"],[d,g]],[/\((playbook);[\w\s\),;-]+(rim)/i],[f,p,[d,b]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[f,[p,"BlackBerry"],[d,g]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[f,[p,"ASUS"],[d,b]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[f,[p,"ASUS"],[d,g]],[/(nexus\s9)/i],[f,[p,"HTC"],[d,b]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[p,[f,/_/g," "],[d,g]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[f,[p,"Acer"],[d,b]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[f,[p,"Meizu"],[d,g]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[p,f,[d,g]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[p,f,[d,b]],[/\s(surface\sduo)\s/i],[f,[p,"Microsoft"],[d,b]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[f,[p,"Fairphone"],[d,g]],[/\s(u304aa)\sbuild/i],[f,[p,"AT&T"],[d,g]],[/sie-(\w*)/i],[f,[p,"Siemens"],[d,g]],[/[;\/]\s?(rct\w+)\sbuild/i],[f,[p,"RCA"],[d,b]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[f,[p,"Dell"],[d,b]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[f,[p,"Verizon"],[d,b]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[f,[p,"Barnes & Noble"],[d,b]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[f,[p,"NuVision"],[d,b]],[/;\s(k88)\sbuild/i],[f,[p,"ZTE"],[d,b]],[/;\s(nx\d{3}j)\sbuild/i],[f,[p,"ZTE"],[d,g]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[f,[p,"Swiss"],[d,g]],[/[;\/]\s?(zur\d{3})\sbuild/i],[f,[p,"Swiss"],[d,b]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[f,[p,"Zeki"],[d,b]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[p,"Dragon Touch"],f,[d,b]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[f,[p,"Insignia"],[d,b]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[f,[p,"NextBook"],[d,b]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[p,"Voice"],f,[d,g]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[p,"LvTel"],f,[d,g]],[/;\s(ph-1)\s/i],[f,[p,"Essential"],[d,g]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[f,[p,"Envizen"],[d,b]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[f,[p,"MachSpeed"],[d,b]],[/[;\/]\s?tu_(1491)\sbuild/i],[f,[p,"Rotor"],[d,b]],[/(shield[\w\s]+)\sbuild/i],[f,[p,"Nvidia"],[d,b]],[/(sprint)\s(\w+)/i],[p,f,[d,g]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[p,"Microsoft"],[d,g]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[p,"Zebra"],[d,b]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[p,"Zebra"],[d,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[p,f,[d,y]],[/droid.+;\s(shield)\sbuild/i],[f,[p,"Nvidia"],[d,y]],[/(playstation\s[345portablevi]+)/i],[f,[p,"Sony"],[d,y]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[f,[p,"Microsoft"],[d,y]],[/smart-tv.+(samsung)/i],[p,[d,w]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[p,"Samsung"],[d,w]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[p,"LG"],[d,w]],[/(apple)\s?tv/i],[p,[f,"Apple TV"],[d,w]],[/crkey/i],[[f,"Chromecast"],[p,"Google"],[d,w]],[/droid.+aft([\w])(\sbuild\/|\))/i],[f,[p,"Amazon"],[d,w]],[/\(dtv[\);].+(aquos)/i],[f,[p,"Sharp"],[d,w]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[p,x.trim],[f,x.trim],[d,w]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[d,w]],[/((pebble))app\/[\d\.]+\s/i],[p,f,[d,k]],[/droid.+;\s(glass)\s\d/i],[f,[p,"Google"],[d,k]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[f,[p,"Zebra"],[d,k]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[p,[d,_]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[f,[d,g]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[f,[d,b]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[d,x.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[f,[p,"Generic"]],[/(phone)/i],[[d,g]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[v,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[v,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[h,v],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[v,h]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[h,v],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[h,[v,E.str,S.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[h,"Windows"],[v,E.str,S.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[v,/_/g,"."],[h,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[h,"Mac OS"],[v,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[h,v],[/\(bb(10);/i],[v,[h,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[v,[h,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[h,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[v,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[v,[h,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[h,"Chromium OS"],v],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[h,v],[/(sunos)\s?([\w\.\d]*)/i],[[h,"Solaris"],v],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[h,v]]},T=function e(t,n){if("object"===i(t)&&(n=t,t=o),!(this instanceof e))return new e(t,n).getResult();var r=t||(void 0!==a&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),u=n?x.extend(I,n):I;return this.getBrowser=function(){var e={name:o,version:o};return E.rgx.call(e,r,u.browser),e.major=x.major(e.version),e},this.getCPU=function(){var e={architecture:o};return E.rgx.call(e,r,u.cpu),e},this.getDevice=function(){var e={vendor:o,model:o,type:o};return E.rgx.call(e,r,u.device),e},this.getEngine=function(){var e={name:o,version:o};return E.rgx.call(e,r,u.engine),e},this.getOS=function(){var e={name:o,version:o};return E.rgx.call(e,r,u.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=i(e)===l&&e.length>255?x.trim(e,255):e,this},this.setUA(r),this};T.VERSION="0.7.28",T.BROWSER={NAME:h,MAJOR:"major",VERSION:v},T.CPU={ARCHITECTURE:m},T.DEVICE={MODEL:f,VENDOR:p,TYPE:d,CONSOLE:y,MOBILE:g,SMARTTV:w,TABLET:b,WEARABLE:k,EMBEDDED:_},T.ENGINE={NAME:h,VERSION:v},T.OS={NAME:h,VERSION:v},i(t)!==s?(i(e)!==s&&e.exports&&(t=e.exports=T),t.UAParser=T):(r=function(){return T}.call(t,n,t,e))===o||(e.exports=r);var R=void 0!==a&&(a.jQuery||a.Zepto);if(R&&!R.ua){var N=new T;R.ua=N.getResult(),R.ua.get=function(){return N.getUA()},R.ua.set=function(e){N.setUA(e);var t=N.getResult();for(var n in t)R.ua[n]=t[n]}}}("object"===("undefined"==typeof window?"undefined":i(window))?window:this)}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=n,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>"main.f1fa9c76e6ccc530c3ed.js",i.miniCssF=e=>"main.d15291d76ac16ec46de8.css",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="prototype-parth-with-webpack:",i.l=(n,r,a,o)=>{if(e[n])e[n].push(r);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,i.nc&&u.setAttribute("nonce",i.nc),u.setAttribute("data-webpack",t+a),u.src=n),e[n]=[r];var h=(t,r)=>{u.onerror=u.onload=null,clearTimeout(d);var i=e[n];if(delete e[n],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((e=>e(r))),t)return t(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={179:0};i.f.j=(t,n)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=a);var o=i.p+i.u(t),u=new Error;i.l(o,(n=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,r[1](u)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,a,[o,u,s]=n,c=0;if(o.some((t=>0!==e[t]))){for(r in u)i.o(u,r)&&(i.m[r]=u[r]);if(s)s(i)}for(t&&t(n);c<o.length;c++)a=o[c],i.o(e,a)&&e[a]&&e[a][0](),e[o[c]]=0},n=self.webpackChunkprototype_parth_with_webpack=self.webpackChunkprototype_parth_with_webpack||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};i.r(e),i.d(e,{FirebaseError:()=>R,SDK_VERSION:()=>Ae,_DEFAULT_ENTRY_NAME:()=>ve,_addComponent:()=>be,_addOrOverwriteComponent:()=>we,_apps:()=>ye,_clearComponents:()=>Ee,_components:()=>ge,_getProvider:()=>_e,_registerComponent:()=>ke,_removeServiceInstance:()=>xe,deleteApp:()=>De,getApp:()=>Oe,getApps:()=>Pe,initializeApp:()=>Ce,onLog:()=>Ue,registerVersion:()=>Me,setLogLevel:()=>Fe});var t=i(709),n=i(169);var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function u(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function s(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Object.create;function c(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o}function f(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var d=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&(a=e[n++]))<<12|(63&(u=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{a=e[n++];var u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},v=function(e){return function(e){var t=d(e);return p.encodeByteArray(t,!0)}(e).replace(/\./g,"")},m=function(e){try{return p.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function y(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&g(n)&&(e[n]=y(e[n],t[n]));return e}function g(e){return"__proto__"!==e}var b=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function w(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=a({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[v(JSON.stringify({alg:"none",type:"JWT"})),v(JSON.stringify(o)),""].join(".")}function k(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function _(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function x(){try{return"[object process]"===Object.prototype.toString.call(i.g.process)}catch(e){return!1}}function E(){var e="object"===("undefined"==typeof chrome?"undefined":h(chrome))?chrome.runtime:"object"===("undefined"==typeof browser?"undefined":h(browser))?browser.runtime:void 0;return"object"===h(e)&&void 0!==e.id}function S(){return"object"===("undefined"==typeof navigator?"undefined":h(navigator))&&"ReactNative"===navigator.product}function I(){var e=k();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return"indexedDB"in self&&null!=indexedDB}var R=function(e){function t(n,r,i){var a=e.call(this,r)||this;return a.code=n,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(a,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(a,N.prototype.create),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t}(Error),N=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,a=this.errors[e],o=a?A(a,r):"Error",u=this.serviceName+": "+o+" ("+i+").",s=new R(i,u,r);return s},e}();function A(e,t){return e.replace(C,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var C=/\{\$([^}]+)}/g;function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function P(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(D(u)&&D(s)){if(!P(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){o=l[c];if(!n.includes(o))return!1}return!0}function D(e){return null!==e&&"object"===h(e)}function L(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var a=i[r];n(a[0],a[1])}return t.length?"&"+t.join("&"):""}function M(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function U(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}!function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var a,o,u=this.chain_[0],s=this.chain_[1],c=this.chain_[2],l=this.chain_[3],f=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(a=l^s&(c^l),o=1518500249):(a=s^c^l,o=1859775393):r<60?(a=s&c|l&(s|c),o=2400959708):(a=s^c^l,o=3395469782);i=(u<<5|u>>>27)+a+f+o+n[r]&4294967295;f=l,l=c,c=4294967295&(s<<30|s>>>2),s=u,u=i}this.chain_[0]=this.chain_[0]+u&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e}}();function F(e,t){var n=new j(e,t);return n.subscribe.bind(n)}var j=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==h(e)||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function V(){}function q(e){return e&&e._delegate?e._delegate:e}var B=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),z="[DEFAULT]",W=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new b;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:z})}catch(e){}try{for(var r=c(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var a=l(i.value,2),o=a[0],u=a[1],s=this.normalizeInstanceIdentifier(o);try{var f=this.getOrInitializeService({instanceIdentifier:s});u.resolve(f)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=z),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return u(this,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(f(f([],l(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),l(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=z),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=z),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var r=e.options,i=void 0===r?{}:r,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:a,options:i});try{for(var u=c(this.instancesDeferred.entries()),s=u.next();!s.done;s=u.next()){var f=l(s.value,2),h=f[0],d=f[1];a===this.normalizeInstanceIdentifier(h)&&d.resolve(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var a=c(i),o=a.next();!o.done;o=a.next()){var u=o.value;try{u(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===z?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(e){}return a||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=z),this.component?this.component.multipleInstances?e:z:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var H,K=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new W(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();function G(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],o=0,u=a.length;o<u;o++,i++)r[i]=a[o];return r}var Q,$=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Q||(Q={}));var J,Y,X={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},Z=Q.INFO,ee=((H={})[Q.DEBUG]="log",H[Q.VERBOSE]="log",H[Q.INFO]="info",H[Q.WARN]="warn",H[Q.ERROR]="error",H),te=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),a=ee[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,G(["["+i+"]  "+e.name+":"],n))}},ne=function(){function e(e){this.name=e,this._logLevel=Z,this._logHandler=te,this._userLogHandler=null,$.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in Q))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?X[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,G([this,Q.DEBUG],e)),this._logHandler.apply(this,G([this,Q.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,G([this,Q.VERBOSE],e)),this._logHandler.apply(this,G([this,Q.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,G([this,Q.INFO],e)),this._logHandler.apply(this,G([this,Q.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,G([this,Q.WARN],e)),this._logHandler.apply(this,G([this,Q.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,G([this,Q.ERROR],e)),this._logHandler.apply(this,G([this,Q.ERROR],e))},e}();function re(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function ie(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){re(a,r,i,o,u,"next",e)}function u(e){re(a,r,i,o,u,"throw",e)}o(void 0)}))}}function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function oe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}var he=function(){function e(t){ce(this,e),this.container=t}return fe(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var de="@firebase/app",pe=new ne("@firebase/app"),ve="[DEFAULT]",me=(se(J={},de,"fire-core"),se(J,"@firebase/app-compat","fire-core-compat"),se(J,"@firebase/analytics","fire-analytics"),se(J,"@firebase/analytics-compat","fire-analytics-compat"),se(J,"@firebase/app-check","fire-app-check"),se(J,"@firebase/app-check-compat","fire-app-check-compat"),se(J,"@firebase/auth","fire-auth"),se(J,"@firebase/auth-compat","fire-auth-compat"),se(J,"@firebase/database","fire-rtdb"),se(J,"@firebase/database-compat","fire-rtdb-compat"),se(J,"@firebase/functions","fire-fn"),se(J,"@firebase/functions-compat","fire-fn-compat"),se(J,"@firebase/installations","fire-iid"),se(J,"@firebase/installations-compat","fire-iid-compat"),se(J,"@firebase/messaging","fire-fcm"),se(J,"@firebase/messaging-compat","fire-fcm-compat"),se(J,"@firebase/performance","fire-perf"),se(J,"@firebase/performance-compat","fire-perf-compat"),se(J,"@firebase/remote-config","fire-rc"),se(J,"@firebase/remote-config-compat","fire-rc-compat"),se(J,"@firebase/storage","fire-gcs"),se(J,"@firebase/storage-compat","fire-gcs-compat"),se(J,"@firebase/firestore","fire-fst"),se(J,"@firebase/firestore-compat","fire-fst-compat"),se(J,"fire-js","fire-js"),se(J,"firebase","fire-js-all"),J),ye=new Map,ge=new Map;function be(e,t){try{e.container.addComponent(t)}catch(n){pe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function we(e,t){e.container.addOrOverwriteComponent(t)}function ke(e){var t=e.name;if(ge.has(t))return pe.debug("There were multiple attempts to register component ".concat(t,".")),!1;ge.set(t,e);var n,r=oe(ye.values());try{for(r.s();!(n=r.n()).done;){be(n.value,e)}}catch(e){r.e(e)}finally{r.f()}return!0}function _e(e,t){return e.container.getProvider(t)}function xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ve;_e(e,t).clearInstance(n)}function Ee(){ge.clear()}var Se,Ie,Te=(se(Y={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),se(Y,"bad-app-name","Illegal App name: '{$appName}"),se(Y,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),se(Y,"app-deleted","Firebase App named '{$appName}' already deleted"),se(Y,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),se(Y,"invalid-log-argument","First argument to `onLog` must be null or a function."),Y),Re=new N("app","Firebase",Te),Ne=function(){function e(t,n,r){var i=this;ce(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new B("app",(function(){return i}),"PUBLIC"))}return fe(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Re.create("app-deleted",{appName:this._name})}}]),e}(),Ae="9.0.0";function Ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==ae(t)){var n=t;t={name:n}}var r=Object.assign({name:ve,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Re.create("bad-app-name",{appName:String(i)});var a=ye.get(i);if(a){if(P(e,a.options)&&P(r,a.config))return a;throw Re.create("duplicate-app",{appName:i})}var o,u=new K(i),s=oe(ge.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(e){s.e(e)}finally{s.f()}var l=new Ne(e,r,u);return ye.set(i,l),l}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=ye.get(e);if(!t)throw Re.create("no-app",{appName:e});return t}function Pe(){return Array.from(ye.values())}function De(e){return Le.apply(this,arguments)}function Le(){return(Le=ie(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!ye.has(n)){e.next=6;break}return ye.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e,t,n){var r,i=null!==(r=me[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void pe.warn(u.join(" "))}ke(new B("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ue(e,t){if(null!==e&&"function"!=typeof e)throw Re.create("invalid-log-argument");!function(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=X[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=i.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Q[n].toLowerCase(),message:o,args:i,type:t.name})}},r=0,i=$;r<i.length;r++)n(i[r])}(e,t)}function Fe(e){var t;t=e,$.forEach((function(e){e.setLogLevel(t)}))}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ke(new B("platform-logger",(function(e){return new he(e)}),"PRIVATE")),Me(de,"0.7.0",Se),Me("fire-js","");var qe=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._delegate=t,this.firebase=n,be(t,new B("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}var t,n,r;return t=e,n=[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),De(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){be(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){we(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}],n&&Ve(t.prototype,n),r&&Ve(t,r),e}(),Be=(je(Ie={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),je(Ie,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ie),ze=new N("app-compat","Firebase",Be);var We=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ce(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(O(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Me,setLogLevel:Fe,onLog:Ue,apps:null,SDK_VERSION:Ae,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(ke(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[a])throw ze.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&y(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!O(n,e=e||ve))throw ze.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(qe);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){y(n,e)},createSubscribe:F,ErrorFactory:N,deepExtend:y}),n}(),He=new ne("@firebase/app-compat");if("object"===("undefined"==typeof self?"undefined":h(self))&&self.self===self&&void 0!==self.firebase){He.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ke=self.firebase.SDK_VERSION;Ke&&Ke.indexOf("LITE")>=0&&He.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ge=We;!function(e){Me("@firebase/app-compat","0.1.1",e)}();const Qe=Ge;function $e(e){return $e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(e)}Qe.registerVersion("firebase","9.0.2","app-compat");var Je=function(e,t){return Je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Je(e,t)};function Ye(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var Xe,Ze="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},et=et||{},tt=Ze||self;function nt(){}function rt(e){var t=$e(e);return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function it(e){var t=$e(e);return"object"==t&&null!=e||"function"==t}var at="closure_uid_"+(1e9*Math.random()>>>0),ot=0;function ut(e,t,n){return e.call.apply(e.bind,arguments)}function st(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ct(e,t,n){return(ct=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ut:st).apply(null,arguments)}function lt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ft(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function ht(){this.s=this.s,this.o=this.o}var dt={};ht.prototype.s=!1,ht.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,at)&&e[at]||(e[at]=++ot)}(this);delete dt[e]}},ht.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var pt=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},vt=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function mt(e){return Array.prototype.concat.apply([],arguments)}function yt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function gt(e){return/^[\s\xa0]*$/.test(e)}var bt,wt=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function kt(e,t){return-1!=e.indexOf(t)}function _t(e,t){return e<t?-1:e>t?1:0}e:{var xt=tt.navigator;if(xt){var Et=xt.userAgent;if(Et){bt=Et;break e}}bt=""}function St(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function It(e){var t={};for(var n in e)t[n]=e[n];return t}var Tt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rt(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Tt.length;a++)n=Tt[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Nt(e){return Nt[" "](e),e}Nt[" "]=nt;var At,Ct,Ot=kt(bt,"Opera"),Pt=kt(bt,"Trident")||kt(bt,"MSIE"),Dt=kt(bt,"Edge"),Lt=Dt||Pt,Mt=kt(bt,"Gecko")&&!(kt(bt.toLowerCase(),"webkit")&&!kt(bt,"Edge"))&&!(kt(bt,"Trident")||kt(bt,"MSIE"))&&!kt(bt,"Edge"),Ut=kt(bt.toLowerCase(),"webkit")&&!kt(bt,"Edge");function Ft(){var e=tt.document;return e?e.documentMode:void 0}e:{var jt="",Vt=(Ct=bt,Mt?/rv:([^\);]+)(\)|;)/.exec(Ct):Dt?/Edge\/([\d\.]+)/.exec(Ct):Pt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ct):Ut?/WebKit\/(\S+)/.exec(Ct):Ot?/(?:Version)[ \/]?(\S+)/.exec(Ct):void 0);if(Vt&&(jt=Vt?Vt[1]:""),Pt){var qt=Ft();if(null!=qt&&qt>parseFloat(jt)){At=String(qt);break e}}At=jt}var Bt,zt={};function Wt(){return function(e){var t=zt;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=wt(String(At)).split("."),n=wt("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=_t(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||_t(0==a[2].length,0==o[2].length)||_t(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(tt.document&&Pt){var Ht=Ft();Bt=Ht||(parseInt(At,10)||void 0)}else Bt=void 0;var Kt=Bt,Gt=function(){if(!tt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{tt.addEventListener("test",nt,t),tt.removeEventListener("test",nt,t)}catch(e){}return e}();function Qt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function $t(e,t){if(Qt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Mt){e:{try{Nt(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Jt[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&$t.Z.h.call(this)}}Qt.prototype.h=function(){this.defaultPrevented=!0},ft($t,Qt);var Jt={2:"touch",3:"pen",4:"mouse"};$t.prototype.h=function(){$t.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),Xt=0;function Zt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Xt,this.ca=this.fa=!1}function en(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function tn(e){this.src=e,this.g={},this.h=0}function nn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=pt(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(en(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function rn(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}tn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=rn(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Zt(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var an="closure_lm_"+(1e6*Math.random()|0),on={};function un(e,t,n,r,i){if(r&&r.once)return cn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)un(e,t[a],n,r,i);return null}return n=mn(n),e&&e[Yt]?e.N(t,n,it(r)?!!r.capture:!!r,i):sn(e,t,n,!1,r,i)}function sn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=it(i)?!!i.capture:!!i,u=pn(e);if(u||(e[an]=u=new tn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=dn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Gt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(hn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function cn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)cn(e,t[a],n,r,i);return null}return n=mn(n),e&&e[Yt]?e.O(t,n,it(r)?!!r.capture:!!r,i):sn(e,t,n,!0,r,i)}function ln(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ln(e,t[a],n,r,i);else r=it(r)?!!r.capture:!!r,n=mn(n),e&&e[Yt]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=rn(a=e.g[t],n,r,i))&&(en(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=pn(e))&&(t=e.g[t.toString()],e=-1,t&&(e=rn(t,n,r,i)),(n=-1<e?t[e]:null)&&fn(n))}function fn(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Yt])nn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(hn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=pn(t))?(nn(n,e),0==n.h&&(n.src=null,t[an]=null)):en(e)}}}function hn(e){return e in on?on[e]:on[e]="on"+e}function dn(e,t){if(e.ca)e=!0;else{t=new $t(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&fn(e),e=n.call(r,t)}return e}function pn(e){return(e=e[an])instanceof tn?e:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(e){return"function"==typeof e?e:(e[vn]||(e[vn]=function(t){return e.handleEvent(t)}),e[vn])}function yn(){ht.call(this),this.i=new tn(this),this.P=this,this.I=null}function gn(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Qt(t,e);else if(t instanceof Qt)t.target=t.target||e;else{var i=t;Rt(t=new Qt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=bn(o,r,!0,t)&&i}if(i=bn(o=t.g=e,r,!0,t)&&i,i=bn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=bn(o=t.g=n[a],r,!1,t)&&i}function bn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&nn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ft(yn,ht),yn.prototype[Yt]=!0,yn.prototype.removeEventListener=function(e,t,n,r){ln(this,e,t,n,r)},yn.prototype.M=function(){if(yn.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)en(n[r]);delete t.g[e],t.h--}}this.I=null},yn.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},yn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var wn=tt.JSON.stringify;function kn(){var e=Nn,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var _n,xn=function(){function e(){this.h=this.g=null}return e.prototype.add=function(e,t){var n=En.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n},e}(),En=new(function(){function e(e,t){this.i=e,this.j=t,this.h=0,this.g=null}return e.prototype.get=function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e},e}())((function(){return new Sn}),(function(e){return e.reset()})),Sn=function(){function e(){this.next=this.g=this.h=null}return e.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},e.prototype.reset=function(){this.next=this.g=this.h=null},e}();function In(e){tt.setTimeout((function(){throw e}),0)}function Tn(e,t){_n||function(){var e=tt.Promise.resolve(void 0);_n=function(){e.then(An)}}(),Rn||(_n(),Rn=!0),Nn.add(e,t)}var Rn=!1,Nn=new xn;function An(){for(var e;e=kn();){try{e.h.call(e.g)}catch(e){In(e)}var t=En;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Rn=!1}function Cn(e,t){yn.call(this),this.h=e||1,this.g=t||tt,this.j=ct(this.kb,this),this.l=Date.now()}function On(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Pn(e,t,n){if("function"==typeof e)n&&(e=ct(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ct(e.handleEvent,e)}return 2147483647<Number(t)?-1:tt.setTimeout(e,t||0)}function Dn(e){e.g=Pn((function(){e.g=null,e.i&&(e.i=!1,Dn(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ft(Cn,yn),(Xe=Cn.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gn(this,"tick"),this.da&&(On(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){Cn.Z.M.call(this),On(this),delete this.g};var Ln=function(e){function t(t,n){var r=e.call(this)||this;return r.m=t,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Je(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:Dn(this)},t.prototype.M=function(){e.prototype.M.call(this),this.g&&(tt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},t}(ht);function Mn(e){ht.call(this),this.h=e,this.g={}}ft(Mn,ht);var Un=[];function Fn(e,t,n,r){Array.isArray(n)||(n&&(Un[0]=n.toString()),n=Un);for(var i=0;i<n.length;i++){var a=un(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function jn(e){St(e.g,(function(e,t){this.g.hasOwnProperty(t)&&fn(e)}),e),e.g={}}function Vn(){this.g=!0}function qn(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return wn(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Mn.prototype.M=function(){Mn.Z.M.call(this),jn(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vn.prototype.Aa=function(){this.g=!1},Vn.prototype.info=function(){};var Bn={},zn=null;function Wn(){return zn=zn||new yn}function Hn(e){Qt.call(this,Bn.Ma,e)}function Kn(e){var t=Wn();gn(t,new Hn(t,e))}function Gn(e,t){Qt.call(this,Bn.STAT_EVENT,e),this.stat=t}function Qn(e){var t=Wn();gn(t,new Gn(t,e))}function $n(e,t){Qt.call(this,Bn.Na,e),this.size=t}function Jn(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return tt.setTimeout((function(){e()}),t)}Bn.Ma="serverreachability",ft(Hn,Qt),Bn.STAT_EVENT="statevent",ft(Gn,Qt),Bn.Na="timingevent",ft($n,Qt);var Yn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Xn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Zn(){}function er(e){return e.h||(e.h=e.i())}function tr(){}Zn.prototype.h=null;var nr,rr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ir(){Qt.call(this,"d")}function ar(){Qt.call(this,"c")}function or(){}function ur(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Mn(this),this.P=cr,e=Lt?125:void 0,this.W=new Cn(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new sr}function sr(){this.i=null,this.g="",this.h=!1}ft(ir,Qt),ft(ar,Qt),ft(or,Zn),or.prototype.g=function(){return new XMLHttpRequest},or.prototype.i=function(){return{}},nr=new or;var cr=45e3,lr={},fr={};function hr(e,t,n){e.K=1,e.v=Lr(Nr(t)),e.s=n,e.U=!0,dr(e,null)}function dr(e,t){e.F=Date.now(),yr(e),e.A=Nr(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Qr(n.h,"t",r),e.C=0,n=e.l.H,e.h=new sr,e.g=$i(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ln(ct(e.Ia,e,e.g),e.O)),Fn(e.V,e.g,"readystatechange",e.gb),t=e.H?It(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Kn(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function pr(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function vr(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=mr(e,n))==fr){4==t&&(e.o=4,Qn(14),i=!1),qn(e.j,e.m,null,"[Incomplete Response]");break}if(r==lr){e.o=4,Qn(15),qn(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}qn(e.j,e.m,r,null),_r(e,r)}pr(e)&&r!=fr&&r!=lr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Qn(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),qi(t),t.L=!0,Qn(11))):(qn(e.j,e.m,n,"[Invalid Chunked Response]"),kr(e),wr(e))}function mr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?fr:(n=Number(t.substring(n,r)),isNaN(n)?lr:(r+=1)+n>t.length?fr:(t=t.substr(r,n),e.C=r+n,t))}function yr(e){e.Y=Date.now()+e.P,gr(e,e.P)}function gr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Jn(ct(e.eb,e),t)}function br(e){e.B&&(tt.clearTimeout(e.B),e.B=null)}function wr(e){0==e.l.G||e.I||Wi(e.l,e)}function kr(e){br(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,On(e.W),jn(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function _r(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||ti(n.i,e)))if(n.I=e.N,!e.J&&ti(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;zi(n),Oi(n)}Vi(n),Qn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Jn(ct(n.ab,n),6e3));if(1>=ei(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Ki(n,11)}else if((e.J||n.g==e)&&zi(n),!gt(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"==typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(kt(l,"spdy")||kt(l,"quic")||kt(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(ni(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Dr(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Qi(r,r.H?r.la:null,r.W),d.J){ri(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(br(p),yr(p)),r.g=d}else ji(r);0<n.l.length&&Li(n)}else"stop"!=a[0]&&"close"!=a[0]||Ki(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ki(n,7):Ci(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Kn(4)}catch(a){}}function xr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(rt(e)||"string"==typeof e)vt(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(rt(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(rt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Er(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Er)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Sr(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ir(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ir(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ir(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Xe=ur.prototype).setTimeout=function(e){this.P=e},Xe.gb=function(e){e=e.target;var t=this.L;t&&3==Ii(e)?t.l():this.Ia(e)},Xe.Ia=function(e){try{if(e==this.g)e:{var t=Ii(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Lt||this.g&&(this.h.h||this.g.ga()||Ti(this.g)))){this.I||4!=t||7==n||Kn(8==n||0>=r?3:2),br(this);var i=this.g.ba();this.N=i;t:if(pr(this)){var a=Ti(this.g);e="";var o=a.length,u=4==Ii(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){kr(this),wr(this);var s="";break t}this.h.i=new tt.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gt(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,Qn(12),kr(this),wr(this);break e}qn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,_r(this,i)}this.U?(vr(this,t,s),Lt&&this.i&&3==t&&(Fn(this.V,this.W,"tick",this.fb),this.W.start())):(qn(this.j,this.m,s,null),_r(this,s)),4==t&&kr(this),this.i&&!this.I&&(4==t?Wi(this.l,this):(this.i=!1,yr(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Qn(12)):(this.o=0,Qn(13)),kr(this),wr(this)}}}catch(t){}},Xe.fb=function(){if(this.g){var e=Ii(this.g),t=this.g.ga();this.C<t.length&&(br(this),vr(this,e,t),this.i&&4!=e&&yr(this))}},Xe.cancel=function(){this.I=!0,kr(this)},Xe.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Kn(3),Qn(17)),kr(this),this.o=2,wr(this)):gr(this,this.Y-e)},(Xe=Er.prototype).R=function(){Sr(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Xe.T=function(){return Sr(this),this.g.concat()},Xe.get=function(e,t){return Ir(this.h,e)?this.h[e]:t},Xe.set=function(e,t){Ir(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Xe.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Tr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rr(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Rr){this.g=void 0!==t?t:e.g,Ar(this,e.j),this.s=e.s,Cr(this,e.i),Or(this,e.m),this.l=e.l,t=e.h;var n=new Wr;n.i=t.i,t.g&&(n.g=new Er(t.g),n.h=t.h),Pr(this,n),this.o=e.o}else e&&(n=String(e).match(Tr))?(this.g=!!t,Ar(this,n[1]||"",!0),this.s=Mr(n[2]||""),Cr(this,n[3]||"",!0),Or(this,n[4]),this.l=Mr(n[5]||"",!0),Pr(this,n[6]||"",!0),this.o=Mr(n[7]||"")):(this.g=!!t,this.h=new Wr(null,this.g))}function Nr(e){return new Rr(e)}function Ar(e,t,n){e.j=n?Mr(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Cr(e,t,n){e.i=n?Mr(t,!0):t}function Or(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Pr(e,t,n){t instanceof Wr?(e.h=t,function(e,t){t&&!e.j&&(Hr(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Kr(this,t),Qr(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ur(t,Br)),e.h=new Wr(t,e.g))}function Dr(e,t,n){e.h.set(t,n)}function Lr(e){return Dr(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Mr(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ur(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Fr),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fr(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Rr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ur(t,jr,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ur(t,jr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ur(n,"/"==n.charAt(0)?qr:Vr,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ur(n,zr)),e.join("")};var jr=/[#\/\?@]/g,Vr=/[#\?:]/g,qr=/[#\?]/g,Br=/[#\?@]/g,zr=/#/g;function Wr(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Hr(e){e.g||(e.g=new Er,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Kr(e,t){Hr(e),t=$r(e,t),Ir(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ir((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Sr(e)))}function Gr(e,t){return Hr(e),t=$r(e,t),Ir(e.g.h,t)}function Qr(e,t,n){Kr(e,t),0<n.length&&(e.i=null,e.g.set($r(e,t),yt(n)),e.h+=n.length)}function $r(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Xe=Wr.prototype).add=function(e,t){Hr(this),this.i=null,e=$r(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Xe.forEach=function(e,t){Hr(this),this.g.forEach((function(n,r){vt(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Xe.T=function(){Hr(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Xe.R=function(e){Hr(this);var t=[];if("string"==typeof e)Gr(this,e)&&(t=mt(t,this.g.get($r(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=mt(t,e[n])}return t},Xe.set=function(e,t){return Hr(this),this.i=null,Gr(this,e=$r(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Xe.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Jr=function(e,t){this.h=e,this.g=t};function Yr(e){this.l=e||Xr,tt.PerformanceNavigationTiming?e=0<(e=tt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(tt.g&&tt.g.Ea&&tt.g.Ea()&&tt.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xr=10;function Zr(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ei(e){return e.h?1:e.g?e.g.size:0}function ti(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ni(e,t){e.g?e.g.add(t):e.h=t}function ri(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ii(e){var t,n;if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var r=e.i;try{for(var i=Ye(e.g.values()),a=i.next();!a.done;a=i.next()){var o=a.value;r=r.concat(o.D)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return yt(e.i)}function ai(){}function oi(){this.g=new ai}function ui(e,t,n){var r=n||"";try{xr(e,(function(e,n){var i=e;it(e)&&(i=wn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function si(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function ci(e){this.l=e.$b||null,this.j=e.ib||!1}function li(e,t){yn.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=fi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yr.prototype.cancel=function(){var e,t;if(this.i=ii(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Ye(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},ai.prototype.stringify=function(e){return tt.JSON.stringify(e,void 0)},ai.prototype.parse=function(e){return tt.JSON.parse(e,void 0)},ft(ci,Zn),ci.prototype.g=function(){return new li(this.l,this.j)},ci.prototype.i=function(e){return function(){return e}}({}),ft(li,yn);var fi=0;function hi(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function di(e){e.readyState=4,e.l=null,e.j=null,e.A=null,pi(e)}function pi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Xe=li.prototype).open=function(e,t){if(this.readyState!=fi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,pi(this)},Xe.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||tt).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,di(this)),this.readyState=fi},Xe.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,pi(this)),this.g&&(this.readyState=3,pi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==tt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hi(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?di(this):pi(this),3==this.readyState&&hi(this)}},Xe.Ua=function(e){this.g&&(this.response=this.responseText=e,di(this))},Xe.Ta=function(e){this.g&&(this.response=e,di(this))},Xe.ha=function(){this.g&&di(this)},Xe.setRequestHeader=function(e,t){this.v.append(e,t)},Xe.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(li.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var vi=tt.JSON.parse;function mi(e){yn.call(this),this.headers=new Er,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=yi,this.K=this.L=!1}ft(mi,yn);var yi="",gi=/^https?$/i,bi=["POST","PUT"];function wi(e){return"content-type"==e.toLowerCase()}function ki(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_i(e),Ei(e)}function _i(e){e.D||(e.D=!0,gn(e,"complete"),gn(e,"error"))}function xi(e){if(e.h&&void 0!==et&&(!e.C[1]||4!=Ii(e)||2!=e.ba()))if(e.v&&4==Ii(e))Pn(e.Fa,0,e);else if(gn(e,"readystatechange"),4==Ii(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Tr)[1]||null;if(!a&&tt.self&&tt.self.location){var o=tt.self.location.protocol;a=o.substr(0,o.length-1)}i=!gi.test(a?a.toLowerCase():"")}t=i}if(t)gn(e,"complete"),gn(e,"success");else{e.m=6;try{var u=2<Ii(e)?e.g.statusText:""}catch(e){u=""}e.j=u+" ["+e.ba()+"]",_i(e)}}finally{Ei(e)}}}function Ei(e,t){if(e.g){Si(e);var n=e.g,r=e.C[0]?nt:null;e.g=null,e.C=null,t||gn(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function Si(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(tt.clearTimeout(e.A),e.A=null)}function Ii(e){return e.g?e.g.readyState:0}function Ti(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case yi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ri(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return St(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Dr(e,t,n))}function Ni(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ai(e){this.za=0,this.l=[],this.h=new Vn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ni("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ni("baseRetryDelayMs",5e3,e),this.$a=Ni("retryDelaySeedMs",1e4,e),this.Ya=Ni("forwardChannelMaxRetries",2,e),this.ra=Ni("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Yr(e&&e.concurrentRequestLimit),this.Ca=new oi,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Ci(e){if(Pi(e),3==e.G){var t=e.V++,n=Nr(e.F);Dr(n,"SID",e.J),Dr(n,"RID",t),Dr(n,"TYPE","terminate"),Ui(e,n),(t=new ur(e,e.h,t,void 0)).K=2,t.v=Lr(Nr(n)),n=!1,tt.navigator&&tt.navigator.sendBeacon&&(n=tt.navigator.sendBeacon(t.v.toString(),"")),!n&&tt.Image&&((new Image).src=t.v,n=!0),n||(t.g=$i(t.l,null),t.g.ea(t.v)),t.F=Date.now(),yr(t)}Gi(e)}function Oi(e){e.g&&(qi(e),e.g.cancel(),e.g=null)}function Pi(e){Oi(e),e.u&&(tt.clearTimeout(e.u),e.u=null),zi(e),e.i.cancel(),e.m&&("number"==typeof e.m&&tt.clearTimeout(e.m),e.m=null)}function Di(e,t){e.l.push(new Jr(e.Za++,t)),3==e.G&&Li(e)}function Li(e){Zr(e.i)||e.m||(e.m=!0,Tn(e.Ha,e),e.C=0)}function Mi(e,t){var n;n=t?t.m:e.V++;var r=Nr(e.F);Dr(r,"SID",e.J),Dr(r,"RID",n),Dr(r,"AID",e.U),Ui(e,r),e.o&&e.s&&Ri(r,e.o,e.s),n=new ur(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Fi(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),ni(e.i,n),hr(n,r,t)}function Ui(e,t){e.j&&xr({},(function(e,n){Dr(t,n,e)}))}function Fi(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ct(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ui(l,o,"req"+c+"_")}catch(e){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ji(e){e.g||e.u||(e.Y=1,Tn(e.Ga,e),e.A=0)}function Vi(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Jn(ct(e.Ga,e),Hi(e,e.A)),e.A++,!0)}function qi(e){null!=e.B&&(tt.clearTimeout(e.B),e.B=null)}function Bi(e){e.g=new ur(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Nr(e.oa);Dr(t,"RID","rpc"),Dr(t,"SID",e.J),Dr(t,"CI",e.N?"0":"1"),Dr(t,"AID",e.U),Ui(e,t),Dr(t,"TYPE","xmlhttp"),e.o&&e.s&&Ri(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Lr(Nr(t)),n.s=null,n.U=!0,dr(n,e)}function zi(e){null!=e.v&&(tt.clearTimeout(e.v),e.v=null)}function Wi(e,t){var n=null;if(e.g==t){zi(e),qi(e),e.g=null;var r=2}else{if(!ti(e.i,t))return;n=t.D,ri(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;gn(r=Wn(),new $n(r,n,t,i)),Li(e)}else ji(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ei(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Jn(ct(e.Ha,e,t),Hi(e,e.C)),e.C++,0)))}(e,t)||2==r&&Vi(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ki(e,5);break;case 4:Ki(e,10);break;case 3:Ki(e,6);break;default:Ki(e,2)}}function Hi(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ki(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ct(e.jb,e);n||(n=new Rr("//www.google.com/images/cleardot.gif"),tt.location&&"http"==tt.location.protocol||Ar(n,"https"),Lr(n)),function(e,t){var n=new Vn;if(tt.Image){var r=new Image;r.onload=lt(si,n,r,"TestLoadImage: loaded",!0,t),r.onerror=lt(si,n,r,"TestLoadImage: error",!1,t),r.onabort=lt(si,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=lt(si,n,r,"TestLoadImage: timeout",!1,t),tt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Qn(2);e.G=0,e.j&&e.j.va(t),Gi(e),Pi(e)}function Gi(e){e.G=0,e.I=-1,e.j&&(0==ii(e.i).length&&0==e.l.length||(e.i.i.length=0,yt(e.l),e.l.length=0),e.j.ua())}function Qi(e,t,n){var r=function(e){return e instanceof Rr?Nr(e):new Rr(e,void 0)}(n);if(""!=r.i)t&&Cr(r,t+"."+r.i),Or(r,r.m);else{var i=tt.location;r=function(e,t,n,r){var i=new Rr(null,void 0);return e&&Ar(i,e),t&&Cr(i,t),n&&Or(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&St(e.aa,(function(e,t){Dr(r,t,e)})),t=e.D,n=e.sa,t&&n&&Dr(r,t,n),Dr(r,"VER",e.ma),Ui(e,r),r}function $i(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new mi(new ci({ib:!0})):new mi(e.qa)).L=e.H,t}function Ji(){}function Yi(){if(Pt&&!(10<=Number(Kt)))throw Error("Environmental error: no available transport.")}function Xi(e,t){yn.call(this),this.g=new Ai(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!gt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!gt(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ta(this)}function Zi(e){ir.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ea(){ar.call(this),this.status=1}function ta(e){this.g=e}(Xe=mi.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():nr.g(),this.C=this.u?er(this.u):er(nr),this.g.onreadystatechange=ct(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void ki(this,e)}e=n||"";var i=new Er(this.headers);r&&xr(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=wi,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=tt.FormData&&e instanceof tt.FormData,!(0<=pt(bi,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Si(this),0<this.B&&((this.K=function(e){return Pt&&Wt()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ct(this.pa,this)):this.A=Pn(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){ki(this,e)}},Xe.pa=function(){void 0!==et&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gn(this,"timeout"),this.abort(8))},Xe.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,gn(this,"complete"),gn(this,"abort"),Ei(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ei(this,!0)),mi.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?xi(this):this.cb())},Xe.cb=function(){xi(this)},Xe.ba=function(){try{return 2<Ii(this)?this.g.status:-1}catch(e){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},Xe.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),vi(t)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=Ai.prototype).ma=8,Xe.G=1,Xe.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},Xe.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new ur(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Rt(n=It(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Fi(this,t,r),Dr(i=Nr(this.F),"RID",e),Dr(i,"CVER",22),this.D&&Dr(i,"X-HTTP-Session-Id",this.D),Ui(this,i),this.o&&n&&Ri(i,this.o,n),ni(this.i,t),this.Ra&&Dr(i,"TYPE","init"),this.ja?(Dr(i,"$req",r),Dr(i,"SID","null"),t.$=!0,hr(t,i,null)):hr(t,i,r),this.G=2}}else 3==this.G&&(e?Mi(this,e):0==this.l.length||Zr(this.i)||Mi(this))},Xe.Ga=function(){if(this.u=null,Bi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Jn(ct(this.bb,this),e)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qn(10),Oi(this),Bi(this))},Xe.ab=function(){null!=this.v&&(this.v=null,Oi(this),Vi(this),Qn(19))},Xe.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Qn(2)):(this.h.info("Failed to ping google.com"),Qn(1))},(Xe=Ji.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},Yi.prototype.g=function(e,t){return new Xi(e,t)},ft(Xi,yn),Xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Tn(ct(e.hb,e,t))),Qn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Qi(e,null,e.W),Li(e)},Xi.prototype.close=function(){Ci(this.g)},Xi.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Di(this.g,t)}else this.v?((t={}).__data__=wn(e),Di(this.g,t)):Di(this.g,e)},Xi.prototype.M=function(){this.g.j=null,delete this.j,Ci(this.g),delete this.g,Xi.Z.M.call(this)},ft(Zi,ir),ft(ea,ar),ft(ta,Ji),ta.prototype.xa=function(){gn(this.g,"a")},ta.prototype.wa=function(e){gn(this.g,new Zi(e))},ta.prototype.va=function(e){gn(this.g,new ea(e))},ta.prototype.ua=function(){gn(this.g,"b")},Yi.prototype.createWebChannel=Yi.prototype.g,Xi.prototype.send=Xi.prototype.u,Xi.prototype.open=Xi.prototype.m,Xi.prototype.close=Xi.prototype.close,Yn.NO_ERROR=0,Yn.TIMEOUT=8,Yn.HTTP_ERROR=6,Xn.COMPLETE="complete",tr.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",yn.prototype.listen=yn.prototype.N,mi.prototype.listenOnce=mi.prototype.O,mi.prototype.getLastError=mi.prototype.La,mi.prototype.getLastErrorCode=mi.prototype.Da,mi.prototype.getStatus=mi.prototype.ba,mi.prototype.getResponseJson=mi.prototype.Qa,mi.prototype.getResponseText=mi.prototype.ga,mi.prototype.send=mi.prototype.ea;var na=function(){return new Yi},ra=function(){return Wn()},ia=Yn,aa=Xn,oa=Bn,ua={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},sa=ci,ca=tr,la=mi;function fa(e,t,n){return fa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ea(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},fa(e,t,n||e)}function ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||Ia(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e){return da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},da(e)}function pa(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ia(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function va(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function ma(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){va(a,r,i,o,u,"next",e)}function u(e){va(a,r,i,o,u,"throw",e)}o(void 0)}))}}function ya(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}function ga(e){var t=_a();return function(){var n,r=Ea(e);if(t){var i=Ea(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ba(this,n)}}function ba(e,t){if(t&&("object"===da(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function wa(e){var t="function"==typeof Map?new Map:void 0;return wa=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ka(e,arguments,Ea(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),xa(n,e)},wa(e)}function ka(e,t,n){return ka=_a()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&xa(i,n.prototype),i},ka.apply(null,arguments)}function _a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function xa(e,t){return xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xa(e,t)}function Ea(e){return Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ea(e)}function Sa(e){return function(e){if(Array.isArray(e))return Ta(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ia(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ia(e,t){if(e){if("string"==typeof e)return Ta(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ta(e,t):void 0}}function Ta(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Aa(e,t,n){return t&&Na(e.prototype,t),n&&Na(e,n),e}var Ca=function(){function e(t){Ra(this,e),this.uid=t}return Aa(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ca.UNAUTHENTICATED=new Ca(null),Ca.GOOGLE_CREDENTIALS=new Ca("google-credentials-uid"),Ca.FIRST_PARTY=new Ca("first-party-uid"),Ca.MOCK_USER=new Ca("mock-user");var Oa="9.0.2",Pa=new ne("@firebase/firestore");function Da(){return Pa.logLevel}function La(e){if(Pa.logLevel<=Q.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Fa);Pa.debug.apply(Pa,["Firestore (".concat(Oa,"): ").concat(e)].concat(Sa(i)))}}function Ma(e){if(Pa.logLevel<=Q.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Fa);Pa.error.apply(Pa,["Firestore (".concat(Oa,"): ").concat(e)].concat(Sa(i)))}}function Ua(e){if(Pa.logLevel<=Q.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Fa);Pa.warn.apply(Pa,["Firestore (".concat(Oa,"): ").concat(e)].concat(Sa(i)))}}function Fa(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Oa,") INTERNAL ASSERTION FAILED: ")+e;throw Ma(t),new Error(t)}function Va(e,t){e||ja()}function qa(e,t){return e}var Ba={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},za=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return n}(wa(Error)),Wa=function e(){var t=this;Ra(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Ha=function e(t,n){Ra(this,e),this.user=n,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer ".concat(t)},Ka=function(){function e(){Ra(this,e)}return Aa(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ca.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ga=function(){function e(t){Ra(this,e),this.token=t,this.changeListener=null}return Aa(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Qa=function(){function e(t){Ra(this,e),this.t=t,this.currentUser=Ca.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Aa(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Wa;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Wa,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){La("FirebaseCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(La("FirebaseCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Wa)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(La("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Va("string"==typeof n.accessToken),new Ha(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Va(null===e||"string"==typeof e),new Ca(e)}}]),e}(),$a=function(){function e(t,n,r){Ra(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Ca.FIRST_PARTY}return Aa(e,[{key:"authHeaders",get:function(){var e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}]),e}(),Ja=function(){function e(t,n,r){Ra(this,e),this.h=t,this.l=n,this.m=r}return Aa(e,[{key:"getToken",value:function(){return Promise.resolve(new $a(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ca.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ya=function(){function e(t,n){var r=this;Ra(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.g(e)},this.p=function(e){return n.writeSequenceNumber(e)})}return Aa(e,[{key:"g",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.p&&this.p(e),e}}]),e}();function Xa(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Ya.T=-1;var Za=function(){function e(){Ra(this,e)}return Aa(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Xa(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function eo(e,t){return e<t?-1:e>t?1:0}function to(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function no(e){return e+"\0"}var ro=function(){function e(t,n){if(Ra(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new za(Ba.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new za(Ba.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new za(Ba.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new za(Ba.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Aa(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?eo(this.nanoseconds,e.nanoseconds):eo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),io=function(){function e(t){Ra(this,e),this.timestamp=t}return Aa(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new ro(0,0))}}]),e}();function ao(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oo(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uo(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var so=function(){function e(t,n,r){Ra(this,e),void 0===n?n=0:n>t.length&&ja(),void 0===r?r=t.length-n:r>t.length-n&&ja(),this.segments=t,this.offset=n,this.len=r}return Aa(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),co=function(e){ya(n,e);var t=ga(n);function n(){return Ra(this,n),t.apply(this,arguments)}return Aa(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new za(Ba.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Sa(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(so),lo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fo=function(e){ya(n,e);var t=ga(n);function n(){return Ra(this,n),t.apply(this,arguments)}return Aa(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return lo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new za(Ba.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new za(Ba.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new za(Ba.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new za(Ba.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(so),ho=function(){function e(t){Ra(this,e),this.fields=t,t.sort(fo.comparator)}return Aa(e,[{key:"covers",value:function(e){var t,n=pa(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return to(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var po=function(){function e(t){Ra(this,e),this.binaryString=t}return Aa(e,[{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return eo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t);return new e(n)}}]),e}();po.EMPTY_BYTE_STRING=new po("");var vo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(e){if(Va(!!e),"string"==typeof e){var t=0,n=vo.exec(e);if(Va(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:yo(e.seconds),nanos:yo(e.nanos)}}function yo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function go(e){return"string"==typeof e?po.fromBase64String(e):po.fromUint8Array(e)}function bo(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wo(e){var t=e.mapValue.fields.__previous_value__;return bo(t)?wo(t):t}function ko(e){var t=mo(e.mapValue.fields.__local_write_time__.timestampValue);return new ro(t.seconds,t.nanos)}function _o(e){return null==e}function xo(e){return 0===e&&1/e==-1/0}function Eo(e){return"number"==typeof e&&Number.isInteger(e)&&!xo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var So=function(){function e(t){Ra(this,e),this.path=t}return Aa(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===co.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(co.fromString(t))}},{key:"fromName",value:function(t){return new e(co.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return co.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new co(t.slice()))}}]),e}();function Io(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bo(e)?4:10:ja()}function To(e,t){var n=Io(e);if(n!==Io(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ko(e).isEqual(ko(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=mo(e.timestampValue),r=mo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return go(e.bytesValue).isEqual(go(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return yo(e.geoPointValue.latitude)===yo(t.geoPointValue.latitude)&&yo(e.geoPointValue.longitude)===yo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return yo(e.integerValue)===yo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=yo(e.doubleValue),r=yo(t.doubleValue);return n===r?xo(n)===xo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return to(e.arrayValue.values||[],t.arrayValue.values||[],To);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ao(n)!==ao(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!To(n[i],r[i])))return!1;return!0}(e,t);default:return ja()}}function Ro(e,t){return void 0!==(e.values||[]).find((function(e){return To(e,t)}))}function No(e,t){var n=Io(e),r=Io(t);if(n!==r)return eo(n,r);switch(n){case 0:return 0;case 1:return eo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=yo(e.integerValue||e.doubleValue),r=yo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ao(e.timestampValue,t.timestampValue);case 4:return Ao(ko(e),ko(t));case 5:return eo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=go(e),r=go(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=eo(n[i],r[i]);if(0!==a)return a}return eo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=eo(yo(e.latitude),yo(t.latitude));return 0!==n?n:eo(yo(e.longitude),yo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=No(n[i],r[i]);if(a)return a}return eo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=eo(r[o],a[o]);if(0!==u)return u;var s=No(n[r[o]],i[a[o]]);if(0!==s)return s}return eo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw ja()}}function Ao(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return eo(e,t);var n=mo(e),r=mo(t),i=eo(n.seconds,r.seconds);return 0!==i?i:eo(n.nanos,r.nanos)}function Co(e){return Oo(e)}function Oo(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=mo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?go(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,So.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=pa(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Oo(a)}}catch(e){i.e(e)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=pa(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Oo(e.fields[a]))}}catch(e){i.e(e)}finally{i.f()}return n+"}"}(e.mapValue):ja();var t,n}function Po(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Do(e){return!!e&&"integerValue"in e}function Lo(e){return!!e&&"arrayValue"in e}function Mo(e){return!!e&&"nullValue"in e}function Uo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Fo(e){return!!e&&"mapValue"in e}function jo(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==da(e.timestampValue))return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return oo(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=jo(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=jo(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Vo=function(){function e(t){Ra(this,e),this.value=t}return Aa(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Fo(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jo(t)}},{key:"setAll",value:function(e){var t=this,n=fo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=jo(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Fo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return To(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Fo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){oo(t,(function(t,n){return e[t]=n}));var r,i=pa(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(e){i.e(e)}finally{i.f()}}},{key:"clone",value:function(){return new e(jo(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function qo(e){var t=[];return oo(e.fields,(function(e,n){var r=new fo([e]);if(Fo(n)){var i=qo(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=pa(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(e){o.e(e)}finally{o.f()}}}else t.push(r)})),new ho(t)}var Bo=function(){function e(t,n,r,i,a){Ra(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=a}return Aa(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Vo.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Vo.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,io.min(),Vo.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Vo.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Vo.empty(),2)}}]),e}(),zo=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Ra(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.A=null};function Wo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new zo(e,t,n,r,i,a,o)}function Ho(e){var t=qa(e);if(null===t.A){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Co(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),_o(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=iu(t.startAt)),t.endAt&&(n+="|ub:",n+=iu(t.endAt)),t.A=n}return t.A}function Ko(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ou(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!To(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!su(e.startAt,t.startAt)&&su(e.endAt,t.endAt)}function Go(e){return So.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var Qo=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a;return Ra(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Aa(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(No(t,this.value)):null!==t&&Io(this.value)===Io(t)&&this.P(No(t,this.value))}},{key:"P",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ja()}}},{key:"v",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new $o(e,t,r):"array-contains"===t?new Zo(e,r):"in"===t?new eu(e,r):"not-in"===t?new tu(e,r):"array-contains-any"===t?new nu(e,r):new n(e,t,r)}},{key:"R",value:function(e,t,n){return"in"===t?new Jo(e,n):new Yo(e,n)}}]),n}(function(){return function e(){Ra(this,e)}}());var $o=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a;return Ra(this,n),(a=t.call(this,e,r,i)).key=So.fromName(i.referenceValue),a}return Aa(n,[{key:"matches",value:function(e){var t=So.comparator(e.key,this.key);return this.P(t)}}]),n}(Qo),Jo=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,e,"in",r)).keys=Xo("in",r),i}return Aa(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Qo),Yo=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,e,"not-in",r)).keys=Xo("not-in",r),i}return Aa(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Qo);function Xo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return So.fromName(e.referenceValue)}))}var Zo=function(e){ya(n,e);var t=ga(n);function n(e,r){return Ra(this,n),t.call(this,e,"array-contains",r)}return Aa(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Lo(t)&&Ro(t.arrayValue,this.value)}}]),n}(Qo),eu=function(e){ya(n,e);var t=ga(n);function n(e,r){return Ra(this,n),t.call(this,e,"in",r)}return Aa(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ro(this.value.arrayValue,t)}}]),n}(Qo),tu=function(e){ya(n,e);var t=ga(n);function n(e,r){return Ra(this,n),t.call(this,e,"not-in",r)}return Aa(n,[{key:"matches",value:function(e){if(Ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ro(this.value.arrayValue,t)}}]),n}(Qo),nu=function(e){ya(n,e);var t=ga(n);function n(e,r){return Ra(this,n),t.call(this,e,"array-contains-any",r)}return Aa(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Lo(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ro(t.value.arrayValue,e)}))}}]),n}(Qo),ru=function e(t,n){Ra(this,e),this.position=t,this.before=n};function iu(e){return"".concat(e.before?"b":"a",":").concat(e.position.map((function(e){return Co(e)})).join(","))}var au=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Ra(this,e),this.field=t,this.dir=n};function ou(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function uu(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?So.comparator(So.fromName(o.referenceValue),n.key):No(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function su(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!To(e.position[n],t.position[n]))return!1;return!0}var cu=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Ra(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.V=null,this.S=null,this.startAt,this.endAt};function lu(e,t,n,r,i,a,o,u){return new cu(e,t,n,r,i,a,o,u)}function fu(e){return new cu(e)}function hu(e){return!_o(e.limit)&&"F"===e.limitType}function du(e){return!_o(e.limit)&&"L"===e.limitType}function pu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function vu(e){var t,n=pa(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.v())return r.field}}catch(e){n.e(e)}finally{n.f()}return null}function mu(e){return null!==e.collectionGroup}function yu(e){var t=qa(e);if(null===t.V){t.V=[];var n=vu(t),r=pu(t);if(null!==n&&null===r)n.isKeyField()||t.V.push(new au(n)),t.V.push(new au(fo.keyField(),"asc"));else{var i,a=!1,o=pa(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.V.push(u),u.field.isKeyField()&&(a=!0)}}catch(e){o.e(e)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new au(fo.keyField(),s))}}}return t.V}function gu(e){var t=qa(e);if(!t.S)if("F"===t.limitType)t.S=Wo(t.path,t.collectionGroup,yu(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=pa(yu(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new au(a.field,o))}}catch(e){i.e(e)}finally{i.f()}var u=t.endAt?new ru(t.endAt.position,!t.endAt.before):null,s=t.startAt?new ru(t.startAt.position,!t.startAt.before):null;t.S=Wo(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.S}function bu(e,t,n){return new cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wu(e,t){return Ko(gu(e),gu(t))&&e.limitType===t.limitType}function ku(e){return"".concat(Ho(gu(e)),"|lt:").concat(e.limitType)}function _u(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Co(t.value));var t})).join(", "),"]")),_o(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: "+iu(e.startAt)),e.endAt&&(t+=", endAt: "+iu(e.endAt)),"Target(".concat(t,")")}(gu(e)),"; limitType=").concat(e.limitType,")")}function xu(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):So.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=pa(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=pa(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(e){r.e(e)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!uu(e.startAt,yu(e),t))&&(!e.endAt||!uu(e.endAt,yu(e),t))}(e,t)}function Eu(e){return function(t,n){var r,i=!1,a=pa(yu(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Su(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(e){a.e(e)}finally{a.f()}return 0}}function Su(e,t,n){var r=e.field.isKeyField()?So.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?No(r,i):ja()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ja()}}function Iu(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xo(t)?"-0":t}}function Tu(e){return{integerValue:""+e}}function Ru(e,t){return Eo(t)?Tu(t):Iu(e,t)}var Nu=function e(){Ra(this,e),this._=void 0};function Au(e,t,n){return e instanceof Pu?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Du?Lu(e,t):e instanceof Mu?Uu(e,t):function(e,t){var n=Ou(e,t),r=ju(n)+ju(e.C);return Do(n)&&Do(e.C)?Tu(r):Iu(e.N,r)}(e,t)}function Cu(e,t,n){return e instanceof Du?Lu(e,t):e instanceof Mu?Uu(e,t):n}function Ou(e,t){return e instanceof Fu?Do(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Pu=function(e){ya(n,e);var t=ga(n);function n(){return Ra(this,n),t.apply(this,arguments)}return n}(Nu),Du=function(e){ya(n,e);var t=ga(n);function n(e){var r;return Ra(this,n),(r=t.call(this)).elements=e,r}return n}(Nu);function Lu(e,t){var n,r=Vu(t),i=pa(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return To(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return{arrayValue:{values:r}}}var Mu=function(e){ya(n,e);var t=ga(n);function n(e){var r;return Ra(this,n),(r=t.call(this)).elements=e,r}return n}(Nu);function Uu(e,t){var n,r=Vu(t),i=pa(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!To(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return{arrayValue:{values:r}}}var Fu=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this)).N=e,i.C=r,i}return n}(Nu);function ju(e){return yo(e.integerValue||e.doubleValue)}function Vu(e){return Lo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var qu=function e(t,n){Ra(this,e),this.field=t,this.transform=n};var Bu=function e(t,n){Ra(this,e),this.version=t,this.transformResults=n},zu=function(){function e(t,n){Ra(this,e),this.updateTime=t,this.exists=n}return Aa(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Wu(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Hu=function e(){Ra(this,e)};function Ku(e,t,n){e instanceof Yu?function(e,t,n){var r=e.value.clone(),i=es(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Xu?function(e,t,n){if(Wu(e.precondition,t)){var r=es(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Zu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gu(e,t,n){e instanceof Yu?function(e,t,n){if(Wu(e.precondition,t)){var r=e.value.clone(),i=ts(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Ju(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Xu?function(e,t,n){if(Wu(e.precondition,t)){var r=ts(e.fieldTransforms,n,t),i=t.data;i.setAll(Zu(e)),i.setAll(r),t.convertToFoundDocument(Ju(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Wu(e.precondition,t)&&t.convertToNoDocument(io.min())}(e,t)}function Qu(e,t){var n,r=null,i=pa(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ou(a.transform,o||null);null!=u&&(null==r&&(r=Vo.empty()),r.set(a.field,u))}}catch(e){i.e(e)}finally{i.f()}return r||null}function $u(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&to(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Du&&t instanceof Du||e instanceof Mu&&t instanceof Mu?to(e.elements,t.elements,To):e instanceof Fu&&t instanceof Fu?To(e.C,t.C):e instanceof Pu&&t instanceof Pu}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Ju(e){return e.isFoundDocument()?e.version:io.min()}var Yu=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Ra(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return n}(Hu),Xu=function(e){ya(n,e);var t=ga(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Ra(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return n}(Hu);function Zu(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function es(e,t,n){var r=new Map;Va(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Cu(o,u,n[i]))}return r}function ts(e,t,n){var r,i=new Map,a=pa(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Au(u,s,t))}}catch(e){a.e(e)}finally{a.f()}return i}var ns,rs,is=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return n}(Hu),as=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return n}(Hu),os=function e(t){Ra(this,e),this.count=t};function us(e){switch(e){case Ba.OK:return ja();case Ba.CANCELLED:case Ba.UNKNOWN:case Ba.DEADLINE_EXCEEDED:case Ba.RESOURCE_EXHAUSTED:case Ba.INTERNAL:case Ba.UNAVAILABLE:case Ba.UNAUTHENTICATED:return!1;case Ba.INVALID_ARGUMENT:case Ba.NOT_FOUND:case Ba.ALREADY_EXISTS:case Ba.PERMISSION_DENIED:case Ba.FAILED_PRECONDITION:case Ba.ABORTED:case Ba.OUT_OF_RANGE:case Ba.UNIMPLEMENTED:case Ba.DATA_LOSS:return!0;default:return ja()}}function ss(e){if(void 0===e)return Ma("GRPC error has no .code"),Ba.UNKNOWN;switch(e){case ns.OK:return Ba.OK;case ns.CANCELLED:return Ba.CANCELLED;case ns.UNKNOWN:return Ba.UNKNOWN;case ns.DEADLINE_EXCEEDED:return Ba.DEADLINE_EXCEEDED;case ns.RESOURCE_EXHAUSTED:return Ba.RESOURCE_EXHAUSTED;case ns.INTERNAL:return Ba.INTERNAL;case ns.UNAVAILABLE:return Ba.UNAVAILABLE;case ns.UNAUTHENTICATED:return Ba.UNAUTHENTICATED;case ns.INVALID_ARGUMENT:return Ba.INVALID_ARGUMENT;case ns.NOT_FOUND:return Ba.NOT_FOUND;case ns.ALREADY_EXISTS:return Ba.ALREADY_EXISTS;case ns.PERMISSION_DENIED:return Ba.PERMISSION_DENIED;case ns.FAILED_PRECONDITION:return Ba.FAILED_PRECONDITION;case ns.ABORTED:return Ba.ABORTED;case ns.OUT_OF_RANGE:return Ba.OUT_OF_RANGE;case ns.UNIMPLEMENTED:return Ba.UNIMPLEMENTED;case ns.DATA_LOSS:return Ba.DATA_LOSS;default:return ja()}}(rs=ns||(ns={}))[rs.OK=0]="OK",rs[rs.CANCELLED=1]="CANCELLED",rs[rs.UNKNOWN=2]="UNKNOWN",rs[rs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rs[rs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rs[rs.NOT_FOUND=5]="NOT_FOUND",rs[rs.ALREADY_EXISTS=6]="ALREADY_EXISTS",rs[rs.PERMISSION_DENIED=7]="PERMISSION_DENIED",rs[rs.UNAUTHENTICATED=16]="UNAUTHENTICATED",rs[rs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rs[rs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rs[rs.ABORTED=10]="ABORTED",rs[rs.OUT_OF_RANGE=11]="OUT_OF_RANGE",rs[rs.UNIMPLEMENTED=12]="UNIMPLEMENTED",rs[rs.INTERNAL=13]="INTERNAL",rs[rs.UNAVAILABLE=14]="UNAVAILABLE",rs[rs.DATA_LOSS=15]="DATA_LOSS";var cs=function(){function e(t,n){Ra(this,e),this.comparator=t,this.root=n||fs.EMPTY}return Aa(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,fs.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fs.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ls(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ls(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ls(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ls(this.root,e,this.comparator,!0)}}]),e}(),ls=function(){function e(t,n,r,i){Ra(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Aa(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),fs=function(){function e(t,n,r,i,a){Ra(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Aa(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw ja();if(this.right.isRed())throw ja();var e=this.left.check();if(e!==this.right.check())throw ja();return e+(this.isRed()?0:1)}}]),e}();fs.EMPTY=null,fs.RED=!0,fs.BLACK=!1,fs.EMPTY=new(function(){function e(){Ra(this,e),this.size=0}return Aa(e,[{key:"key",get:function(){throw ja()}},{key:"value",get:function(){throw ja()}},{key:"color",get:function(){throw ja()}},{key:"left",get:function(){throw ja()}},{key:"right",get:function(){throw ja()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new fs(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var hs=function(){function e(t){Ra(this,e),this.comparator=t,this.data=new cs(this.comparator)}return Aa(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new ds(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new ds(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),ds=function(){function e(t){Ra(this,e),this.iter=t}return Aa(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),ps=new cs(So.comparator);function vs(){return ps}var ms=new cs(So.comparator);function ys(){return ms}var gs=new cs(So.comparator);function bs(){return gs}var ws=new hs(So.comparator);function ks(){for(var e=ws,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var _s=new hs(eo);function xs(){return _s}var Es=function(){function e(t,n,r,i,a){Ra(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Aa(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Ss.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(io.min(),r,xs(),vs(),ks())}}]),e}(),Ss=function(){function e(t,n,r,i,a){Ra(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Aa(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(po.EMPTY_BYTE_STRING,n,ks(),ks(),ks())}}]),e}(),Is=function e(t,n,r,i){Ra(this,e),this.k=t,this.removedTargetIds=n,this.key=r,this.$=i},Ts=function e(t,n){Ra(this,e),this.targetId=t,this.O=n},Rs=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:po.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Ra(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},Ns=function(){function e(){Ra(this,e),this.F=0,this.M=Os(),this.L=po.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}return Aa(e,[{key:"current",get:function(){return this.B}},{key:"resumeToken",get:function(){return this.L}},{key:"q",get:function(){return 0!==this.F}},{key:"K",get:function(){return this.U}},{key:"j",value:function(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}},{key:"W",value:function(){var e=ks(),t=ks(),n=ks();return this.M.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ja()}})),new Ss(this.L,this.B,e,t,n)}},{key:"G",value:function(){this.U=!1,this.M=Os()}},{key:"H",value:function(e,t){this.U=!0,this.M=this.M.insert(e,t)}},{key:"J",value:function(e){this.U=!0,this.M=this.M.remove(e)}},{key:"Y",value:function(){this.F+=1}},{key:"X",value:function(){this.F-=1}},{key:"Z",value:function(){this.U=!0,this.B=!0}}]),e}(),As=function(){function e(t){Ra(this,e),this.tt=t,this.et=new Map,this.nt=vs(),this.st=Cs(),this.it=new hs(eo)}return Aa(e,[{key:"rt",value:function(e){var t,n=pa(e.k);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ot(r,e.$):this.at(r,e.key,e.$)}}catch(e){n.e(e)}finally{n.f()}var i,a=pa(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(e){a.e(e)}finally{a.f()}}},{key:"ct",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ut(n);switch(e.state){case 0:t.ht(n)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||t.removeTarget(n);break;case 3:t.ht(n)&&(r.Z(),r.j(e.resumeToken));break;case 4:t.ht(n)&&(t.lt(n),r.j(e.resumeToken));break;default:ja()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((function(e,r){n.ht(r)&&t(r)}))}},{key:"ft",value:function(e){var t=e.targetId,n=e.O.count,r=this.dt(t);if(r){var i=r.target;if(Go(i))if(0===n){var a=new So(i.path);this.at(t,a,Bo.newNoDocument(a,io.min()))}else Va(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}},{key:"_t",value:function(e){var t=this,n=new Map;this.et.forEach((function(r,i){var a=t.dt(i);if(a){if(r.current&&Go(a.target)){var o=new So(a.target.path);null!==t.nt.get(o)||t.gt(i,o)||t.at(i,o,Bo.newNoDocument(o,e))}r.K&&(n.set(i,r.W()),r.G())}}));var r=ks();this.st.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.dt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Es(e,n,this.it,this.nt,r);return this.nt=vs(),this.st=Cs(),this.it=new hs(eo),i}},{key:"ot",value:function(e,t){if(this.ht(e)){var n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ht(e)){var r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.et.delete(e)}},{key:"wt",value:function(e){var t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Y",value:function(e){this.ut(e).Y()}},{key:"ut",value:function(e){var t=this.et.get(e);return t||(t=new Ns,this.et.set(e,t)),t}},{key:"yt",value:function(e){var t=this.st.get(e);return t||(t=new hs(eo),this.st=this.st.insert(e,t)),t}},{key:"ht",value:function(e){var t=null!==this.dt(e);return t||La("WatchChangeAggregator","Detected inactive target",e),t}},{key:"dt",value:function(e){var t=this.et.get(e);return t&&t.q?null:this.tt.Et(e)}},{key:"lt",value:function(e){var t=this;this.et.set(e,new Ns),this.tt.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"gt",value:function(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Cs(){return new cs(So.comparator)}function Os(){return new cs(So.comparator)}var Ps={asc:"ASCENDING",desc:"DESCENDING"},Ds={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ls=function e(t,n){Ra(this,e),this.databaseId=t,this.D=n};function Ms(e,t){return e.D?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Us(e,t){return e.D?t.toBase64():t.toUint8Array()}function Fs(e,t){return Ms(e,t.toTimestamp())}function js(e){return Va(!!e),io.fromTimestamp(function(e){var t=mo(e);return new ro(t.seconds,t.nanos)}(e))}function Vs(e,t){return function(e){return new co(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function qs(e){var t=co.fromString(e);return Va(hc(t)),t}function Bs(e,t){return Vs(e.databaseId,t.path)}function zs(e,t){var n=qs(t);if(n.get(1)!==e.databaseId.projectId)throw new za(Ba.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new za(Ba.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new So(Gs(n))}function Ws(e,t){return Vs(e.databaseId,t)}function Hs(e){var t=qs(e);return 4===t.length?co.emptyPath():Gs(t)}function Ks(e){return new co(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gs(e){return Va(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Qs(e,t,n){return{name:Bs(e,t),fields:n.value.mapValue.fields}}function $s(e,t,n){var r=zs(e,t.name),i=js(t.updateTime),a=new Vo({mapValue:{fields:t.fields}}),o=Bo.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Js(e,t){return"found"in t?function(e,t){Va(!!t.found),t.found.name,t.found.updateTime;var n=zs(e,t.found.name),r=js(t.found.updateTime),i=new Vo({mapValue:{fields:t.found.fields}});return Bo.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Va(!!t.missing),Va(!!t.readTime);var n=zs(e,t.missing),r=js(t.readTime);return Bo.newNoDocument(n,r)}(e,t):ja()}function Ys(e,t){var n;if(t instanceof Yu)n={update:Qs(e,t.key,t.value)};else if(t instanceof is)n={delete:Bs(e,t.key)};else if(t instanceof Xu)n={update:Qs(e,t.key,t.data),updateMask:fc(t.fieldMask)};else{if(!(t instanceof as))return ja();n={verify:Bs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Pu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Du)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Mu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Fu)return{fieldPath:t.field.canonicalString(),increment:n.C};throw ja()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fs(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ja()}(e,t.precondition)),n}function Xs(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?zu.updateTime(js(e.updateTime)):void 0!==e.exists?zu.exists(e.exists):zu.none()}(t.currentDocument):zu.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Va("REQUEST_TIME"===t.setToServerValue),n=new Pu;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Du(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Mu(i)}else"increment"in t?n=new Fu(e,t.increment):ja();var a=fo.fromServerFormat(t.fieldPath);return new qu(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=zs(e,t.update.name),a=new Vo({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ho(t.map((function(e){return fo.fromServerFormat(e)})))}(t.updateMask);return new Xu(i,a,o,n,r)}return new Yu(i,a,n,r)}if(t.delete){var u=zs(e,t.delete);return new is(u,n)}if(t.verify){var s=zs(e,t.verify);return new as(s,n)}return ja()}function Zs(e,t){return{documents:[Ws(e,t.path)]}}function ec(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ws(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ws(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Uo(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NAN"}};if(Mo(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Uo(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NOT_NAN"}};if(Mo(e.value))return{unaryFilter:{field:uc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uc(e.field),op:oc(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:uc(e.field),direction:ac(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=function(e,t){return e.D||_o(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=rc(t.startAt)),t.endAt&&(n.structuredQuery.endAt=rc(t.endAt)),n}function tc(e){var t=Hs(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Va(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=nc(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new au(sc(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return _o(t="object"==da(e)?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=ic(n.startAt));var l=null;return n.endAt&&(l=ic(n.endAt)),lu(t,i,u,o,s,"F",c,l)}function nc(e){return e?void 0!==e.unaryFilter?[lc(e)]:void 0!==e.fieldFilter?[cc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return nc(e)})).reduce((function(e,t){return e.concat(t)})):ja():[]}function rc(e){return{before:e.before,values:e.position}}function ic(e){var t=!!e.before,n=e.values||[];return new ru(n,t)}function ac(e){return Ps[e]}function oc(e){return Ds[e]}function uc(e){return{fieldPath:e.canonicalString()}}function sc(e){return fo.fromServerFormat(e.fieldPath)}function cc(e){return Qo.create(sc(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ja()}}(e.fieldFilter.op),e.fieldFilter.value)}function lc(e){switch(e.unaryFilter.op){case"IS_NAN":var t=sc(e.unaryFilter.field);return Qo.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=sc(e.unaryFilter.field);return Qo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=sc(e.unaryFilter.field);return Qo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=sc(e.unaryFilter.field);return Qo.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ja()}}function fc(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function hc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function dc(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=vc(t)),t=pc(e.get(n),t);return vc(t)}function pc(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="";break;case"":n+="";break;default:n+=a}}return n}function vc(e){return e+""}function mc(e){var t=e.length;if(Va(t>=2),2===t)return Va(""===e.charAt(0)&&""===e.charAt(1)),co.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("",a);switch((o<0||o>n)&&ja(),e.charAt(o+1)){case"":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"":i+=e.substring(a,o),i+="\0";break;case"":i+=e.substring(a,o+1);break;default:ja()}a=o+2}return new co(r)}var yc=function e(t,n){Ra(this,e),this.seconds=t,this.nanoseconds=n},gc=function e(t,n,r){Ra(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r};gc.store="owner",gc.key="owner";var bc=function e(t,n,r){Ra(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r};bc.store="mutationQueues",bc.keyPath="userId";var wc=function e(t,n,r,i,a){Ra(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a};wc.store="mutations",wc.keyPath="batchId",wc.userMutationsIndex="userMutationsIndex",wc.userMutationsKeyPath=["userId","batchId"];var kc=function(){function e(){Ra(this,e)}return Aa(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,dc(t)]}},{key:"key",value:function(e,t,n){return[e,dc(t),n]}}]),e}();kc.store="documentMutations",kc.PLACEHOLDER=new kc;var _c=function e(t,n){Ra(this,e),this.path=t,this.readTime=n},xc=function e(t,n){Ra(this,e),this.path=t,this.version=n},Ec=function e(t,n,r,i,a,o){Ra(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o};Ec.store="remoteDocuments",Ec.readTimeIndex="readTimeIndex",Ec.readTimeIndexPath="readTime",Ec.collectionReadTimeIndex="collectionReadTimeIndex",Ec.collectionReadTimeIndexPath=["parentPath","readTime"];var Sc=function e(t){Ra(this,e),this.byteSize=t};Sc.store="remoteDocumentGlobal",Sc.key="remoteDocumentGlobalKey";var Ic=function e(t,n,r,i,a,o,u){Ra(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=u};Ic.store="targets",Ic.keyPath="targetId",Ic.queryTargetsIndexName="queryTargetsIndex",Ic.queryTargetsKeyPath=["canonicalId","targetId"];var Tc=function e(t,n,r){Ra(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r};Tc.store="targetDocuments",Tc.keyPath=["targetId","path"],Tc.documentTargetsIndex="documentTargetsIndex",Tc.documentTargetsKeyPath=["path","targetId"];var Rc=function e(t,n,r,i){Ra(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i};Rc.key="targetGlobalKey",Rc.store="targetGlobal";var Nc=function e(t,n){Ra(this,e),this.collectionId=t,this.parent=n};Nc.store="collectionParents",Nc.keyPath=["collectionId","parent"];var Ac=function e(t,n,r,i){Ra(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i};Ac.store="clientMetadata",Ac.keyPath="clientId";var Cc=function e(t,n,r){Ra(this,e),this.bundleId=t,this.createTime=n,this.version=r};Cc.store="bundles",Cc.keyPath="bundleId";var Oc=function e(t,n,r){Ra(this,e),this.name=t,this.readTime=n,this.bundledQuery=r};Oc.store="namedQueries",Oc.keyPath="name";var Pc=[bc.store,wc.store,kc.store,Ec.store,Ic.store,gc.store,Rc.store,Tc.store].concat([Ac.store]).concat([Sc.store]).concat([Nc.store]).concat([Cc.store,Oc.store]),Dc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lc=function(){function e(){Ra(this,e),this.onCommittedListeners=[]}return Aa(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Mc=function(){function e(t){var n=this;Ra(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Aa(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&ja(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=pa(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Uc=function(){function e(t,n){var r=this;Ra(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.Tt=new Wa,this.transaction.oncomplete=function(){r.Tt.resolve()},this.transaction.onabort=function(){n.error?r.Tt.reject(new Vc(t,n.error)):r.Tt.resolve()},this.transaction.onerror=function(e){var n=Hc(e.target.error);r.Tt.reject(new Vc(t,n))}}return Aa(e,[{key:"It",get:function(){return this.Tt.promise}},{key:"abort",value:function(e){e&&this.Tt.reject(e),this.aborted||(La("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Bc(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Vc(n,t)}}}]),e}(),Fc=function(){function e(t,n,r){Ra(this,e),this.name=t,this.version=n,this.At=r,12.2===e.Rt(k())&&Ma("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var t,n;return Aa(e,[{key:"Dt",value:(n=ma(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return La("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Vc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new za(Ba.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new za(Ba.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Vc(t,n))},i.onupgradeneeded=function(e){La("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.At.Ct(t,i.transaction,e.oldVersion,n.version).next((function(){La("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Nt&&(this.db.onversionchange=function(e){return n.Nt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"xt",value:function(e){this.Nt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:(t=ma(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,u,s,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Dt(t);case 2:return c.db=e.sent,n=Uc.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).catch((function(e){return n.abort(e),Mc.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.It;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==da(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,La("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return La("SimpleDb","Removing database:",e),zc(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if("undefined"==typeof indexedDB)return!1;if(e.Pt())return!0;var t=k(),n=e.Rt(t),r=0<n&&n<10,i=e.vt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"Pt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}},{key:"St",value:function(e,t){return e.store(t)}},{key:"Rt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),jc=function(){function e(t){Ra(this,e),this.kt=t,this.$t=!1,this.Ot=null}return Aa(e,[{key:"isDone",get:function(){return this.$t}},{key:"Ft",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.kt=e}},{key:"done",value:function(){this.$t=!0}},{key:"Mt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return zc(this.kt.delete())}}]),e}(),Vc=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,Ba.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return n}(za);function qc(e){return"IndexedDbTransactionError"===e.name}var Bc=function(){function e(t){Ra(this,e),this.store=t}return Aa(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(La("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(La("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),zc(n)}},{key:"add",value:function(e){return La("SimpleDb","ADD",this.store.name,e,e),zc(this.store.add(e))}},{key:"get",value:function(e){var t=this;return zc(this.store.get(e)).next((function(n){return void 0===n&&(n=null),La("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return La("SimpleDb","DELETE",this.store.name,e),zc(this.store.delete(e))}},{key:"count",value:function(){return La("SimpleDb","COUNT",this.store.name),zc(this.store.count())}},{key:"Lt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(function(e,t){r.push(t)})).next((function(){return r}))}},{key:"Ut",value:function(e,t){La("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.qt=!1;var r=this.cursor(n);return this.Bt(r,(function(e,t,n){return n.delete()}))}},{key:"Kt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Bt(r,t)}},{key:"jt",value:function(e){var t=this.cursor({});return new Mc((function(n,r){t.onerror=function(e){var t=Hc(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Bt",value:function(e,t){var n=[];return new Mc((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new jc(i),o=t(i.primaryKey,i.value,a);if(o instanceof Mc){var u=o.catch((function(e){return a.done(),Mc.reject(e)}));n.push(u)}a.isDone?r():null===a.Ft?i.continue():i.continue(a.Ft)}else r()}})).next((function(){return Mc.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function zc(e){return new Mc((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Hc(e.target.error);n(t)}}))}var Wc=!1;function Hc(e){var t=Fc.Rt(k());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new za("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Wc||(Wc=!0,setTimeout((function(){throw r}),0)),r}}return e}var Kc=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this)).Qt=e,i.currentSequenceNumber=r,i}return n}(Lc);function Gc(e,t){var n=qa(e);return Fc.St(n.Qt,t)}var Qc=function(){function e(t,n,r,i){Ra(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Aa(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Ku(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=pa(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&Gu(r,e,this.localWriteTime)}}catch(e){n.e(e)}finally{n.f()}var i,a=pa(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&Gu(o,e,this.localWriteTime)}}catch(e){a.e(e)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(io.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),ks())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,(function(e,t){return $u(e,t)}))&&to(this.baseMutations,e.baseMutations,(function(e,t){return $u(e,t)}))}}]),e}(),$c=function(){function e(t,n,r,i){Ra(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Aa(e,null,[{key:"from",value:function(t,n,r){Va(t.mutations.length===r.length);for(var i=bs(),a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Jc=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:io.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:io.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:po.EMPTY_BYTE_STRING;Ra(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Aa(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Yc=function e(t){Ra(this,e),this.Wt=t};function Xc(e,t){if(t.document)return $s(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=So.fromSegments(t.noDocument.path),r=rl(t.noDocument.readTime),i=Bo.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var a=So.fromSegments(t.unknownDocument.path),o=rl(t.unknownDocument.version);return Bo.newUnknownDocument(a,o)}return ja()}function Zc(e,t,n){var r=el(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var a=function(e,t){return{name:Bs(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ms(e,t.version.toTimestamp())}}(e.Wt,t),o=t.hasCommittedMutations;return new Ec(null,null,a,o,r,i)}if(t.isNoDocument()){var u=t.key.path.toArray(),s=nl(t.version),c=t.hasCommittedMutations;return new Ec(null,new _c(u,s),null,c,r,i)}if(t.isUnknownDocument()){var l=t.key.path.toArray(),f=nl(t.version);return new Ec(new xc(l,f),null,null,!0,r,i)}return ja()}function el(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function tl(e){var t=new ro(e[0],e[1]);return io.fromTimestamp(t)}function nl(e){var t=e.toTimestamp();return new yc(t.seconds,t.nanoseconds)}function rl(e){var t=new ro(e.seconds,e.nanoseconds);return io.fromTimestamp(t)}function il(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Xs(e.Wt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Xs(e.Wt,t)})),u=ro.fromMillis(t.localWriteTimeMs);return new Qc(t.batchId,u,n,o)}function al(e){var t,n,r=rl(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?rl(e.lastLimboFreeSnapshotVersion):io.min();return void 0!==e.query.documents?(Va(1===(n=e.query).documents.length),t=gu(fu(Hs(n.documents[0])))):t=function(e){return gu(tc(e))}(e.query),new Jc(t,e.targetId,0,e.lastListenSequenceNumber,r,i,po.fromBase64String(e.resumeToken))}function ol(e,t){var n,r=nl(t.snapshotVersion),i=nl(t.lastLimboFreeSnapshotVersion);n=Go(t.target)?Zs(e.Wt,t.target):ec(e.Wt,t.target);var a=t.resumeToken.toBase64();return new Ic(t.targetId,Ho(t.target),r,a,t.sequenceNumber,i,n)}function ul(e){var t=tc({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?bu(t,t.limit,"L"):t}var sl=function(){function e(){Ra(this,e)}return Aa(e,[{key:"getBundleMetadata",value:function(e,t){return cl(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:rl(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return cl(e).put({bundleId:(n=t).id,createTime:nl(js(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return ll(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ul(t.bundledQuery),readTime:rl(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return ll(e).put(function(e){return{name:e.name,readTime:nl(js(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function cl(e){return Gc(e,Cc.store)}function ll(e){return Gc(e,Oc.store)}var fl=function(){function e(){Ra(this,e),this.Gt=new hl}return Aa(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Gt.add(t),Mc.resolve()}},{key:"getCollectionParents",value:function(e,t){return Mc.resolve(this.Gt.getEntries(t))}}]),e}(),hl=function(){function e(){Ra(this,e),this.index={}}return Aa(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new hs(co.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new hs(co.comparator)).toArray()}}]),e}(),dl=function(){function e(){Ra(this,e),this.zt=new hl}return Aa(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.zt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.zt.add(t)}));var a={collectionId:r,parent:dc(i)};return pl(e).put(a)}return Mc.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[no(t),""],!1,!0);return pl(e).Lt(r).next((function(e){var r,i=pa(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(mc(a.parent))}}catch(e){i.e(e)}finally{i.f()}return n}))}}]),e}();function pl(e){return Gc(e,Nc.store)}var vl={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ml=function(){function e(t,n,r){Ra(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Aa(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function yl(e,t,n){var r=e.store(wc.store),i=e.store(kc.store),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Kt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Va(1===u)})));var c,l=[],f=pa(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=kc.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(e){f.e(e)}finally{f.f()}return Mc.waitFor(a).next((function(){return l}))}function gl(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ja();t=e.noDocument}return JSON.stringify(t).length}ml.DEFAULT_COLLECTION_PERCENTILE=10,ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ml.DEFAULT=new ml(41943040,ml.DEFAULT_COLLECTION_PERCENTILE,ml.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ml.DISABLED=new ml(-1,0,0);var bl=function(){function e(t,n,r,i){Ra(this,e),this.userId=t,this.N=n,this.Ht=r,this.referenceDelegate=i,this.Jt={}}return Aa(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kl(e).Kt({index:wc.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=_l(e),o=kl(e);return o.add({}).next((function(u){Va("number"==typeof u);var s,c=new Qc(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Ys(e.Wt,t)})),i=n.mutations.map((function(t){return Ys(e.Wt,t)}));return new wc(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.N,i.userId,c),f=[],h=new hs((function(e,t){return eo(e.canonicalString(),t.canonicalString())})),d=pa(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=kc.key(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,kc.PLACEHOLDER))}}catch(e){d.e(e)}finally{d.f()}return h.forEach((function(t){f.push(i.Ht.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Jt[u]=c.keys()})),Mc.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return kl(e).get(t).next((function(e){return e?(Va(e.userId===n.userId),il(n.N,e)):null}))}},{key:"Xt",value:function(e,t){var n=this;return this.Jt[t]?Mc.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Jt[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return kl(e).Kt({index:wc.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Va(t.batchId>=r),a=il(n.N,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return kl(e).Kt({index:wc.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kl(e).Lt(wc.userMutationsIndex,n).next((function(e){return e.map((function(e){return il(t.N,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=kc.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return _l(e).Kt({range:i},(function(r,i,o){var u=ha(r,3),s=u[0],c=u[1],l=u[2],f=mc(c);if(s===n.userId&&t.path.isEqual(f))return kl(e).get(l).next((function(e){if(!e)throw ja();Va(e.userId===n.userId),a.push(il(n.N,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new hs(eo),i=[];return t.forEach((function(t){var a=kc.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=_l(e).Kt({range:o},(function(e,i,a){var o=ha(e,3),u=o[0],s=o[1],c=o[2],l=mc(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Mc.waitFor(i).next((function(){return n.Zt(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=kc.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new hs(eo);return _l(e).Kt({range:o},(function(e,t,a){var o=ha(e,3),s=o[0],c=o[1],l=o[2],f=mc(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Zt(e,u)}))}},{key:"Zt",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(kl(e).get(t).next((function(e){if(null===e)throw ja();Va(e.userId===n.userId),r.push(il(n.N,e))})))})),Mc.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return yl(e.Qt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.te(t.batchId)})),Mc.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"te",value:function(e){delete this.Jt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Mc.resolve();var r=IDBKeyRange.lowerBound(kc.prefixForUser(t.userId)),i=[];return _l(e).Kt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=mc(e[1]);i.push(a)}else r.done()})).next((function(){Va(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return wl(e,this.userId,t)}},{key:"ee",value:function(e){var t=this;return xl(e).get(this.userId).next((function(e){return e||new bc(t.userId,-1,"")}))}}],[{key:"Yt",value:function(t,n,r,i){return Va(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function wl(e,t,n){var r=kc.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return _l(e).Kt({range:a,qt:!0},(function(e,n,r){var a=ha(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function kl(e){return Gc(e,wc.store)}function _l(e){return Gc(e,kc.store)}function xl(e){return Gc(e,bc.store)}var El=function(){function e(t){Ra(this,e),this.ne=t}return Aa(e,[{key:"next",value:function(){return this.ne+=2,this.ne}}],[{key:"se",value:function(){return new e(0)}},{key:"ie",value:function(){return new e(-1)}}]),e}(),Sl=function(){function e(t,n){Ra(this,e),this.referenceDelegate=t,this.N=n}return Aa(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.re(e).next((function(n){var r=new El(n.highestTargetId);return n.highestTargetId=r.next(),t.oe(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.re(e).next((function(e){return io.fromTimestamp(new ro(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.re(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.re(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.oe(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.ae(e,t).next((function(){return n.re(e).next((function(r){return r.targetCount+=1,n.ce(t,r),n.oe(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.ae(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Il(e).delete(t.targetId)})).next((function(){return n.re(e)})).next((function(t){return Va(t.targetCount>0),t.targetCount-=1,n.oe(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Il(e).Kt((function(o,u){var s=al(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Mc.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Il(e).Kt((function(e,n){var r=al(n);t(r)}))}},{key:"re",value:function(e){return Tl(e).get(Rc.key).next((function(e){return Va(null!==e),e}))}},{key:"oe",value:function(e,t){return Tl(e).put(Rc.key,t)}},{key:"ae",value:function(e,t){return Il(e).put(ol(this.N,t))}},{key:"ce",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.re(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Ho(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Il(e).Kt({range:r,index:Ic.queryTargetsIndexName},(function(e,n,r){var a=al(n);Ko(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Rl(e);return t.forEach((function(t){var o=dc(t.path);i.push(a.put(new Tc(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),Mc.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Rl(e);return Mc.forEach(t,(function(t){var a=dc(t.path);return Mc.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Rl(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Rl(e),i=ks();return r.Kt({range:n,qt:!0},(function(e,t,n){var r=mc(e[1]),a=new So(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=dc(t.path),r=IDBKeyRange.bound([n],[no(n)],!1,!0),i=0;return Rl(e).Kt({index:Tc.documentTargetsIndex,qt:!0,range:r},(function(e,t,n){var r=ha(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return Il(e).get(t).next((function(e){return e?al(e):null}))}}]),e}();function Il(e){return Gc(e,Ic.store)}function Tl(e){return Gc(e,Rc.store)}function Rl(e){return Gc(e,Tc.store)}function Nl(e){return Al.apply(this,arguments)}function Al(){return(Al=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ba.FAILED_PRECONDITION&&t.message===Dc){e.next=2;break}throw t;case 2:La("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cl(e,t){var n=ha(e,2),r=n[0],i=n[1],a=ha(t,2),o=a[0],u=a[1],s=eo(r,o);return 0===s?eo(i,u):s}var Ol=function(){function e(t){Ra(this,e),this.ue=t,this.buffer=new hs(Cl),this.he=0}return Aa(e,[{key:"le",value:function(){return++this.he}},{key:"fe",value:function(e){var t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Cl(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Pl=function(){function e(t,n){Ra(this,e),this.garbageCollector=t,this.asyncQueue=n,this.de=!1,this.we=null}return Aa(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}},{key:"stop",value:function(){this.we&&(this.we.cancel(),this.we=null)}},{key:"started",get:function(){return null!==this.we}},{key:"_e",value:function(e){var t=this,n=this.de?3e5:6e4;La("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,ma(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.we=null,t.de=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!qc(n.t0)){n.next=12;break}La("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Nl(n.t0);case 14:return n.next=16,t._e(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Dl=function(){function e(t,n){Ra(this,e),this.me=t,this.params=n}return Aa(e,[{key:"calculateTargetCount",value:function(e,t){return this.me.ge(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Mc.resolve(Ya.T);var r=new Ol(t);return this.me.forEachTarget(e,(function(e){return r.fe(e.sequenceNumber)})).next((function(){return n.me.ye(e,(function(e){return r.fe(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.me.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.me.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(La("LruGarbageCollector","Garbage collection skipped; disabled"),Mc.resolve(vl)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(La("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),vl):n.pe(e,t)}))}},{key:"getCacheSize",value:function(e){return this.me.getCacheSize(e)}},{key:"pe",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(La("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Da()<=Q.DEBUG&&La("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Mc.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Ll=function(){function e(t,n){Ra(this,e),this.db=t,this.garbageCollector=function(e,t){return new Dl(e,t)}(this,n)}return Aa(e,[{key:"ge",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Ee",value:function(e){var t=0;return this.ye(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ye",value:function(e,t){return this.Te(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Ml(e,n)}},{key:"removeReference",value:function(e,t,n){return Ml(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Ml(e,t)}},{key:"Ie",value:function(e,t){return function(e,t){var n=!1;return xl(e).jt((function(r){return wl(e,r,t).next((function(e){return e&&(n=!0),Mc.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Te(e,(function(o,u){if(u<=t){var s=n.Ie(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o),Rl(e).delete([0,dc(o.path)])}))}));i.push(s)}})).next((function(){return Mc.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Ml(e,t)}},{key:"Te",value:function(e,t){var n,r=Rl(e),i=Ya.T;return r.Kt({index:Tc.documentTargetsIndex},(function(e,r){var a=ha(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Ya.T&&t(new So(mc(n)),i),i=s,n=u):i=Ya.T})).next((function(){i!==Ya.T&&t(new So(mc(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Ml(e,t){return Rl(e).put(function(e,t){return new Tc(0,dc(e.path),t)}(t,e.currentSequenceNumber))}var Ul=function(){function e(t,n){Ra(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return Aa(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=pa(n);try{for(i.s();!(r=i.n()).done;){var a=ha(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(e){i.e(e)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){oo(this.inner,(function(t,n){var r,i=pa(n);try{for(i.s();!(r=i.n()).done;){var a=ha(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(e){i.e(e)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return uo(this.inner)}}]),e}(),Fl=function(){function e(){Ra(this,e),this.changes=new Ul((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Aa(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:io.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:Bo.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Mc.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),jl=function(){function e(t,n){Ra(this,e),this.N=t,this.Ht=n}return Aa(e,[{key:"addEntry",value:function(e,t,n){return Bl(e).put(zl(t),n)}},{key:"removeEntry",value:function(e,t){var n=Bl(e),r=zl(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Ae(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return Bl(e).get(zl(t)).next((function(e){return n.Re(t,e)}))}},{key:"be",value:function(e,t){var n=this;return Bl(e).get(zl(t)).next((function(e){return{document:n.Re(t,e),size:gl(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=vs();return this.Pe(e,t,(function(e,t){var i=n.Re(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ve",value:function(e,t){var n=this,r=vs(),i=new cs(So.comparator);return this.Pe(e,t,(function(e,t){var a=n.Re(e,t);r=r.insert(e,a),i=i.insert(e,gl(t))})).next((function(){return{documents:r,Ve:i}}))}},{key:"Pe",value:function(e,t,n){if(t.isEmpty())return Mc.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return Bl(e).Kt({range:r},(function(e,t,r){for(var o=So.fromSegments(e);a&&So.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Mt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=vs(),a=t.path.length+1,o={};if(n.isEqual(io.min())){var u=t.path.toArray();o.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=el(n);o.range=IDBKeyRange.lowerBound([s,c],!0),o.index=Ec.collectionReadTimeIndex}return Bl(e).Kt(o,(function(e,n,o){if(e.length===a){var u=Xc(r.N,n);t.path.isPrefixOf(u.key.path)?xu(t,u)&&(i=i.insert(u.key,u)):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new Vl(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ql(e).get(Sc.key).next((function(e){return Va(!!e),e}))}},{key:"Ae",value:function(e,t){return ql(e).put(Sc.key,t)}},{key:"Re",value:function(e,t){if(t){var n=Xc(this.N,t);if(!n.isNoDocument()||!n.version.isEqual(io.min()))return n}return Bo.newInvalidDocument(e)}}]),e}(),Vl=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this)).Se=e,i.trackRemovals=r,i.De=new Ul((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Aa(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new hs((function(e,t){return eo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.De.get(a);if(o.document.isValidDocument()){var s=Zc(t.Se.N,o.document,t.getReadTime(a));i=i.add(a.path.popLast());var c=gl(s);r+=c-u,n.push(t.Se.addEntry(e,a,s))}else if(r-=u,t.trackRemovals){var l=Zc(t.Se.N,Bo.newNoDocument(a,io.min()),t.getReadTime(a));n.push(t.Se.addEntry(e,a,l))}else n.push(t.Se.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Se.Ht.addToCollectionParentIndex(e,r))})),n.push(this.Se.updateMetadata(e,r)),Mc.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Se.be(e,t).next((function(e){return n.De.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Se.ve(e,t).next((function(e){var t=e.documents;return e.Ve.forEach((function(e,t){n.De.set(e,t)})),t}))}}]),n}(Fl);function ql(e){return Gc(e,Sc.store)}function Bl(e){return Gc(e,Ec.store)}function zl(e){return e.path.toArray()}var Wl=function(){function e(t){Ra(this,e),this.N=t}return Aa(e,[{key:"Ct",value:function(e,t,n,r){var i=this;Va(n<r&&n>=0&&r<=11);var a=new Uc("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(gc.store)}(e),function(e){e.createObjectStore(bc.store,{keyPath:bc.keyPath}),e.createObjectStore(wc.store,{keyPath:wc.keyPath,autoIncrement:!0}).createIndex(wc.userMutationsIndex,wc.userMutationsKeyPath,{unique:!0}),e.createObjectStore(kc.store)}(e),Hl(e),function(e){e.createObjectStore(Ec.store)}(e));var o=Mc.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Tc.store),e.deleteObjectStore(Ic.store),e.deleteObjectStore(Rc.store)}(e),Hl(e)),o=o.next((function(){return function(e){var t=e.store(Rc.store),n=new Rc(0,0,io.min().toTimestamp(),0);return t.put(Rc.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(wc.store).Lt().next((function(n){e.deleteObjectStore(wc.store),e.createObjectStore(wc.store,{keyPath:wc.keyPath,autoIncrement:!0}).createIndex(wc.userMutationsIndex,wc.userMutationsKeyPath,{unique:!0});var r=t.store(wc.store),i=n.map((function(e){return r.put(e)}));return Mc.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(Ac.store,{keyPath:Ac.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ce(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Sc.store)}(e),i.Ne(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.xe(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ke(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Ec.store);t.createIndex(Ec.readTimeIndex,Ec.readTimeIndexPath,{unique:!1}),t.createIndex(Ec.collectionReadTimeIndex,Ec.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.$e(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Cc.store,{keyPath:Cc.keyPath})}(e),function(e){e.createObjectStore(Oc.store,{keyPath:Oc.keyPath})}(e)}))),o}},{key:"Ne",value:function(e){var t=0;return e.store(Ec.store).Kt((function(e,n){t+=gl(n)})).next((function(){var n=new Sc(t);return e.store(Sc.store).put(Sc.key,n)}))}},{key:"Ce",value:function(e){var t=this,n=e.store(bc.store),r=e.store(wc.store);return n.Lt().next((function(n){return Mc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Lt(wc.userMutationsIndex,i).next((function(r){return Mc.forEach(r,(function(r){Va(r.userId===n.userId);var i=il(t.N,r);return yl(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"xe",value:function(e){var t=e.store(Tc.store),n=e.store(Ec.store);return e.store(Rc.store).get(Rc.key).next((function(e){var r=[];return n.Kt((function(n,i){var a=new co(n),o=function(e){return[0,dc(e)]}(a);r.push(t.get(o).next((function(n){return n?Mc.resolve():function(n){return t.put(new Tc(0,dc(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return Mc.waitFor(r)}))}))}},{key:"ke",value:function(e,t){e.createObjectStore(Nc.store,{keyPath:Nc.keyPath});var n=t.store(Nc.store),r=new hl,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:dc(i)})}};return t.store(Ec.store).Kt({qt:!0},(function(e,t){var n=new co(e);return i(n.popLast())})).next((function(){return t.store(kc.store).Kt({qt:!0},(function(e,t){var n=ha(e,3),r=(n[0],n[1]),a=(n[2],mc(r));return i(a.popLast())}))}))}},{key:"$e",value:function(e){var t=this,n=e.store(Ic.store);return n.Kt((function(e,r){var i=al(r),a=ol(t.N,i);return n.put(a)}))}}]),e}();function Hl(e){e.createObjectStore(Tc.store,{keyPath:Tc.keyPath}).createIndex(Tc.documentTargetsIndex,Tc.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Ic.store,{keyPath:Ic.keyPath}).createIndex(Ic.queryTargetsIndexName,Ic.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Rc.store)}var Kl="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Gl=function(){function e(t,n,r,i,a,o,u,s,c,l){if(Ra(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=a,this.window=o,this.document=u,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=function(e){return Promise.resolve()},!e.bt())throw new za(Ba.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ll(this,i),this.We=n+"main",this.N=new Yc(s),this.Ge=new Fc(this.We,11,new Wl(this.N)),this.ze=new Sl(this.referenceDelegate,this.N),this.Ht=new dl,this.He=function(e,t){return new jl(e,t)}(this.N,this.Ht),this.Je=new sl,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&Ma("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}var t,n;return Aa(e,[{key:"start",value:function(){var e=this;return this.Xe().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new za(Ba.FAILED_PRECONDITION,Kl);return e.Ze(),e.tn(),e.en(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.ze.getHighestSequenceNumber(t)}))})).then((function(t){e.Le=new Ya(t,e.Fe)})).then((function(){e.Be=!0})).catch((function(t){return e.Ge&&e.Ge.close(),Promise.reject(t)}))}},{key:"nn",value:function(e){var t=this;return this.Qe=function(){var n=ma(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ge.xt(function(){var t=ma(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Xe();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Xe",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return $l(t).put(new Ac(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.sn(t).next((function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable((function(){return e.Qe(!1)})))}))})).next((function(){return e.rn(t)})).next((function(n){return e.isPrimary&&!n?e.on(t).next((function(){return!1})):!!n&&e.an(t).next((function(){return!0}))}))})).catch((function(t){if(qc(t))return La("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return La("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable((function(){return e.Qe(t)})),e.isPrimary=t}))}},{key:"sn",value:function(e){var t=this;return Ql(e).get(gc.key).next((function(e){return Mc.resolve(t.cn(e))}))}},{key:"un",value:function(e){return $l(e).delete(this.clientId)}},{key:"hn",value:(n=ma(regeneratorRuntime.mark((function e(){var t,n,r,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.ln(this.je,18e5)){e.next=6;break}return this.je=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Gc(e,Ac.store);return t.Lt().next((function(e){var n=a.fn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Mc.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ye){n=pa(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ye.removeItem(this.dn(i.clientId))}catch(e){n.e(e)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"en",value:function(){var e=this;this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Xe().then((function(){return e.hn()})).then((function(){return e.en()}))}))}},{key:"cn",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"rn",value:function(e){var t=this;return this.Me?Mc.resolve(!0):Ql(e).get(gc.key).next((function(n){if(null!==n&&t.ln(n.leaseTimestampMs,5e3)&&!t.wn(n.ownerId)){if(t.cn(n)&&t.networkEnabled)return!0;if(!t.cn(n)){if(!n.allowTabSynchronization)throw new za(Ba.FAILED_PRECONDITION,Kl);return!1}}return!(!t.networkEnabled||!t.inForeground)||$l(e).Lt().next((function(e){return void 0===t.fn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&La("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:(t=ma(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),e.next=7,this.Ge.runTransaction("shutdown","readwrite",[gc.store,Ac.store],(function(e){var n=new Kc(e,Ya.T);return t.on(n).next((function(){return t.un(n)}))}));case 7:this.Ge.close(),this.yn();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"fn",value:function(e,t){var n=this;return e.filter((function(e){return n.ln(e.updateTimeMs,t)&&!n.wn(e.clientId)}))}},{key:"pn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return $l(t).Lt().next((function(t){return e.fn(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Be}},{key:"getMutationQueue",value:function(e){return bl.Yt(e,this.N,this.Ht,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r=this;La("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite";return this.Ge.runTransaction(e,a,Pc,(function(a){return i=new Kc(a,r.Le?r.Le.next():Ya.T),"readwrite-primary"===t?r.sn(i).next((function(e){return!!e||r.rn(i)})).next((function(t){if(!t)throw Ma("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Oe.enqueueRetryable((function(){return r.Qe(!1)})),new za(Ba.FAILED_PRECONDITION,Dc);return n(i)})).next((function(e){return r.an(i).next((function(){return e}))})):r.En(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"En",value:function(e){var t=this;return Ql(e).get(gc.key).next((function(e){if(null!==e&&t.ln(e.leaseTimestampMs,5e3)&&!t.wn(e.ownerId)&&!t.cn(e)&&!(t.Me||t.allowTabSynchronization&&e.allowTabSynchronization))throw new za(Ba.FAILED_PRECONDITION,Kl)}))}},{key:"an",value:function(e){var t=new gc(this.clientId,this.allowTabSynchronization,Date.now());return Ql(e).put(gc.key,t)}},{key:"on",value:function(e){var t=this,n=Ql(e);return n.get(gc.key).next((function(e){return t.cn(e)?(La("IndexedDbPersistence","Releasing primary lease."),n.delete(gc.key)):Mc.resolve()}))}},{key:"ln",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(Ma("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"Ze",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){e.Oe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Xe()}))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}},{key:"mn",value:function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}},{key:"tn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=function(){t._n(),!x()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Ue))}},{key:"gn",value:function(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}},{key:"wn",value:function(e){var t;try{var n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return La("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ma("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"_n",value:function(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Ma("Failed to set zombie client id.",e)}}},{key:"yn",value:function(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}},{key:"dn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return Fc.bt()}}]),e}();function Ql(e){return Gc(e,gc.store)}function $l(e){return Gc(e,Ac.store)}function Jl(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Yl=function e(t,n){Ra(this,e),this.progress=t,this.Tn=n},Xl=function(){function e(t,n,r){Ra(this,e),this.He=t,this.In=n,this.Ht=r}return Aa(e,[{key:"An",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Rn(e,t,r)}))}},{key:"Rn",value:function(e,t,n){return this.He.getEntry(e,t).next((function(e){var t,r=pa(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(e){r.e(e)}finally{r.f()}return e}))}},{key:"bn",value:function(e,t){e.forEach((function(e,n){var r,i=pa(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(e){i.e(e)}finally{i.f()}}))}},{key:"Pn",value:function(e,t){var n=this;return this.He.getEntries(e,t).next((function(t){return n.vn(e,t).next((function(){return t}))}))}},{key:"vn",value:function(e,t){var n=this;return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.bn(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return So.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):mu(t)?this.Sn(e,t,n):this.Dn(e,t,n)}},{key:"Vn",value:function(e,t){return this.An(e,new So(t)).next((function(e){var t=ys();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Sn",value:function(e,t,n){var r=this,i=t.collectionGroup,a=ys();return this.Ht.getCollectionParents(e,i).next((function(o){return Mc.forEach(o,(function(o){var u=function(e,t){return new cu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Dn(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Dn",value:function(e,t,n){var r,i,a=this;return this.He.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,a.In.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,a.Cn(e,i,r).next((function(e){r=e;var t,n=pa(i);try{for(n.s();!(t=n.n()).done;){var a,o=t.value,u=pa(o.mutations);try{for(u.s();!(a=u.n()).done;){var s=a.value,c=s.key,l=r.get(c);null==l&&(l=Bo.newInvalidDocument(c),r=r.insert(c,l)),Gu(s,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}catch(e){u.e(e)}finally{u.f()}}}catch(e){n.e(e)}finally{n.f()}}))})).next((function(){return r.forEach((function(e,n){xu(t,n)||(r=r.remove(e))})),r}))}},{key:"Cn",value:function(e,t,n){var r,i=ks(),a=pa(t);try{for(a.s();!(r=a.n()).done;){var o,u=pa(r.value.mutations);try{for(u.s();!(o=u.n()).done;){var s=o.value;s instanceof Xu&&null===n.get(s.key)&&(i=i.add(s.key))}}catch(e){u.e(e)}finally{u.f()}}}catch(e){a.e(e)}finally{a.f()}var c=n;return this.He.getEntries(e,i).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))}}]),e}(),Zl=function(){function e(t,n,r,i){Ra(this,e),this.targetId=t,this.fromCache=n,this.Nn=r,this.xn=i}return Aa(e,null,[{key:"kn",value:function(t,n){var r,i=ks(),a=ks(),o=pa(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(e){o.e(e)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),ef=function(){function e(){Ra(this,e)}return Aa(e,[{key:"$n",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(io.min())?this.Fn(e,t):this.On.Pn(e,r).next((function(a){var o=i.Mn(t,a);return(hu(t)||du(t))&&i.Ln(t.limitType,o,r,n)?i.Fn(e,t):(Da()<=Q.DEBUG&&La("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_u(t)),i.On.getDocumentsMatchingQuery(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"Mn",value:function(e,t){var n=new hs(Eu(e));return t.forEach((function(t,r){xu(e,r)&&(n=n.add(r))})),n}},{key:"Ln",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Fn",value:function(e,t){return Da()<=Q.DEBUG&&La("QueryEngine","Using full collection scan to execute query:",_u(t)),this.On.getDocumentsMatchingQuery(e,t,io.min())}}]),e}(),tf=function(){function e(t,n,r,i){Ra(this,e),this.persistence=t,this.Bn=n,this.N=i,this.Un=new cs(eo),this.qn=new Ul((function(e){return Ho(e)}),Ko),this.Kn=io.min(),this.In=t.getMutationQueue(r),this.jn=t.getRemoteDocumentCache(),this.ze=t.getTargetCache(),this.Qn=new Xl(this.jn,this.In,this.persistence.getIndexManager()),this.Je=t.getBundleCache(),this.Bn.$n(this.Qn)}return Aa(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Un)}))}}]),e}();function nf(e,t,n,r){return new tf(e,t,n,r)}function rf(e,t){return af.apply(this,arguments)}function af(){return(af=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),i=r.In,a=r.Qn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.In.getAllMutationBatches(e).next((function(o){return t=o,i=r.persistence.getMutationQueue(n),a=new Xl(r.jn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)})).next((function(n){var r,i=[],o=[],u=ks(),s=pa(t);try{for(s.s();!(r=s.n()).done;){var c=r.value;i.push(c.batchId);var l,f=pa(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(e){f.e(e)}finally{f.f()}}}catch(e){s.e(e)}finally{s.f()}var d,p=pa(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=pa(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(e){y.e(e)}finally{y.f()}}}catch(e){p.e(e)}finally{p.f()}return a.Pn(e,u).next((function(e){return{Wn:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 4:return o=e.sent,e.abrupt("return",(r.In=i,r.Qn=a,r.Bn.$n(r.Qn),o));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function of(e,t){var n=qa(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Mc.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Va(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),o.next((function(){return e.In.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.In.performConsistencyCheck(e)})).next((function(){return n.Qn.Pn(e,r)}))}))}function uf(e){var t=qa(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.ze.getLastRemoteSnapshotVersion(e)}))}function sf(e,t){var n=qa(e),r=t.snapshotVersion,i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;var o=[];t.targetChanges.forEach((function(t,a){var u=i.get(a);if(u){o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,a).next((function(){return n.ze.addMatchingKeys(e,t.addedDocuments,a)})));var s=t.resumeToken;if(s.approximateByteSize()>0){var c=u.withResumeToken(s,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(a,c),function(e,t,n){return Va(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,t)&&o.push(n.ze.updateTargetData(e,c))}}}));var u=vs();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(cf(e,a,t.documentUpdates,r,void 0).next((function(e){u=e}))),!r.isEqual(io.min())){var s=n.ze.getLastRemoteSnapshotVersion(e).next((function(t){return n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return Mc.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Qn.vn(e,u)})).next((function(){return u}))})).then((function(e){return n.Un=i,e}))}function cf(e,t,n,r,i){var a=ks();return n.forEach((function(e){return a=a.add(e)})),t.getEntries(e,a).next((function(e){var a=vs();return n.forEach((function(n,o){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(io.min())?(t.removeEntry(n,s),a=a.insert(n,o)):!u.isValidDocument()||o.version.compareTo(u.version)>0||0===o.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(o,s),a=a.insert(n,o)):La("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",o.version)})),a}))}function lf(e,t){var n=qa(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)}))}function ff(e,t){var n=qa(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.ze.getTargetData(e,t).next((function(i){return i?(r=i,Mc.resolve(r)):n.ze.allocateTargetId(e).next((function(i){return r=new Jc(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e}))}function hf(e,t,n){return df.apply(this,arguments)}function df(){return(df=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=qa(t),a=i.Un.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),qc(e.t1)){e.next=12;break}throw e.t1;case 12:La("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Un=i.Un.remove(n),i.qn.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function pf(e,t,n){var r=qa(e),i=io.min(),a=ks();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=qa(e),i=r.qn.get(n);return void 0!==i?Mc.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,gu(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bn.getDocumentsMatchingQuery(e,t,n?i:io.min(),n?a:ks())})).next((function(e){return{documents:e,Gn:a}}))}))}function vf(e,t){var n=qa(e),r=qa(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function mf(e){var t=qa(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=qa(e),i=vs(),a=el(n),o=Bl(t),u=IDBKeyRange.lowerBound(a,!0);return o.Kt({index:Ec.readTimeIndex,range:u},(function(e,t){var n=Xc(r.N,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{Tn:i,readTime:tl(a)}}))}(t.jn,e,t.Kn)})).then((function(e){var n=e.Tn,r=e.readTime;return t.Kn=r,n}))}function yf(e){return gf.apply(this,arguments)}function gf(){return(gf=ma(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qa(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=Bl(e),n=io.min();return t.Kt({index:Ec.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=tl(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.Kn=e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bf(e,t,n,r){return wf.apply(this,arguments)}function wf(){return wf=ma(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=qa(t),o=ks(),u=vs(),s=bs(),c=pa(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.zn(f.metadata.name),f.document&&(o=o.add(h)),u=u.insert(h,n.Hn(f)),s=s.insert(h,n.Jn(f.metadata.readTime))}catch(e){c.e(e)}finally{c.f()}return d=a.jn.newChangeBuffer({trackRemovals:!0}),e.next=7,ff(a,function(e){return gu(fu(co.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return cf(e,d,u,io.min(),s).next((function(t){return d.apply(e),t})).next((function(t){return a.ze.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.ze.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Qn.vn(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),wf.apply(this,arguments)}function kf(e,t){return _f.apply(this,arguments)}function _f(){return _f=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:ks(),e.next=3,ff(t,gu(ul(n.bundledQuery)));case 3:return i=e.sent,a=qa(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=js(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Je.saveNamedQuery(e,n);var o=i.withResumeToken(po.EMPTY_BYTE_STRING,t);return a.Un=a.Un.insert(o.targetId,o),a.ze.updateTargetData(e,o).next((function(){return a.ze.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.ze.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Je.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),_f.apply(this,arguments)}var xf=function(){function e(t){Ra(this,e),this.N=t,this.Yn=new Map,this.Xn=new Map}return Aa(e,[{key:"getBundleMetadata",value:function(e,t){return Mc.resolve(this.Yn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:js(n.createTime)}),Mc.resolve()}},{key:"getNamedQuery",value:function(e,t){return Mc.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:ul(e.bundledQuery),readTime:js(e.readTime)}}(t)),Mc.resolve()}}]),e}(),Ef=function(){function e(){Ra(this,e),this.Zn=new hs(Sf.ts),this.es=new hs(Sf.ns)}return Aa(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Sf(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new Sf(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"cs",value:function(e){var t=this,n=new So(new co([])),r=new Sf(n,e),i=new Sf(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"us",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new So(new co([])),n=new Sf(t,e),r=new Sf(t,e+1),i=ks();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Sf(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Sf=function(){function e(t,n){Ra(this,e),this.key=t,this.ls=n}return Aa(e,null,[{key:"ts",value:function(e,t){return So.comparator(e.key,t.key)||eo(e.ls,t.ls)}},{key:"ns",value:function(e,t){return eo(e.ls,t.ls)||So.comparator(e.key,t.key)}}]),e}(),If=function(){function e(t,n){Ra(this,e),this.Ht=t,this.referenceDelegate=n,this.In=[],this.fs=1,this.ds=new hs(Sf.ts)}return Aa(e,[{key:"checkEmpty",value:function(e){return Mc.resolve(0===this.In.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.In.length>0&&this.In[this.In.length-1];var a=new Qc(i,t,n,r);this.In.push(a);var o,u=pa(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new Sf(s.key,i)),this.Ht.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(e){u.e(e)}finally{u.f()}return Mc.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Mc.resolve(this.ws(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this._s(n),i=r<0?0:r;return Mc.resolve(this.In.length>i?this.In[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Mc.resolve(0===this.In.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Mc.resolve(this.In.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Sf(t,0),i=new Sf(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n.ws(e.ls);a.push(t)})),Mc.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new hs(eo);return t.forEach((function(e){var t=new Sf(e,0),i=new Sf(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Mc.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;So.isDocumentKey(i)||(i=i.child(""));var a=new Sf(new So(i),0),o=new hs(eo);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Mc.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ws(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Va(0===this.ys(t.batchId,"removed")),this.In.shift();var r=this.ds;return Mc.forEach(t.mutations,(function(i){var a=new Sf(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"te",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Sf(t,0),r=this.ds.firstAfterOrEqual(n);return Mc.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.In.length,Mc.resolve()}},{key:"ys",value:function(e,t){return this._s(e)}},{key:"_s",value:function(e){return 0===this.In.length?0:e-this.In[0].batchId}},{key:"ws",value:function(e){var t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}]),e}(),Tf=function(){function e(t,n){Ra(this,e),this.Ht=t,this.ps=n,this.docs=new cs(So.comparator),this.size=0}return Aa(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),a=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-a,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Mc.resolve(n?n.document.clone():Bo.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=vs();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():Bo.newInvalidDocument(e))})),Mc.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=vs(),i=new So(t.path.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||xu(t,c)&&(r=r.insert(c.key,c.clone()))}return Mc.resolve(r)}},{key:"Es",value:function(e,t){return Mc.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Rf(this)}},{key:"getSize",value:function(e){return Mc.resolve(this.size)}}]),e}(),Rf=function(e){ya(n,e);var t=ga(n);function n(e){var r;return Ra(this,n),(r=t.call(this)).Se=e,r}return Aa(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Se.addEntry(e,i.document,t.getReadTime(r))):t.Se.removeEntry(r)})),Mc.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Se.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Se.getEntries(e,t)}}]),n}(Fl),Nf=function(){function e(t){Ra(this,e),this.persistence=t,this.Ts=new Ul((function(e){return Ho(e)}),Ko),this.lastRemoteSnapshotVersion=io.min(),this.highestTargetId=0,this.Is=0,this.As=new Ef,this.targetCount=0,this.Rs=El.se()}return Aa(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Mc.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Mc.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Mc.resolve(this.Is)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Mc.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),Mc.resolve()}},{key:"ae",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new El(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ae(t),this.targetCount+=1,Mc.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ae(t),Mc.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Mc.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Mc.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Mc.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Mc.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Mc.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Mc.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.cs(t),Mc.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Mc.resolve(n)}},{key:"containsKey",value:function(e,t){return Mc.resolve(this.As.containsKey(t))}}]),e}(),Af=function(){function e(t,n){var r=this;Ra(this,e),this.bs={},this.Le=new Ya(0),this.Be=!1,this.Be=!0,this.referenceDelegate=t(this),this.ze=new Nf(this),this.Ht=new fl,this.He=function(e,t){return new Tf(e,(function(e){return r.referenceDelegate.Ps(e)}))}(this.Ht),this.N=new Yc(n),this.Je=new xf(this.N)}return Aa(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Be=!1,Promise.resolve()}},{key:"started",get:function(){return this.Be}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Ht}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new If(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.ze}},{key:"getRemoteDocumentCache",value:function(){return this.He}},{key:"getBundleCache",value:function(){return this.Je}},{key:"runTransaction",value:function(e,t,n){var r=this;La("MemoryPersistence","Starting transaction:",e);var i=new Cf(this.Le.next());return this.referenceDelegate.vs(),n(i).next((function(e){return r.referenceDelegate.Vs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ss",value:function(e,t){return Mc.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Cf=function(e){ya(n,e);var t=ga(n);function n(e){var r;return Ra(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return n}(Lc),Of=function(){function e(t){Ra(this,e),this.persistence=t,this.Ds=new Ef,this.Cs=null}return Aa(e,[{key:"xs",get:function(){if(this.Cs)return this.Cs;throw ja()}},{key:"addReference",value:function(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),Mc.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),Mc.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),Mc.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ds.cs(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"vs",value:function(){this.Cs=new Set}},{key:"Vs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mc.forEach(this.xs,(function(r){var i=So.fromPath(r);return t.ks(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Cs=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.ks(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))}},{key:"Ps",value:function(e){return 0}},{key:"ks",value:function(e,t){var n=this;return Mc.or([function(){return Mc.resolve(n.Ds.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ss(e,t)}])}}],[{key:"Ns",value:function(t){return new e(t)}}]),e}();function Pf(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Df(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Lf(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Mf=function(){function e(t,n,r,i){Ra(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Aa(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==da(a)&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==da(a.error));return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new za(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ma("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Uf=function(){function e(t,n,r){Ra(this,e),this.targetId=t,this.state=n,this.error=r}return Aa(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"$s",value:function(t,n){var r,i=JSON.parse(n),a="object"==da(i)&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==da(i.error));return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new za(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ma("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Ff=function(){function e(t,n){Ra(this,e),this.clientId=t,this.activeTargetIds=n}return Aa(e,null,[{key:"$s",value:function(t,n){for(var r=JSON.parse(n),i="object"==da(r)&&r.activeTargetIds instanceof Array,a=xs(),o=0;i&&o<r.activeTargetIds.length;++o)i=Eo(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ma("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),jf=function(){function e(t,n){Ra(this,e),this.clientId=t,this.onlineState=n}return Aa(e,null,[{key:"$s",value:function(t){var n=JSON.parse(t);return"object"==da(n)&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ma("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Vf=function(){function e(){Ra(this,e),this.activeTargetIds=xs()}return Aa(e,[{key:"Fs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),qf=function(){function e(t,n,r,i,a){Ra(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Ls=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new cs(eo),this.started=!1,this.Ks=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.js=Pf(this.persistenceKey,this.Ls),this.Qs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new Vf),this.Ws=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Gs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.zs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Hs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Js=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}var t,n;return Aa(e,[{key:"start",value:(n=ma(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.pn();case 2:t=e.sent,n=pa(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.Ls){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Pf(this.persistenceKey,i)))&&(o=Ff.$s(i,a))&&(this.qs=this.qs.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Ys(),(u=this.storage.getItem(this.Hs))&&(s=this.Xs(u))&&this.Zs(s),c=pa(this.Ks);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Us(f)}catch(e){c.e(e)}finally{c.f()}this.Ks=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])}))),function(){return n.apply(this,arguments)})},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Qs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ti(this.qs)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.qs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.ei(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ei(e,t,n),this.ni(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Lf(this.persistenceKey,e));if(n){var r=Uf.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}},{key:"removeLocalQueryTarget",value:function(e){this.si.Ms(e),this.Ys()}},{key:"isLocalQueryTarget",value:function(e){return this.si.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Lf(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ii(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.ni(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.ri(e)}},{key:"notifyBundleLoaded",value:function(){this.oi()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return La("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){La("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){La("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Us",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(La("SharedClientState","EVENT",n.key,n.newValue),n.key===this.js)return void Ma("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(ma(regeneratorRuntime.mark((function e(){var r,i,a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Ws.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ai(n.key),e.abrupt("return",t.ci(r,null));case 6:if(!(i=t.ui(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ci(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Gs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.hi(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.li(a));case 16:e.next=39;break;case 18:if(!t.zs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.fi(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.di(o));case 23:e.next=39;break;case 25:if(n.key!==t.Hs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Xs(n.newValue))){e.next=30;break}return e.abrupt("return",t.Zs(u));case 30:e.next=39;break;case 32:if(n.key!==t.Qs){e.next=37;break}s=function(e){var t=Ya.T;if(null!=e)try{var n=JSON.parse(e);Va("number"==typeof n),t=n}catch(e){Ma("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ya.T&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Js){e.next=39;break}return e.abrupt("return",t.syncEngine.wi());case 39:e.next=42;break;case 41:t.Ks.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"si",get:function(){return this.qs.get(this.Ls)}},{key:"Ys",value:function(){this.setItem(this.js,this.si.Os())}},{key:"ei",value:function(e,t,n){var r=new Mf(this.currentUser,e,t,n),i=Df(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"ni",value:function(e){var t=Df(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"ri",value:function(e){var t={clientId:this.Ls,onlineState:e};this.storage.setItem(this.Hs,JSON.stringify(t))}},{key:"ii",value:function(e,t,n){var r=Lf(this.persistenceKey,e),i=new Uf(e,t,n);this.setItem(r,i.Os())}},{key:"oi",value:function(){this.setItem(this.Js,"value-not-used")}},{key:"ai",value:function(e){var t=this.Ws.exec(e);return t?t[1]:null}},{key:"ui",value:function(e,t){var n=this.ai(e);return Ff.$s(n,t)}},{key:"hi",value:function(e,t){var n=this.Gs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Mf.$s(new Ca(i),r,t)}},{key:"fi",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]);return Uf.$s(r,t)}},{key:"Xs",value:function(e){return jf.$s(e)}},{key:"li",value:(t=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine._i(t.batchId,t.state,t.error));case 2:La("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"di",value:function(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}},{key:"ci",value:function(e,t){var n=this,r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.ti(this.qs),a=this.ti(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.gi(o,u).then((function(){n.qs=r}))}},{key:"Zs",value:function(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ti",value:function(e){var t=xs();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Bf=function(){function e(){Ra(this,e),this.yi=new Vf,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Aa(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.yi.Fs(e),this.pi[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.pi[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.yi.Ms(e)}},{key:"isLocalQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.pi[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.yi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.yi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.yi=new Vf,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),zf=function(){function e(){Ra(this,e)}return Aa(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Wf=function(){function e(){var t=this;Ra(this,e),this.Ti=function(){return t.Ii()},this.Ai=function(){return t.Ri()},this.bi=[],this.Pi()}return Aa(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}},{key:"Pi",value:function(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}},{key:"Ii",value:function(){La("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=pa(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(e){t.e(e)}finally{t.f()}}},{key:"Ri",value:function(){La("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=pa(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(e){t.e(e)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Hf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Kf=function(){function e(t){Ra(this,e),this.vi=t.vi,this.Vi=t.Vi}return Aa(e,[{key:"Si",value:function(e){this.Di=e}},{key:"Ci",value:function(e){this.Ni=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Vi()}},{key:"send",value:function(e){this.vi(e)}},{key:"ki",value:function(){this.Di()}},{key:"$i",value:function(e){this.Ni(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),Gf=function(e){ya(n,e);var t=ga(n);function n(e){var r;return Ra(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Aa(n,[{key:"qi",value:function(e,t,n,r){return new Promise((function(i,a){var o=new la;o.listenOnce(aa.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ia.NO_ERROR:var t=o.getResponseJson();La("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ia.TIMEOUT:La("Connection",'RPC "'+e+'" timed out'),a(new za(Ba.DEADLINE_EXCEEDED,"Request time out"));break;case ia.HTTP_ERROR:var n=o.getStatus();if(La("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ba).indexOf(t)>=0?t:Ba.UNKNOWN}(r.status);a(new za(u,r.message))}else a(new za(Ba.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new za(Ba.UNAVAILABLE,"Connection failed."));break;default:ja()}}finally{La("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ji",value:function(e,t){var n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=na(),i=ra(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new sa({})),this.Ui(a.initMessageHeaders,t),_()||S()||k().indexOf("Electron/")>=0||I()||k().indexOf("MSAppHost/")>=0||E()||(a.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");La("Connection","Creating WebChannel: "+o,a);var u=r.createWebChannel(o,a),s=!1,c=!1,l=new Kf({vi:function(e){c?La("Connection","Not sending because WebChannel is closed:",e):(s||(La("Connection","Opening WebChannel transport."),u.open(),s=!0),La("Connection","WebChannel sending:",e),u.send(e))},Vi:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,ca.EventType.OPEN,(function(){c||La("Connection","WebChannel transport opened.")})),f(u,ca.EventType.CLOSE,(function(){c||(c=!0,La("Connection","WebChannel transport closed"),l.$i())})),f(u,ca.EventType.ERROR,(function(e){c||(c=!0,Ua("Connection","WebChannel transport errored:",e),l.$i(new za(Ba.UNAVAILABLE,"The operation could not be completed")))})),f(u,ca.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];Va(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){La("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=ns[e];if(void 0!==t)return ss(t)}(a),s=i.message;void 0===o&&(o=Ba.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),c=!0,l.$i(new za(o,s)),u.close()}else La("Connection","WebChannel received:",n),l.Oi(n)}})),f(i,oa.STAT_EVENT,(function(e){e.stat===ua.PROXY?La("Connection","Detected buffering proxy"):e.stat===ua.NOPROXY&&La("Connection","Detected no buffering proxy")})),setTimeout((function(){l.ki()}),0),l}}]),n}(function(){function e(t){Ra(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.Fi=n+"://"+t.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Aa(e,[{key:"Li",value:function(e,t,n,r){var i=this.Bi(e,t);La("RestConnection","Sending: ",i,n);var a={};return this.Ui(a,r),this.qi(e,i,a,n).then((function(e){return La("RestConnection","Received: ",e),e}),(function(t){throw Ua("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t}))}},{key:"Ki",value:function(e,t,n,r){return this.Li(e,t,n,r)}},{key:"Ui",value:function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Oa,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}},{key:"Bi",value:function(e,t){var n=Hf[e];return"".concat(this.Fi,"/v1/").concat(t,":").concat(n)}}]),e}());function Qf(){return"undefined"!=typeof window?window:null}function $f(){return"undefined"!=typeof document?document:null}function Jf(e){return new Ls(e,!0)}var Yf=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Ra(this,e),this.Oe=t,this.timerId=n,this.Qi=r,this.Wi=i,this.Gi=a,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}return Aa(e,[{key:"reset",value:function(){this.zi=0}},{key:"Yi",value:function(){this.zi=this.Gi}},{key:"Xi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),i=Math.max(0,n-r);i>0&&La("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.zi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,i,(function(){return t.Ji=Date.now(),e()})),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}},{key:"tr",value:function(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}},{key:"cancel",value:function(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}},{key:"Zi",value:function(){return(Math.random()-.5)*this.zi}}]),e}(),Xf=function(){function e(t,n,r,i,a,o){Ra(this,e),this.Oe=t,this.er=r,this.nr=i,this.credentialsProvider=a,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Yf(t,n)}var t,n,r;return Aa(e,[{key:"ar",value:function(){return 1===this.state||2===this.state||4===this.state}},{key:"cr",value:function(){return 2===this.state}},{key:"start",value:function(){3!==this.state?this.auth():this.ur()}},{key:"stop",value:(r=ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ar(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"hr",value:function(){this.state=0,this.rr.reset()}},{key:"lr",value:function(){var e=this;this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,(function(){return e.dr()})))}},{key:"wr",value:function(e){this._r(),this.stream.send(e)}},{key:"dr",value:(n=ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cr()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_r",value:function(){this.ir&&(this.ir.cancel(),this.ir=null)}},{key:"close",value:(t=ma(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():n&&n.code===Ba.RESOURCE_EXHAUSTED?(Ma(n.toString()),Ma("Using maximum backoff delay to prevent overloading the backend."),this.rr.Yi()):n&&n.code===Ba.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,e.next=8,this.listener.Ci(n);case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"mr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.gr(this.sr),n=this.sr;this.credentialsProvider.getToken().then((function(t){e.sr===n&&e.yr(t)}),(function(n){t((function(){var t=new za(Ba.UNKNOWN,"Fetching auth token failed: "+n.message);return e.pr(t)}))}))}},{key:"yr",value:function(e){var t=this,n=this.gr(this.sr);this.stream=this.Er(e),this.stream.Si((function(){n((function(){return t.state=2,t.listener.Si()}))})),this.stream.Ci((function(e){n((function(){return t.pr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))}},{key:"ur",value:function(){var e=this;this.state=4,this.rr.Xi(ma(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"pr",value:function(e){return La("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(3,e)}},{key:"gr",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget((function(){return t.sr===e?n():(La("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Zf=function(e){ya(n,e);var t=ga(n);function n(e,r,i,a,o){var u;return Ra(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",r,i,o)).N=a,u}return Aa(n,[{key:"Er",value:function(e){return this.nr.ji("Listen",e)}},{key:"onMessage",value:function(e){this.rr.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ja()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.D?(Va(void 0===t||"string"==typeof t),po.fromBase64String(t||"")):(Va(void 0===t||t instanceof Uint8Array),po.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ba.UNKNOWN:ss(e.code);return new za(t,e.message||"")}(o);n=new Rs(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=zs(e,s.document.name),l=js(s.document.updateTime),f=new Vo({mapValue:{fields:s.document.fields}}),h=Bo.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Is(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=zs(e,v.document),y=v.readTime?js(v.readTime):io.min(),g=Bo.newNoDocument(m,y),b=v.removedTargetIds||[];n=new Is([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var k=zs(e,w.document),_=w.removedTargetIds||[];n=new Is([],_,k,null)}else{if(!("filter"in t))return ja();t.filter;var x=t.filter;x.targetId;var E=x.count||0,S=new os(E),I=x.targetId;n=new Ts(I,S)}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return io.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?io.min():t.readTime?js(t.readTime):io.min()}(e);return this.listener.Tr(t,n)}},{key:"Ir",value:function(e){var t={};t.database=Ks(this.N),t.addTarget=function(e,t){var n,r=t.target;return(n=Go(r)?{documents:Zs(e,r)}:{query:ec(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Us(e,t.resumeToken):t.snapshotVersion.compareTo(io.min())>0&&(n.readTime=Ms(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ja()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.N,e);n&&(t.labels=n),this.wr(t)}},{key:"Ar",value:function(e){var t={};t.database=Ks(this.N),t.removeTarget=e,this.wr(t)}}]),n}(Xf),eh=function(e){ya(n,e);var t=ga(n);function n(e,r,i,a,o){var u;return Ra(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",r,i,o)).N=a,u.Rr=!1,u}return Aa(n,[{key:"br",get:function(){return this.Rr}},{key:"start",value:function(){this.Rr=!1,this.lastStreamToken=void 0,fa(Ea(n.prototype),"start",this).call(this)}},{key:"mr",value:function(){this.Rr&&this.Pr([])}},{key:"Er",value:function(e){return this.nr.ji("Write",e)}},{key:"onMessage",value:function(e){if(Va(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();var t=function(e,t){return e&&e.length>0?(Va(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?js(e.updateTime):js(t);return n.isEqual(io.min())&&(n=js(t)),new Bu(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=js(e.commitTime);return this.listener.vr(n,t)}return Va(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()}},{key:"Sr",value:function(){var e={};e.database=Ks(this.N),this.wr(e)}},{key:"Pr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ys(t.N,e)}))};this.wr(n)}}]),n}(Xf),th=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a;return Ra(this,n),(a=t.call(this)).credentials=e,a.nr=r,a.N=i,a.Dr=!1,a}return Aa(n,[{key:"Cr",value:function(){if(this.Dr)throw new za(Ba.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Li",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.nr.Li(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ba.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new za(Ba.UNKNOWN,e.toString())}))}},{key:"Ki",value:function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.nr.Ki(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ba.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new za(Ba.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Dr=!0}}]),n}(function(){return function e(){Ra(this,e)}}()),nh=function(){function e(t,n){Ra(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}return Aa(e,[{key:"Or",value:function(){var e=this;0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.kr=null,e.Mr("Backend didn't respond within 10 seconds."),e.Fr("Offline"),Promise.resolve()})))}},{key:"Lr",value:function(e){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Fr("Offline")))}},{key:"set",value:function(e){this.Br(),this.Nr=0,"Online"===e&&(this.$r=!1),this.Fr(e)}},{key:"Fr",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Mr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.$r?(Ma(t),this.$r=!1):La("OnlineStateTracker",t)}},{key:"Br",value:function(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}]),e}(),rh=function e(t,n,r,i,a){var o=this;Ra(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=a,this.Qr.Ei((function(e){r.enqueueAndForget(ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=ph(o),!e.t0){e.next=5;break}return La("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=ma(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=qa(t)).Kr.add(4),e.next=4,oh(n);case 4:return n.Wr.set("Unknown"),n.Kr.delete(4),e.next=8,ih(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Wr=new nh(r,i)};function ih(e){return ah.apply(this,arguments)}function ah(){return(ah=ma(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ph(t)){e.next=18;break}n=pa(t.jr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function oh(e){return uh.apply(this,arguments)}function uh(){return(uh=ma(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pa(t.jr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function sh(e,t){var n=qa(e);n.qr.has(t.targetId)||(n.qr.set(t.targetId,t),dh(n)?hh(n):qh(n).cr()&&lh(n,t))}function ch(e,t){var n=qa(e),r=qh(n);n.qr.delete(t),r.cr()&&fh(n,t),0===n.qr.size&&(r.cr()?r.lr():ph(n)&&n.Wr.set("Unknown"))}function lh(e,t){e.Gr.Y(t.targetId),qh(e).Ir(t)}function fh(e,t){e.Gr.Y(t),qh(e).Ar(t)}function hh(e){e.Gr=new As({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.qr.get(t)||null}}),qh(e).start(),e.Wr.Or()}function dh(e){return ph(e)&&!qh(e).ar()&&e.qr.size>0}function ph(e){return 0===qa(e).Kr.size}function vh(e){e.Gr=void 0}function mh(e){return yh.apply(this,arguments)}function yh(){return(yh=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.qr.forEach((function(e,n){lh(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gh(e,t){return bh.apply(this,arguments)}function bh(){return(bh=ma(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vh(t),dh(t)?(t.Wr.Lr(n),hh(t)):t.Wr.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wh(e,t,n){return kh.apply(this,arguments)}function kh(){return kh=ma(regeneratorRuntime.mark((function e(t,n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Wr.set("Online"),!(n instanceof Rs&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=pa(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qr.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qr.delete(o),t.Gr.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),La("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,_h(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof Is?t.Gr.rt(n):n instanceof Ts?t.Gr.ft(n):t.Gr.ct(n),r.isEqual(io.min())){e.next=29;break}return e.prev=14,e.next=17,uf(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Gr._t(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qr.get(r);i&&e.qr.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.qr.get(t);if(n){e.qr.set(t,n.withResumeToken(po.EMPTY_BYTE_STRING,n.snapshotVersion)),fh(e,t);var r=new Jc(n.target,t,1,n.sequenceNumber);lh(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),La("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,_h(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),kh.apply(this,arguments)}function _h(e,t,n){return xh.apply(this,arguments)}function xh(){return(xh=ma(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qc(n)){e.next=2;break}throw n;case 2:return t.Kr.add(1),e.next=5,oh(t);case 5:t.Wr.set("Offline"),r||(r=function(){return uf(t.localStore)}),t.asyncQueue.enqueueRetryable(ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return La("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Kr.delete(1),e.next=6,ih(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eh(e,t){return t().catch((function(n){return _h(e,n,t)}))}function Sh(e){return Ih.apply(this,arguments)}function Ih(){return(Ih=ma(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=qa(t),r=Bh(n),i=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;case 2:if(!Th(n)){e.next=19;break}return e.prev=3,e.next=6,lf(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Ur.length&&r.lr(),e.abrupt("break",19);case 10:i=a.batchId,Rh(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,_h(n,e.t0);case 17:e.next=2;break;case 19:Nh(n)&&Ah(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Th(e){return ph(e)&&e.Ur.length<10}function Rh(e,t){e.Ur.push(t);var n=Bh(e);n.cr()&&n.br&&n.Pr(t.mutations)}function Nh(e){return ph(e)&&!Bh(e).ar()&&e.Ur.length>0}function Ah(e){Bh(e).start()}function Ch(e){return Oh.apply(this,arguments)}function Oh(){return(Oh=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Bh(t).Sr();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ph(e){return Dh.apply(this,arguments)}function Dh(){return(Dh=ma(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Bh(t),r=pa(t.Ur);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Pr(a.mutations)}catch(e){r.e(e)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lh(e,t,n){return Mh.apply(this,arguments)}function Mh(){return(Mh=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Ur.shift(),a=$c.from(i,n,r),e.next=3,Eh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Sh(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uh(e,t){return Fh.apply(this,arguments)}function Fh(){return Fh=ma(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Bh(t).br,!e.t0){e.next=4;break}return e.next=4,function(){var e=ma(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!us(i=n.code)||i===Ba.ABORTED){e.next=7;break}return r=t.Ur.shift(),Bh(t).hr(),e.next=5,Eh(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Sh(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Nh(t)&&Ah(t);case 5:case"end":return e.stop()}}),e)}))),Fh.apply(this,arguments)}function jh(e,t){return Vh.apply(this,arguments)}function Vh(){return(Vh=ma(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qa(t),!n){e.next=7;break}return r.Kr.delete(2),e.next=5,ih(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Kr.add(2),e.next=12,oh(r);case 12:r.Wr.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qh(e){return e.zr||(e.zr=function(e,t,n){var r=qa(e);return r.Cr(),new Zf(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:mh.bind(null,e),Ci:gh.bind(null,e),Tr:wh.bind(null,e)}),e.jr.push(function(){var t=ma(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zr.hr(),dh(e)?hh(e):e.Wr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zr.stop();case 6:vh(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.zr}function Bh(e){return e.Hr||(e.Hr=function(e,t,n){var r=qa(e);return r.Cr(),new eh(t,r.nr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:Ch.bind(null,e),Ci:Uh.bind(null,e),Vr:Ph.bind(null,e),vr:Lh.bind(null,e)}),e.jr.push(function(){var t=ma(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Hr.hr(),t.next=4,Sh(e);case 4:t.next=9;break;case 6:return t.next=8,e.Hr.stop();case 8:e.Ur.length>0&&(La("RemoteStore","Stopping write stream with ".concat(e.Ur.length," pending writes")),e.Ur=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Hr}var zh=function(){function e(t,n,r,i,a){Ra(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Wa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Aa(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new za(Ba.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Wh(e,t){if(Ma("AsyncQueue","".concat(t,": ").concat(e)),qc(e))return new za(Ba.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Hh=function(){function e(t){Ra(this,e),this.comparator=t?function(e,n){return t(e,n)||So.comparator(e.key,n.key)}:function(e,t){return So.comparator(e.key,t.key)},this.keyedMap=ys(),this.sortedSet=new cs(this.comparator)}return Aa(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Kh=function(){function e(){Ra(this,e),this.Jr=new cs(So.comparator)}return Aa(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):ja():this.Jr=this.Jr.insert(t,e)}},{key:"Yr",value:function(){var e=[];return this.Jr.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Gh=function(){function e(t,n,r,i,a,o,u,s){Ra(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Aa(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Hh.emptySet(n),a,r,i,!0,!1)}}]),e}(),Qh=function e(){Ra(this,e),this.Xr=void 0,this.listeners=[]},$h=function e(){Ra(this,e),this.queries=new Ul((function(e){return ku(e)}),wu),this.onlineState="Unknown",this.Zr=new Set};function Jh(e,t){return Yh.apply(this,arguments)}function Yh(){return(Yh=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qa(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Qh),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xr=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Wh(e.t0,"Initialization of query '".concat(_u(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.eo(r.onlineState),o.Xr&&n.no(o.Xr)&&nd(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function Xh(e,t){return Zh.apply(this,arguments)}function Zh(){return(Zh=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qa(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ed(e,t){var n,r=qa(e),i=!1,a=pa(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=pa(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.no(o)&&(i=!0)}}catch(e){l.e(e)}finally{l.f()}s.Xr=o}}}catch(e){a.e(e)}finally{a.f()}i&&nd(r)}function td(e,t,n){var r=qa(e),i=r.queries.get(t);if(i){var a,o=pa(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(e){o.e(e)}finally{o.f()}}r.queries.delete(t)}function nd(e){e.Zr.forEach((function(e){e.next()}))}var rd=function(){function e(t,n,r){Ra(this,e),this.query=t,this.so=n,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=r||{}}return Aa(e,[{key:"no",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=pa(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(e){r.e(e)}finally{r.f()}e=new Gh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.io?this.oo(e)&&(this.so.next(e),a=!0):this.ao(e,this.onlineState)&&(this.co(e),a=!0),this.ro=e,a}},{key:"onError",value:function(e){this.so.error(e)}},{key:"eo",value:function(e){this.onlineState=e;var t=!1;return this.ro&&!this.io&&this.ao(this.ro,e)&&(this.co(this.ro),t=!0),t}},{key:"ao",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.uo&&n||e.docs.isEmpty()&&"Offline"!==t)}},{key:"oo",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"co",value:function(e){e=Gh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)}}]),e}(),id=function(){function e(t,n){Ra(this,e),this.payload=t,this.byteLength=n}return Aa(e,[{key:"ho",value:function(){return"metadata"in this.payload}}]),e}(),ad=function(){function e(t){Ra(this,e),this.N=t}return Aa(e,[{key:"zn",value:function(e){return zs(this.N,e)}},{key:"Hn",value:function(e){return e.metadata.exists?$s(this.N,e.document,!1):Bo.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}},{key:"Jn",value:function(e){return js(e)}}]),e}(),od=function(){function e(t,n,r){Ra(this,e),this.lo=t,this.localStore=n,this.N=r,this.queries=[],this.documents=[],this.progress=ud(t)}var t;return Aa(e,[{key:"fo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"wo",value:function(e){var t,n=new Map,r=new ad(this.N),i=pa(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.zn(a.metadata.name),s=pa(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||ks()).add(u);n.set(c,l)}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){i.e(e)}finally{i.f()}return n}},{key:"complete",value:(t=ma(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bf(this.localStore,new ad(this.N),this.documents,this.lo.id);case 2:t=e.sent,n=this.wo(this.documents),r=pa(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,kf(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Yl(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])}))),function(){return t.apply(this,arguments)})}]),e}();function ud(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var sd=function e(t){Ra(this,e),this.key=t},cd=function e(t){Ra(this,e),this.key=t},ld=function(){function e(t,n){Ra(this,e),this.query=t,this._o=n,this.mo=null,this.current=!1,this.yo=ks(),this.mutatedKeys=ks(),this.po=Eu(t),this.Eo=new Hh(this.po)}return Aa(e,[{key:"To",get:function(){return this._o}},{key:"Io",value:function(e,t){var n=this,r=t?t.Ao:new Kh,i=t?t.Eo:this.Eo,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=hu(this.query)&&i.size===this.query.limit?i.last():null,c=du(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=xu(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ro(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.po(f,s)>0||c&&n.po(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),hu(this.query)||du(this.query))for(;o.size>this.query.limit;){var l=hu(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Eo:o,Ao:r,Ln:u,mutatedKeys:a}}},{key:"Ro",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;var a=e.Ao.Yr();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ja()}};return n(e)-n(t)}(e.type,t.type)||r.po(e.doc,t.doc)})),this.bo(n);var o=t?this.Po():[],u=0===this.yo.size&&this.current?1:0,s=u!==this.mo;return this.mo=u,0!==a.length||s?{snapshot:new Gh(this.query,e.Eo,i,a,e.mutatedKeys,0===u,s,!1),vo:o}:{vo:o}}},{key:"eo",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Kh,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}},{key:"Vo",value:function(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations}},{key:"bo",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._o=t._o.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t._o=t._o.delete(e)})),this.current=e.current)}},{key:"Po",value:function(){var e=this;if(!this.current)return[];var t=this.yo;this.yo=ks(),this.Eo.forEach((function(t){e.Vo(t.key)&&(e.yo=e.yo.add(t.key))}));var n=[];return t.forEach((function(t){e.yo.has(t)||n.push(new cd(t))})),this.yo.forEach((function(e){t.has(e)||n.push(new sd(e))})),n}},{key:"So",value:function(e){this._o=e.Gn,this.yo=ks();var t=this.Io(e.documents);return this.applyChanges(t,!0)}},{key:"Do",value:function(){return Gh.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}]),e}(),fd=function e(t,n,r){Ra(this,e),this.query=t,this.targetId=n,this.view=r},hd=function e(t){Ra(this,e),this.key=t,this.Co=!1},dd=function(){function e(t,n,r,i,a,o){Ra(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.No={},this.xo=new Ul((function(e){return ku(e)}),wu),this.ko=new Map,this.$o=new Set,this.Oo=new cs(So.comparator),this.Fo=new Map,this.Mo=new Ef,this.Lo={},this.Bo=new Map,this.Uo=El.ie(),this.onlineState="Unknown",this.qo=void 0}return Aa(e,[{key:"isPrimaryClient",get:function(){return!0===this.qo}}]),e}();function pd(e,t){return vd.apply(this,arguments)}function vd(){return(vd=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=up(t),!(o=r.xo.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Do(),e.next=15;break;case 6:return e.next=8,ff(r.localStore,gu(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,md(r,n,i,"current"===s);case 13:a=e.sent,r.isPrimaryClient&&sh(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function md(e,t,n,r){return yd.apply(this,arguments)}function yd(){return yd=ma(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,u,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ko=function(e,n,r){return(i=ma(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Io(r),e.t0=a.Ln,!e.t0){e.next=6;break}return e.next=5,pf(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Io(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Ud(t,n.targetId,u.vo),u.snapshot));case 8:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,pf(t.localStore,n,!0);case 3:return a=e.sent,o=new ld(n,a.Gn),u=o.Io(a.documents),s=Ss.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Ud(t,r,c.vo),l=new fd(n,r,o),e.abrupt("return",(t.xo.set(n,l),t.ko.has(r)?t.ko.get(r).push(n):t.ko.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),yd.apply(this,arguments)}function gd(e,t){return bd.apply(this,arguments)}function bd(){return(bd=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=qa(t),i=r.xo.get(n),!((a=r.ko.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ko.set(i.targetId,a.filter((function(e){return!wu(e,n)}))),void r.xo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,hf(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),ch(r.remoteStore,i.targetId),Ld(r,i.targetId)})).catch(Nl);case 9:e.next=14;break;case 11:return Ld(r,i.targetId),e.next=14,hf(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wd(e,t,n){return kd.apply(this,arguments)}function kd(){return(kd=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sp(t),e.prev=1,e.next=4,function(e,t){var n,r=qa(e),i=ro.now(),a=t.reduce((function(e,t){return e.add(t.key)}),ks());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Qn.Pn(e,a).next((function(a){n=a;var o,u=[],s=pa(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Qu(c,n.get(c.key));null!=l&&u.push(new Xu(c.key,l,qo(l.value.mapValue),zu.exists(!0)))}}catch(e){s.e(e)}finally{s.f()}return r.In.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Lo[e.currentUser.toKey()];r||(r=new cs(eo)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Vd(i,a.changes);case 9:return e.next=11,Sh(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Wh(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function _d(e,t){return xd.apply(this,arguments)}function xd(){return(xd=ma(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),e.prev=1,e.next=4,sf(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Fo.get(t);n&&(Va(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Co=!0:e.modifiedDocuments.size>0?Va(n.Co):e.removedDocuments.size>0&&(Va(n.Co),n.Co=!1))})),e.next=8,Vd(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Nl(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function Ed(e,t,n){var r=qa(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.xo.forEach((function(e,n){var r=n.view.eo(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=qa(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=pa(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.eo(t)&&(r=!0)}}catch(e){a.e(e)}finally{a.f()}})),r&&nd(n)}(r.eventManager,t),i.length&&r.No.Tr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Sd(e,t,n){return Id.apply(this,arguments)}function Id(){return(Id=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=qa(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Fo.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new cs(So.comparator)).insert(o,Bo.newNoDocument(o,io.min())),s=ks().add(o),c=new Es(io.min(),new Map,new hs(eo),u,s),e.next=9,_d(i,c);case 9:i.Oo=i.Oo.remove(o),i.Fo.delete(n),jd(i),e.next=16;break;case 14:return e.next=16,hf(i.localStore,n,!1).then((function(){return Ld(i,n,r)})).catch(Nl);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Td(e,t){return Rd.apply(this,arguments)}function Rd(){return(Rd=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),i=n.batch.batchId,e.prev=1,e.next=4,of(r.localStore,n);case 4:return a=e.sent,Dd(r,i,null),Pd(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Vd(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Nl(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Nd(e,t,n){return Ad.apply(this,arguments)}function Ad(){return(Ad=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=qa(t),e.prev=1,e.next=4,function(e,t){var n=qa(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.In.lookupMutationBatch(e,t).next((function(t){return Va(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t)})).next((function(){return n.In.performConsistencyCheck(e)})).next((function(){return n.Qn.Pn(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Dd(i,n,r),Pd(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Vd(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Nl(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function Cd(e,t){return Od.apply(this,arguments)}function Od(){return(Od=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ph((r=qa(t)).remoteStore)||La("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=qa(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.In.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Bo.get(i)||[]).push(n),r.Bo.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Wh(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function Pd(e,t){(e.Bo.get(t)||[]).forEach((function(e){e.resolve()})),e.Bo.delete(t)}function Dd(e,t,n){var r=qa(e),i=r.Lo[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function Ld(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=pa(e.ko.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.xo.delete(a),n&&e.No.jo(a,n)}}catch(e){i.e(e)}finally{i.f()}e.ko.delete(t),e.isPrimaryClient&&e.Mo.cs(t).forEach((function(t){e.Mo.containsKey(t)||Md(e,t)}))}function Md(e,t){e.$o.delete(t.path.canonicalString());var n=e.Oo.get(t);null!==n&&(ch(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.Fo.delete(n),jd(e))}function Ud(e,t,n){var r,i=pa(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof sd?(e.Mo.addReference(a.key,t),Fd(e,a)):a instanceof cd?(La("SyncEngine","Document no longer in limbo: "+a.key),e.Mo.removeReference(a.key,t),e.Mo.containsKey(a.key)||Md(e,a.key)):ja()}}catch(e){i.e(e)}finally{i.f()}}function Fd(e,t){var n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.$o.has(r)||(La("SyncEngine","New document in limbo: "+n),e.$o.add(r),jd(e))}function jd(e){for(;e.$o.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){var t=e.$o.values().next().value;e.$o.delete(t);var n=new So(co.fromString(t)),r=e.Uo.next();e.Fo.set(r,new hd(n)),e.Oo=e.Oo.insert(n,r),sh(e.remoteStore,new Jc(gu(fu(n.path)),r,2,Ya.T))}}function Vd(e,t,n){return qd.apply(this,arguments)}function qd(){return qd=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=qa(t),a=[],o=[],u=[],e.t0=i.xo.isEmpty(),e.t0){e.next=9;break}return i.xo.forEach((function(e,t){u.push(i.Ko(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Zl.kn(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.No.Tr(a),e.next=9,function(){var e=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Mc.forEach(n,(function(t){return Mc.forEach(t.Nn,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Mc.forEach(t.xn,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),qc(e.t0)){e.next=10;break}throw e.t0;case 10:La("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=pa(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Un.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Un=r.Un.insert(u,l))}catch(e){i.e(e)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function Bd(e,t){return zd.apply(this,arguments)}function zd(){return(zd=ma(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=qa(t)).currentUser.isEqual(n)){e.next=11;break}return La("SyncEngine","User change. New user:",n.toKey()),e.next=5,rf(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Bo.forEach((function(e){e.forEach((function(e){e.reject(new za(Ba.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Bo.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Vd(r,i.Wn);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wd(e,t){var n=qa(e),r=n.Fo.get(t);if(r&&r.Co)return ks().add(r.key);var i=ks(),a=n.ko.get(t);if(!a)return i;var o,u=pa(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.xo.get(s);i=i.unionWith(c.view.To)}}catch(e){u.e(e)}finally{u.f()}return i}function Hd(e,t){return Kd.apply(this,arguments)}function Kd(){return(Kd=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),e.next=3,pf(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.So(i),e.abrupt("return",(r.isPrimaryClient&&Ud(r,n.targetId,a.vo),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gd(e){return Qd.apply(this,arguments)}function Qd(){return(Qd=ma(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qa(t),e.abrupt("return",mf(n.localStore).then((function(e){return Vd(n,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $d(e,t,n,r){return Jd.apply(this,arguments)}function Jd(){return(Jd=ma(regeneratorRuntime.mark((function e(t,n,r,i){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qa(t),e.next=3,function(e,t){var n=qa(e),r=qa(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Xt(e,t).next((function(t){return t?n.Qn.Pn(e,t):Mc.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Sh(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Dd(a,n,i||null),Pd(a,n),function(e,t){qa(qa(e).In).te(t)}(a.localStore,n)):ja();case 11:return e.next=13,Vd(a,o);case 13:e.next=16;break;case 15:La("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yd(e,t){return Xd.apply(this,arguments)}function Xd(){return(Xd=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(up(r=qa(t)),sp(r),!0!==n||!0===r.qo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Zd(r,i.toArray());case 5:return a=e.sent,r.qo=!0,e.next=9,jh(r.remoteStore,!0);case 9:o=pa(a);try{for(o.s();!(u=o.n()).done;)s=u.value,sh(r.remoteStore,s)}catch(e){o.e(e)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.qo){e.next=25;break}return c=[],l=Promise.resolve(),r.ko.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Ld(r,t),hf(r.localStore,t,!0)})),ch(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Zd(r,c);case 21:return function(e){var t=qa(e);t.Fo.forEach((function(e,n){ch(t.remoteStore,n)})),t.Mo.us(),t.Fo=new Map,t.Oo=new cs(So.comparator)}(r),r.qo=!1,e.next=25,jh(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zd(e,t,n){return ep.apply(this,arguments)}function ep(){return(ep=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=qa(t),a=[],o=[],u=pa(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ko.get(c))||0===f.length){e.next=34;break}return e.next=11,ff(i.localStore,gu(f[0]));case 11:l=e.sent,h=pa(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.xo.get(p),e.next=20,Hd(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,vf(i.localStore,c);case 36:return y=e.sent,e.next=39,ff(i.localStore,y);case 39:return l=e.sent,e.next=42,md(i,tp(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.No.Tr(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])})))).apply(this,arguments)}function tp(e){return lu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function np(e){var t=qa(e);return qa(qa(t.localStore).persistence).pn()}function rp(e,t,n,r){return ip.apply(this,arguments)}function ip(){return(ip=ma(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=qa(t)).qo){e.next=5;break}La("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.ko.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,mf(a.localStore);case 11:return o=e.sent,u=Es.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,Vd(a,o,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,hf(a.localStore,n,!0);case 18:return Ld(a,n,i),e.abrupt("break",21);case 20:ja();case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ap(e,t,n){return op.apply(this,arguments)}function op(){return(op=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=up(t)).qo){e.next=45;break}a=pa(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ko.has(u)){e.next=10;break}return La("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,vf(i.localStore,u);case 12:return s=e.sent,e.next=15,ff(i.localStore,s);case 15:return c=e.sent,e.next=18,md(i,tp(s),c.targetId,!1);case 18:sh(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=pa(r),e.prev=30,h=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ko.has(t),!e.t0){e.next=5;break}return e.next=5,hf(i.localStore,t,!1).then((function(){ch(i.remoteStore,t),Ld(i,t)})).catch(Nl);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function up(e){var t=qa(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=_d.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Sd.bind(null,t),t.No.Tr=ed.bind(null,t.eventManager),t.No.jo=td.bind(null,t.eventManager),t}function sp(e){var t=qa(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Td.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nd.bind(null,t),t}function cp(e,t,n){var r,i=qa(e);(r=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=qa(e),r=js(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Je.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(ud(i)),a=new od(i,t.localStore,n.N),e.next=14,n.Qo();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.fo(o);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Qo();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return s=e.sent,e.next=30,Vd(t,s.Tn,void 0);case 30:return e.next=32,function(e,t){var n=qa(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Je.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Ua("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])}))),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then((function(){i.sharedClientState.notifyBundleLoaded()}))}var lp=function(){function e(){Ra(this,e),this.synchronizeTabs=!1}var t,n;return Aa(e,[{key:"initialize",value:(n=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.N=Jf(t.databaseInfo.databaseId),this.sharedClientState=this.Wo(t),this.persistence=this.Go(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.zo(t),this.localStore=this.Ho(t);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"zo",value:function(e){return null}},{key:"Ho",value:function(e){return nf(this.persistence,new ef,e.initialUser,this.N)}},{key:"Go",value:function(e){return new Af(Of.Ns,this.N)}},{key:"Wo",value:function(e){return new Bf}},{key:"terminate",value:(t=ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),fp=function(e){ya(r,e);var t,n=ga(r);function r(e,t,i){var a;return Ra(this,r),(a=n.call(this)).Jo=e,a.cacheSizeBytes=t,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Aa(r,[{key:"initialize",value:(t=ma(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(Ea(r.prototype),"initialize",this).call(this,t);case 2:return e.next=4,yf(this.localStore);case 4:return e.next=6,this.Jo.initialize(this,t);case 6:return e.next=8,sp(this.Jo.syncEngine);case 8:return e.next=10,Sh(this.Jo.remoteStore);case 10:return e.next=12,this.persistence.nn((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"Ho",value:function(e){return nf(this.persistence,new ef,e.initialUser,this.N)}},{key:"zo",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Pl(t,e.asyncQueue)}},{key:"Go",value:function(e){var t=Jl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ml.withCacheSize(this.cacheSizeBytes):ml.DEFAULT;return new Gl(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Qf(),$f(),this.N,this.sharedClientState,!!this.forceOwnership)}},{key:"Wo",value:function(e){return new Bf}}]),r}(lp),hp=function(e){ya(r,e);var t,n=ga(r);function r(e,t){var i;return Ra(this,r),(i=n.call(this,e,t,!1)).Jo=e,i.cacheSizeBytes=t,i.synchronizeTabs=!0,i}return Aa(r,[{key:"initialize",value:(t=ma(regeneratorRuntime.mark((function e(t){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fa(Ea(r.prototype),"initialize",this).call(this,t);case 2:if(n=this.Jo.syncEngine,e.t0=this.sharedClientState instanceof qf,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={_i:$d.bind(null,n),mi:rp.bind(null,n),gi:ap.bind(null,n),pn:np.bind(null,n),wi:Gd.bind(null,n)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.nn(function(){var e=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yd(i.Jo.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"Wo",value:function(e){var t=Qf();if(!qf.bt(t))throw new za(Ba.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Jl(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qf(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),r}(fp),dp=function(){function e(){Ra(this,e)}var t;return Aa(e,[{key:"initialize",value:(t=ma(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ed(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Bd.bind(null,this.syncEngine),e.next=12,jh(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"createEventManager",value:function(e){return new $h}},{key:"createDatastore",value:function(e){var t,n=Jf(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Gf(t));return function(e,t,n){return new th(e,t,n)}(e.credentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ed(o.syncEngine,e,0)},a=Wf.bt()?new Wf:new zf,new rh(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new dd(e,t,n,r,i,a);return o&&(u.qo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return(e=ma(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qa(t),La("RemoteStore","RemoteStore shutting down."),n.Kr.add(5),e.next=5,oh(n);case 5:n.Qr.shutdown(),n.Wr.set("Unknown");case 7:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();function pp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return ma(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var vp=function(){function e(t){Ra(this,e),this.observer=t,this.muted=!1}return Aa(e,[{key:"next",value:function(e){this.observer.next&&this.Yo(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Xo",value:function(){this.muted=!0}},{key:"Yo",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),mp=function(){function e(t,n){var r=this;Ra(this,e),this.Zo=t,this.N=n,this.metadata=new Wa,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then((function(e){e&&e.ho()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}var t,n,r,i,a,o;return Aa(e,[{key:"close",value:function(){return this.Zo.cancel()}},{key:"getMetadata",value:(o=ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"Qo",value:(a=ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.ea());case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"ea",value:(i=ma(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.na();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ta.decode(t),r=Number(n),isNaN(r)&&this.sa("length string (".concat(n,") is not valid number")),e.next=9,this.ia(r);case 9:return i=e.sent,e.abrupt("return",new id(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"ra",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"na",value:(r=ma(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.ra()<0)){e.next=7;break}return e.next=3,this.oa();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.ra())<0&&this.sa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"ia",value:(n=ma(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.oa();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.sa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ta.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"sa",value:function(e){throw this.Zo.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"oa",value:(t=ma(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Zo.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),yp=function(){function e(t){Ra(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}var t,n;return Aa(e,[{key:"lookup",value:(n=ma(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new za(Ba.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),i=Ks(r.N)+"/documents",a={documents:n.map((function(e){return Bs(r.N,e)}))},e.next=5,r.Ki("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Js(r.N,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Va(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new is(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:(t=ma(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=So.fromPath(t);n.mutations.push(new as(r,n.precondition(r)))})),e.next=7,function(){var e=ma(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qa(t),i=Ks(r.N)+"/documents",a={writes:n.map((function(e){return Ys(r.N,e)}))},e.next=3,r.Li("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ja();t=io.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new za(Ba.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?zu.updateTime(t):zu.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(io.min()))throw new za(Ba.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zu.updateTime(t)}return zu.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),gp=function(){function e(t,n,r,i){Ra(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.aa=5,this.rr=new Yf(this.asyncQueue,"transaction_retry")}return Aa(e,[{key:"run",value:function(){this.aa-=1,this.ca()}},{key:"ca",value:function(){var e=this;this.rr.Xi(ma(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new yp(e.datastore),(r=e.ua(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.ha(t)}))}))})).catch((function(t){e.ha(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ua",value:function(e){try{var t=this.updateFunction(e);return!_o(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"ha",value:function(e){var t=this;this.aa>0&&this.la(e)?(this.aa-=1,this.asyncQueue.enqueueAndForget((function(){return t.ca(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"la",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!us(t)}return!1}}]),e}(),bp=function(){function e(t,n,r){var i=this;Ra(this,e),this.credentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ca.UNAUTHENTICATED,this.clientId=Za.I(),this.credentialListener=function(){return Promise.resolve()},this.credentials.start(n,function(){var e=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return La("FirestoreClient","Received user=",t.uid),e.next=3,i.credentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var t;return Aa(e,[{key:"getConfiguration",value:(t=ma(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"setCredentialChangeListener",value:function(e){this.credentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new za(Ba.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Wa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(ma(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.credentials.shutdown(),t.resolve(),n.next=17;break;case 13:n.prev=13,n.t2=n.catch(0),r=Wh(n.t2,"Failed to shutdown persistence"),t.reject(r);case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))),t.promise}}]),e}();function wp(e,t){return kp.apply(this,arguments)}function kp(){return kp=ma(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),La("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,rf(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),kp.apply(this,arguments)}function _p(e,t){return xp.apply(this,arguments)}function xp(){return xp=ma(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Ep(t);case 3:return r=e.sent,La("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return(t=ma(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=qa(t)).asyncQueue.verifyOperationInProgress(),La("RemoteStore","RemoteStore received new credentials"),i=ph(r),r.Kr.add(3),e.next=6,oh(r);case 6:return i&&r.Wr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Kr.delete(3),e.next=12,ih(r);case 12:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})(n.remoteStore,e);var t})),t.onlineComponents=n;case 12:case"end":return e.stop()}}),e)}))),xp.apply(this,arguments)}function Ep(e){return Sp.apply(this,arguments)}function Sp(){return(Sp=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return La("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,wp(t,new lp);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ip(e){return Tp.apply(this,arguments)}function Tp(){return(Tp=ma(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return La("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,_p(t,new dp);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rp(e){return Ep(e).then((function(e){return e.persistence}))}function Np(e){return Ep(e).then((function(e){return e.localStore}))}function Ap(e){return Ip(e).then((function(e){return e.remoteStore}))}function Cp(e){return Ip(e).then((function(e){return e.syncEngine}))}function Op(e){return Pp.apply(this,arguments)}function Pp(){return(Pp=ma(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ip(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=pd.bind(null,n.syncEngine),r.onUnlisten=gd.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Wa;return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new vp({next:function(a){t.enqueueAndForget((function(){return Xh(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new za(Ba.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new za(Ba.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new rd(fu(n.path),a,{includeMetadataChanges:!0,uo:!0});return Jh(e,o)},i.next=3,Op(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Lp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Wa;return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new vp({next:function(n){t.enqueueAndForget((function(){return Xh(e,o)})),n.fromCache&&"server"===r.source?i.reject(new za(Ba.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new rd(n,a,{includeMetadataChanges:!0,uo:!0});return Jh(e,o)},i.next=3,Op(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Mp=function e(t,n,r,i,a,o,u,s){Ra(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s},Up=function(){function e(t,n){Ra(this,e),this.projectId=t,this.database=n||"(default)"}return Aa(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),Fp=new Map;function jp(e,t,n){if(!n)throw new za(Ba.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Vp(e,t,n,r){if(!0===t&&!0===r)throw new za(Ba.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function qp(e){if(!So.isDocumentKey(e))throw new za(Ba.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Bp(e){if(So.isDocumentKey(e))throw new za(Ba.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function zp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==da(e)){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":ja()}function Wp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new za(Ba.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=zp(e);throw new za(Ba.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Hp(e,t){if(t<=0)throw new za(Ba.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Kp=function(){function e(t){var n;if(Ra(this,e),void 0===t.host){if(void 0!==t.ssl)throw new za(Ba.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new za(Ba.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Vp("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Aa(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Gp=function(){function e(t,n){Ra(this,e),this._credentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kp({}),this._settingsFrozen=!1,t instanceof Up?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new za(Ba.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Up(e.options.projectId)}(t))}return Aa(e,[{key:"app",get:function(){if(!this._app)throw new za(Ba.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new za(Ba.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kp(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Ka;switch(e.type){case"gapi":var t=e.client;return Va(!("object"!=da(t)||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ja(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new za(Ba.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Fp.get(e);t&&(La("ComponentProvider","Removing Datastore"),Fp.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Qp(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Wp(e,Gp))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ua("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ca.MOCK_USER;else{o=w(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new za(Ba.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ca(s)}e._credentials=new Ga(new Ha(o,u))}}var $p=function(){function e(t,n,r){Ra(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Aa(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Yp(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Jp=function(){function e(t,n,r){Ra(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Aa(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Yp=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a;return Ra(this,n),(a=t.call(this,e,r,fu(i)))._path=i,a.type="collection",a}return Aa(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new $p(this.firestore,null,new So(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Jp);function Xp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=q(e),jp("collection","path",t),e instanceof Gp){var a=co.fromString.apply(co,[t].concat(r));return Bp(a),new Yp(e,null,a)}if(!(e instanceof $p||e instanceof Yp))throw new za(Ba.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(co.fromString.apply(co,[t].concat(r)));return Bp(o),new Yp(e.firestore,null,o)}function Zp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=q(e),1===arguments.length&&(t=Za.I()),jp("doc","path",t),e instanceof Gp){var a=co.fromString.apply(co,[t].concat(r));return qp(a),new $p(e,null,new So(a))}if(!(e instanceof $p||e instanceof Yp))throw new za(Ba.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(co.fromString.apply(co,[t].concat(r)));return qp(o),new $p(e.firestore,e instanceof Yp?e.converter:null,new So(o))}function ev(e,t){return e=q(e),t=q(t),(e instanceof $p||e instanceof Yp)&&(t instanceof $p||t instanceof Yp)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function tv(e,t){return e=q(e),t=q(t),e instanceof Jp&&t instanceof Jp&&e.firestore===t.firestore&&wu(e._query,t._query)&&e.converter===t.converter}var nv=function(){function e(){var t=this;Ra(this,e),this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new Yf(this,"async_queue_retry"),this.Ea=function(){var e=$f();e&&La("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.tr()};var n=$f();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}var t,n;return Aa(e,[{key:"isShuttingDown",get:function(){return this.wa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ta(),this.Ia(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.wa){this.wa=!0,this.ya=e||!1;var t=$f();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ea)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ta(),this.wa)return new Promise((function(){}));var n=new Wa;return this.Ia((function(){return t.wa&&t.ya?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.da.push(e),t.Aa()}))}},{key:"Aa",value:(n=ma(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.da.length){e.next=14;break}return e.prev=1,e.next=4,this.da[0]();case 4:this.da.shift(),this.rr.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),qc(e.t0)){e.next=12;break}throw e.t0;case 12:La("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.da.length>0&&this.rr.Xi((function(){return t.Aa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(){return n.apply(this,arguments)})},{key:"Ia",value:function(e){var t=this,n=this.fa.then((function(){return t.ga=!0,e().catch((function(e){throw t.ma=e,t.ga=!1,Ma("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.ga=!1,e}))}));return this.fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ta(),this.pa.indexOf(e)>-1&&(t=0);var i=zh.createAndSchedule(this,e,t,n,(function(e){return r.Ra(e)}));return this._a.push(i),i}},{key:"Ta",value:function(){this.ma&&ja()}},{key:"verifyOperationInProgress",value:function(){}},{key:"ba",value:(t=ma(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.fa,e.next=3,t;case 3:if(t!==this.fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"Pa",value:function(e){var t,n=pa(this._a);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(e){n.e(e)}finally{n.f()}return!1}},{key:"va",value:function(e){var t=this;return this.ba().then((function(){t._a.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=pa(t._a);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(e){r.e(e)}finally{r.f()}return t.ba()}))}},{key:"Va",value:function(e){this.pa.push(e)}},{key:"Ra",value:function(e){var t=this._a.indexOf(e);this._a.splice(t,1)}}]),e}();function rv(e){return function(e,t){if("object"!=da(e)||null===e)return!1;var n,r=e,i=pa(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(e){i.e(e)}finally{i.f()}return!1}(e)}var iv=function(){function e(){Ra(this,e),this._progressObserver={},this._taskCompletionResolver=new Wa,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Aa(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),av=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,e,r)).type="firestore",i._queue=new nv,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return Aa(n,[{key:"_terminate",value:function(){return this._firestoreClient||uv(this),this._firestoreClient.terminate()}}]),n}(Gp);function ov(e){return e._firestoreClient||uv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function uv(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Mp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new bp(e._credentials,e._queue,r)}function sv(e,t,n){var r=new Wa;return e.asyncQueue.enqueue(ma(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,wp(e,n);case 3:return i.next=5,_p(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ba.FAILED_PRECONDITION||e.code===Ba.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function cv(e){return function(e){return e.asyncQueue.enqueue(ma(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Rp(e);case 2:return n=t.sent,t.next=5,Ap(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=qa(e);return t.Kr.delete(0),ih(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(ov(e=Wp(e,av)))}function lv(e){return function(e){return e.asyncQueue.enqueue(ma(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Rp(e);case 2:return n=t.sent,t.next=5,Ap(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=ma(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=qa(t)).Kr.add(0),e.next=4,oh(n);case 4:n.Wr.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(ov(e=Wp(e,av)))}function fv(e,t){var n=ov(e=Wp(e,av)),r=new iv;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new mp(e,t)}(function(e,t){if(e instanceof Uint8Array)return pp(e,t);if(e instanceof ArrayBuffer)return pp(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Jf(t));e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=cp,t.next=3,Cp(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function hv(e,t){return function(e,t){return e.asyncQueue.enqueue(ma(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=qa(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Je.getNamedQuery(e,t)}))},n.next=3,Np(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(ov(e=Wp(e,av)),t).then((function(t){return t?new Jp(e,null,t.query):null}))}function dv(e){if(e._initialized||e._terminated)throw new za(Ba.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var pv=function(){function e(){Ra(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new za(Ba.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fo(n)}return Aa(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var vv=function(){function e(t){Ra(this,e),this._byteString=t}return Aa(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(po.fromBase64String(t))}catch(t){throw new za(Ba.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(po.fromUint8Array(t))}}]),e}(),mv=function e(t){Ra(this,e),this._methodName=t},yv=function(){function e(t,n){if(Ra(this,e),!isFinite(t)||t<-90||t>90)throw new za(Ba.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new za(Ba.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Aa(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return eo(this._lat,e._lat)||eo(this._long,e._long)}}]),e}(),gv=/^__.*__$/,bv=function(){function e(t,n,r){Ra(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Aa(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Xu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yu(e,this.data,t,this.fieldTransforms)}}]),e}(),wv=function(){function e(t,n,r){Ra(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Aa(e,[{key:"toMutation",value:function(e,t){return new Xu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function kv(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ja()}}var _v=function(){function e(t,n,r,i,a,o){Ra(this,e),this.settings=t,this.databaseId=n,this.N=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Sa(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Aa(e,[{key:"path",get:function(){return this.settings.path}},{key:"Da",get:function(){return this.settings.Da}},{key:"Ca",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.ka(e),r}},{key:"$a",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Ca({path:n,xa:!1});return r.Sa(),r}},{key:"Oa",value:function(e){return this.Ca({path:void 0,xa:!0})}},{key:"Fa",value:function(e){return Bv(e,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Sa",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ka(this.path.get(e))}},{key:"ka",value:function(e){if(0===e.length)throw this.Fa("Document fields must not be empty");if(kv(this.Da)&&gv.test(e))throw this.Fa('Document fields cannot begin and end with "__"')}}]),e}(),xv=function(){function e(t,n,r){Ra(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.N=r||Jf(t)}return Aa(e,[{key:"Ba",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _v({Da:e,methodName:t,La:n,path:fo.emptyPath(),xa:!1,Ma:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}]),e}();function Ev(e){var t=e._freezeSettings(),n=Jf(e._databaseId);return new xv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sv(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Ba(a.merge||a.mergeFields?2:0,t,n,i);Fv("Data must be an object, but it was:",o,r);var u,s,c=Mv(r,o);if(a.merge)u=new ho(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=pa(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=jv(t,d,n);if(!o.contains(p))throw new za(Ba.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));zv(f,p)||f.push(p)}}catch(e){h.e(e)}finally{h.f()}u=new ho(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new bv(new Vo(c),u,s)}var Iv=function(e){ya(n,e);var t=ga(n);function n(){return Ra(this,n),t.apply(this,arguments)}return Aa(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Da)throw 1===e.Da?e.Fa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Fa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(mv);function Tv(e,t,n){return new _v({Da:3,La:t.settings.La,methodName:e._methodName,xa:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}var Rv=function(e){ya(n,e);var t=ga(n);function n(){return Ra(this,n),t.apply(this,arguments)}return Aa(n,[{key:"_toFieldTransform",value:function(e){return new qu(e.path,new Pu)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(mv),Nv=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,e)).Ua=r,i}return Aa(n,[{key:"_toFieldTransform",value:function(e){var t=Tv(this,e,!0),n=this.Ua.map((function(e){return Lv(e,t)})),r=new Du(n);return new qu(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(mv),Av=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,e)).Ua=r,i}return Aa(n,[{key:"_toFieldTransform",value:function(e){var t=Tv(this,e,!0),n=this.Ua.map((function(e){return Lv(e,t)})),r=new Mu(n);return new qu(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(mv),Cv=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,e)).qa=r,i}return Aa(n,[{key:"_toFieldTransform",value:function(e){var t=new Fu(e.N,Ru(e.N,this.qa));return new qu(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(mv);function Ov(e,t,n,r){var i=e.Ba(1,t,n);Fv("Data must be an object, but it was:",i,r);var a=[],o=Vo.empty();oo(r,(function(e,r){var u=qv(t,e,n);r=q(r);var s=i.$a(u);if(r instanceof Iv)a.push(u);else{var c=Lv(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ho(a);return new wv(o,u,i.fieldTransforms)}function Pv(e,t,n,r,i,a){var o=e.Ba(1,t,n),u=[jv(t,r,n)],s=[i];if(a.length%2!=0)throw new za(Ba.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(jv(t,a[c])),s.push(a[c+1]);for(var l=[],f=Vo.empty(),h=u.length-1;h>=0;--h)if(!zv(l,u[h])){var d=u[h],p=s[h];p=q(p);var v=o.$a(d);if(p instanceof Iv)l.push(d);else{var m=Lv(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new ho(l);return new wv(f,y,o.fieldTransforms)}function Dv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Lv(n,e.Ba(r?4:3,t))}function Lv(e,t){if(Uv(e=q(e)))return Fv("Unsupported field value:",t,e),Mv(e,t);if(e instanceof mv)return function(e,t){if(!kv(t.Da))throw t.Fa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Fa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xa&&4!==t.Da)throw t.Fa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=pa(e);try{for(a.s();!(n=a.n()).done;){var o=Lv(n.value,t.Oa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(e){a.e(e)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=q(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ru(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=ro.fromDate(e);return{timestampValue:Ms(t.N,n)}}if(e instanceof ro){var r=new ro(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ms(t.N,r)}}if(e instanceof yv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof vv)return{bytesValue:Us(t.N,e._byteString)};if(e instanceof $p){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Fa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Vs(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Fa("Unsupported field value: ".concat(zp(e)))}(e,t)}function Mv(e,t){var n={};return uo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oo(e,(function(e,r){var i=Lv(r,t.Na(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Uv(e){return!("object"!=da(e)||null===e||e instanceof Array||e instanceof Date||e instanceof ro||e instanceof yv||e instanceof vv||e instanceof $p||e instanceof mv)}function Fv(e,t,n){if(!Uv(n)||!function(e){return"object"==da(e)&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=zp(n);throw"an object"===r?t.Fa(e+" a custom object"):t.Fa(e+" "+r)}}function jv(e,t,n){if((t=q(t))instanceof pv)return t._internalPath;if("string"==typeof t)return qv(e,t);throw Bv("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Vv=new RegExp("[~\\*/\\[\\]]");function qv(e,t,n){if(t.search(Vv)>=0)throw Bv("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ka(pv,Sa(t.split(".")))._internalPath}catch(r){throw Bv("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Bv(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new za(Ba.INVALID_ARGUMENT,u+e+s)}function zv(e,t){return e.some((function(e){return e.isEqual(t)}))}var Wv=function(){function e(t,n,r,i,a){Ra(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Aa(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new $p(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Hv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Kv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Hv=function(e){ya(n,e);var t=ga(n);function n(){return Ra(this,n),t.apply(this,arguments)}return Aa(n,[{key:"data",value:function(){return fa(Ea(n.prototype),"data",this).call(this)}}]),n}(Wv);function Kv(e,t){return"string"==typeof t?qv(e,t):t instanceof pv?t._internalPath:t._delegate._internalPath}var Gv=function(){function e(t,n){Ra(this,e),this.hasPendingWrites=t,this.fromCache=n}return Aa(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Qv=function(e){ya(n,e);var t=ga(n);function n(e,r,i,a,o,u){var s;return Ra(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Aa(n,[{key:"exists",value:function(){return fa(Ea(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new $v(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Kv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Wv),$v=function(e){ya(n,e);var t=ga(n);function n(){return Ra(this,n),t.apply(this,arguments)}return Aa(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fa(Ea(n.prototype),"data",this).call(this,e)}}]),n}(Qv),Jv=function(){function e(t,n,r,i){Ra(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gv(i.hasPendingWrites,i.fromCache),this.query=r}return Aa(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new $v(n._firestore,n._userDataWriter,r.key,r,new Gv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new za(Ba.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new $v(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new $v(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Yv(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Yv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ja()}}function Xv(e,t){return e instanceof Qv&&t instanceof Qv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Jv&&t instanceof Jv&&e._firestore===t._firestore&&tv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Zv(e){if(du(e)&&0===e.explicitOrderBy.length)throw new za(Ba.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var em=function e(){Ra(this,e)};function tm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var nm=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a;return Ra(this,n),(a=t.call(this)).Ka=e,a.ja=r,a.Qa=i,a.type="where",a}return Aa(n,[{key:"_apply",value:function(e){var t=Ev(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new za(Ba.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on FieldPath.documentId()."));if("in"===a||"not-in"===a){dm(o,a);var s,c=[],l=pa(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(hm(r,e,f))}}catch(e){l.e(e)}finally{l.f()}u={arrayValue:{values:c}}}else u=hm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||dm(o,a),u=Dv(n,"where",o,"in"===a||"not-in"===a);var h=Qo.create(i,a,u);return function(e,t){if(t.v()){var n=vu(e);if(null!==n&&!n.isEqual(t.field))throw new za(Ba.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=pu(e);null!==r&&pm(e,t.field,r)}var i=function(e,t){var n,r=pa(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(e){r.e(e)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new za(Ba.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new za(Ba.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Jp(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(em);var rm=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this)).Ka=e,i.Wa=r,i.type="orderBy",i}return Aa(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new za(Ba.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new za(Ba.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new au(t,n);return function(e,t){if(null===pu(e)){var n=vu(e);null!==n&&pm(e,n,t.field)}}(e,r),r}(e._query,this.Ka,this.Wa);return new Jp(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new cu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(em);var im=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a;return Ra(this,n),(a=t.call(this)).type=e,a.Ga=r,a.za=i,a}return Aa(n,[{key:"_apply",value:function(e){return new Jp(e.firestore,e.converter,bu(e._query,this.Ga,this.za))}}]),n}(em);var am=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a;return Ra(this,n),(a=t.call(this)).type=e,a.Ha=r,a.Ja=i,a}return Aa(n,[{key:"_apply",value:function(e){var t=fm(e,this.type,this.Ha,this.Ja);return new Jp(e.firestore,e.converter,function(e,t){return new cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(em);function om(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new am("startAt",t,!0)}function um(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new am("startAfter",t,!1)}var sm=function(e){ya(n,e);var t=ga(n);function n(e,r,i){var a;return Ra(this,n),(a=t.call(this)).type=e,a.Ha=r,a.Ja=i,a}return Aa(n,[{key:"_apply",value:function(e){var t=fm(e,this.type,this.Ha,this.Ja);return new Jp(e.firestore,e.converter,function(e,t){return new cu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(em);function cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sm("endBefore",t,!0)}function lm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new sm("endAt",t,!1)}function fm(e,t,n,r){if(n[0]=q(n[0]),n[0]instanceof Wv)return function(e,t,n,r,i){if(!r)throw new za(Ba.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=pa(yu(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Po(t,r.key));else{var c=r.data.field(s.field);if(bo(c))throw new za(Ba.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new za(Ba.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(e){u.e(e)}finally{u.f()}return new ru(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Ev(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new za(Ba.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new za(Ba.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(da(c)));if(!mu(e)&&-1!==c.indexOf("/"))throw new za(Ba.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(co.fromString(c));if(!So.isDocumentKey(l))throw new za(Ba.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new So(l);u.push(Po(t,f))}else{var h=Dv(n,r,c);u.push(h)}}return new ru(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function hm(e,t,n){if("string"==typeof(n=q(n))){if(""===n)throw new za(Ba.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!mu(t)&&-1!==n.indexOf("/"))throw new za(Ba.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(co.fromString(n));if(!So.isDocumentKey(r))throw new za(Ba.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Po(e,new So(r))}if(n instanceof $p)return Po(e,n._key);throw new za(Ba.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(zp(n),"."))}function dm(e,t){if(!Array.isArray(e)||0===e.length)throw new za(Ba.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new za(Ba.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function pm(e,t,n){if(!n.isEqual(t))throw new za(Ba.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var vm=function(){function e(){Ra(this,e)}return Aa(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ja()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return oo(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new yv(yo(e.latitude),yo(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=wo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ko(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=mo(e);return new ro(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=co.fromString(e);Va(hc(n));var r=new Up(n.get(1),n.get(3)),i=new So(n.popFirst(5));return r.isEqual(t)||Ma("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function mm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var ym=function(e){ya(n,e);var t=ga(n);function n(e){var r;return Ra(this,n),(r=t.call(this)).firestore=e,r}return Aa(n,[{key:"convertBytes",value:function(e){return new vv(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $p(this.firestore,null,t)}}]),n}(vm),gm=function(){function e(t,n){Ra(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ev(t)}return Aa(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=bm(e,this._firestore),i=mm(r.converter,t,n),a=Sv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,zu.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=bm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=q(t))||t instanceof pv?Pv(this._dataReader,"WriteBatch.update",i._key,t,n,o):Ov(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,zu.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=bm(e,this._firestore);return this._mutations=this._mutations.concat(new is(t._key,zu.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new za(Ba.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function bm(e,t){if((e=q(e)).firestore!==t)throw new za(Ba.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var wm=function(e){ya(n,e);var t=ga(n);function n(e){var r;return Ra(this,n),(r=t.call(this)).firestore=e,r}return Aa(n,[{key:"convertBytes",value:function(e){return new vv(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new $p(this.firestore,null,t)}}]),n}(vm);function km(e){e=Wp(e,$p);var t=Wp(e.firestore,av),n=ov(t),r=new wm(t);return function(e,t){var n=new Wa;return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=qa(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Qn.An(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new za(Ba.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Wh(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Np(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Qv(t,r,e._key,n,new Gv(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function _m(e){e=Wp(e,Jp);var t=Wp(e.firestore,av),n=ov(t),r=new wm(t);return function(e,t){var n=new Wa;return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=ma(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pf(t,n,!0);case 3:i=e.sent,a=new ld(n,i.Gn),o=a.Io(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Wh(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Np(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Jv(t,r,e,n)}))}function xm(e,t,n){e=Wp(e,$p);var r=Wp(e.firestore,av),i=mm(e.converter,t,n);return Tm(r,[Sv(Ev(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,zu.none())])}function Em(e,t,n){e=Wp(e,$p);for(var r=Wp(e.firestore,av),i=Ev(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Tm(r,[("string"==typeof(t=q(t))||t instanceof pv?Pv(i,"updateDoc",e._key,t,n,o):Ov(i,"updateDoc",e._key,t)).toMutation(e._key,zu.exists(!0))])}function Sm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=q(e);var u={includeMetadataChanges:!1},s=0;"object"!=da(n[s])||rv(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(rv(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof $p)l=Wp(e.firestore,av),f=fu(e._key.path),c={next:function(t){n[s]&&n[s](Rm(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Wp(e,Jp);l=Wp(p.firestore,av),f=p._query;var v=new wm(l);c={next:function(e){n[s]&&n[s](new Jv(l,v,p,e))},error:n[s+1],complete:n[s+2]},Zv(e._query)}return function(e,t,n,r){var i=new vp(r),a=new rd(t,i,n);return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Jh,t.next=3,Op(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Xo(),e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Xh,t.next=3,Op(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ov(l),f,h,c)}function Im(e,t){return function(e,t){var n=new vp(t);return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){qa(e).Zr.add(t),t.next()},t.next=3,Op(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Xo(),e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){qa(e).Zr.delete(t)},t.next=3,Op(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(ov(e=Wp(e,av)),rv(t)?t:{next:t})}function Tm(e,t){return function(e,t){var n=new Wa;return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=wd,r.next=3,Cp(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(ov(e),t)}function Rm(e,t,n){var r=n.docs.get(t._key),i=new wm(e);return new Qv(e,i,t._key,r,new Gv(n.hasPendingWrites,n.fromCache),t.converter)}var Nm=function(e){ya(n,e);var t=ga(n);function n(e,r){var i;return Ra(this,n),(i=t.call(this,e,r))._firestore=e,i}return Aa(n,[{key:"get",value:function(e){var t=this,r=bm(e,this._firestore),i=new wm(this._firestore);return fa(Ea(n.prototype),"get",this).call(this,e).then((function(e){return new Qv(t._firestore,i,r._key,e._document,new Gv(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Ra(this,e),this._firestore=t,this._transaction=n,this._dataReader=Ev(t)}return Aa(e,[{key:"get",value:function(e){var t=this,n=bm(e,this._firestore),r=new ym(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return ja();var i=e[0];if(i.isFoundDocument())return new Wv(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Wv(t._firestore,r,n._key,null,n.converter);throw ja()}))}},{key:"set",value:function(e,t,n){var r=bm(e,this._firestore),i=mm(r.converter,t,n),a=Sv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=bm(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=q(t))||t instanceof pv?Pv(this._dataReader,"Transaction.update",i._key,t,n,o):Ov(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=bm(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Am(e,t){return function(e,t){var n=new Wa;return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return Ip(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new gp(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(ov(e),(function(n){return t(new Nm(e,n))}))}function Cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Nv("arrayUnion",t)}function Om(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Av("arrayRemove",t)}function Pm(e,t,n){return Pm=Fm()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Lm(i,n.prototype),i},Pm.apply(null,arguments)}function Dm(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lm(e,t)}function Lm(e,t){return Lm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Lm(e,t)}function Mm(e){var t=Fm();return function(){var n,r=jm(e);if(t){var i=jm(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Um(this,n)}}function Um(e,t){if(t&&("object"===Bm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Fm(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function jm(e){return jm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},jm(e)}function Vm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function qm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bm(e){return Bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm(e)}function zm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hm(e,t,n){return t&&Wm(e.prototype,t),n&&Wm(e,n),e}!function(e){Oa=e}(Ae),ke(new B("firestore",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=new av(r,new Qa(e.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),i._setSettings(n),i}),"PUBLIC")),Me("@firebase/firestore","3.0.2",undefined);function Km(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new za("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Gm(){if("undefined"==typeof Uint8Array)throw new za("unimplemented","Uint8Arrays are not available in this environment.")}function Qm(){if("undefined"==typeof atob)throw new za("unimplemented","Blobs are unavailable in Firestore in this environment.")}var $m=function(){function e(t){zm(this,e),this._delegate=t}return Hm(e,[{key:"toBase64",value:function(){return Qm(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Gm(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Qm(),new e(vv.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Gm(),new e(vv.fromUint8Array(t))}}]),e}();function Jm(e){return function(e,t){if("object"!==Bm(e)||null===e)return!1;var n,r=e,i=Vm(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(e){i.e(e)}finally{i.f()}return!1}(e,["next","error","complete"])}var Ym=function(){function e(){zm(this,e)}return Hm(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){dv(e=Wp(e,av));var n=ov(e),r=e._freezeSettings(),i=new dp;return sv(n,i,new fp(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){dv(e=Wp(e,av));var t=ov(e),n=e._freezeSettings(),r=new dp;return sv(t,r,new hp(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new za(Ba.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Wa;return e._queue.enqueueAndForgetEvenWhileRestricted(ma(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=ma(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fc.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Fc.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Jl(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Xm=function(){function e(t,n,r){var i=this;zm(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Up||(this._appCompat=t)}return Hm(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ua("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Qp(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return cv(this._delegate)}},{key:"disableNetwork",value:function(){return lv(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Vp("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Wa;return e.asyncQueue.enqueueAndForget(ma(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Cd,n.next=3,Cp(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(ov(e=Wp(e,av)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Im(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new za("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new hy(this,Xp(this._delegate,e))}catch(e){throw iy(e,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new ry(this,Zp(this._delegate,e))}catch(e){throw iy(e,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new cy(this,function(e,t){if(e=Wp(e,Gp),jp("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new za(Ba.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Jp(e,null,function(e){return new cu(co.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw iy(e,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Am(this._delegate,(function(n){return e(new ey(t,n))}))}},{key:"batch",value:function(){var e=this;return ov(this._delegate),new ty(new gm(this._delegate,(function(t){return Tm(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return fv(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return hv(this._delegate,e).then((function(e){return e?new cy(t,e):null}))}}]),e}(),Zm=function(e){Dm(n,e);var t=Mm(n);function n(e){var r;return zm(this,n),(r=t.call(this)).firestore=e,r}return Hm(n,[{key:"convertBytes",value:function(e){return new $m(new vv(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return ry.forKey(t,this.firestore,null)}}]),n}(vm);var ey=function(){function e(t,n){zm(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Zm(t)}return Hm(e,[{key:"get",value:function(e){var t=this,n=dy(e);return this._delegate.get(n).then((function(e){return new uy(t._firestore,new Qv(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=dy(e);return n?(Km("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dy(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dy(e);return this._delegate.delete(t),this}}]),e}(),ty=function(){function e(t){zm(this,e),this._delegate=t}return Hm(e,[{key:"set",value:function(e,t,n){var r=dy(e);return n?(Km("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=dy(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=dy(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),ny=function(){function e(t,n,r){zm(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Hm(e,[{key:"fromFirestore",value:function(e,t){var n=new $v(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sy(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Zm(t),n),i.set(n,a)),a}}]),e}();ny.INSTANCES=new WeakMap;var ry=function(){function e(t,n){zm(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Zm(t)}return Hm(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new hy(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new hy(this.firestore,Xp(this._delegate,e))}catch(e){throw iy(e,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=q(e))instanceof $p&&ev(this._delegate,e)}},{key:"set",value:function(e,t){t=Km("DocumentReference.set",t);try{return t?xm(this._delegate,e,t):xm(this._delegate,e)}catch(e){throw iy(e,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Em(this._delegate,e):Em.apply(void 0,[this._delegate,e,t].concat(r))}catch(e){throw iy(e,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Tm(Wp(e.firestore,av),[new is(e._key,zu.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ay(n),a=oy(n,(function(t){return new uy(e.firestore,new Qv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Sm(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?km(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Wp(e,$p);var t=Wp(e.firestore,av);return Dp(ov(t),e._key,{source:"server"}).then((function(n){return Rm(t,e,n)}))}(this._delegate):function(e){e=Wp(e,$p);var t=Wp(e.firestore,av);return Dp(ov(t),e._key).then((function(n){return Rm(t,e,n)}))}(this._delegate)).then((function(e){return new uy(t.firestore,new Qv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ny.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new za("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new $p(n._delegate,r,new So(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new $p(n._delegate,r,t))}}]),e}();function iy(e,t,n){return e.message=e.message.replace(t,n),e}function ay(e){var t,n=Vm(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===Bm(r)&&!Jm(r))return r}}catch(e){n.e(e)}finally{n.f()}return{}}function oy(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Jm(e[0])?e[0]:Jm(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uy=function(){function e(t,n){zm(this,e),this._firestore=t,this._delegate=n}return Hm(e,[{key:"ref",get:function(){return new ry(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Xv(this._delegate,e._delegate)}}]),e}(),sy=function(e){Dm(n,e);var t=Mm(n);function n(){return zm(this,n),t.apply(this,arguments)}return Hm(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||ja()}(void 0!==t),t}}]),n}(uy),cy=function(){function e(t,n){zm(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Zm(t)}return Hm(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,tm(this._delegate,function(e,t,n){var r=t,i=Kv("where",e);return new nm(i,r,n)}(t,n,r)))}catch(e){throw iy(e,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,tm(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Kv("orderBy",e);return new rm(n,t)}(t,n)))}catch(e){throw iy(e,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,tm(this._delegate,function(e){return Hp("limit",e),new im("limit",e,"F")}(t)))}catch(e){throw iy(e,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,tm(this._delegate,function(e){return Hp("limitToLast",e),new im("limitToLast",e,"L")}(t)))}catch(e){throw iy(e,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,tm(this._delegate,om.apply(void 0,arguments)))}catch(e){throw iy(e,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,tm(this._delegate,um.apply(void 0,arguments)))}catch(e){throw iy(e,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,tm(this._delegate,cm.apply(void 0,arguments)))}catch(e){throw iy(e,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,tm(this._delegate,lm.apply(void 0,arguments)))}catch(e){throw iy(e,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return tv(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?_m(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Wp(e,Jp);var t=Wp(e.firestore,av),n=ov(t),r=new wm(t);return Lp(n,e._query,{source:"server"}).then((function(n){return new Jv(t,r,e,n)}))}(this._delegate):function(e){e=Wp(e,Jp);var t=Wp(e.firestore,av),n=ov(t),r=new wm(t);return Zv(e._query),Lp(n,e._query).then((function(n){return new Jv(t,r,e,n)}))}(this._delegate)).then((function(e){return new fy(t.firestore,new Jv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ay(n),a=oy(n,(function(t){return new fy(e.firestore,new Jv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Sm(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(ny.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),ly=function(){function e(t,n){zm(this,e),this._firestore=t,this._delegate=n}return Hm(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sy(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),fy=function(){function e(t,n){zm(this,e),this._firestore=t,this._delegate=n}return Hm(e,[{key:"query",get:function(){return new cy(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sy(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new ly(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sy(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Xv(this._delegate,e._delegate)}}]),e}(),hy=function(e){Dm(n,e);var t=Mm(n);function n(e,r){var i;return zm(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Hm(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new ry(this.firestore,e):null}},{key:"doc",value:function(e){try{return new ry(this.firestore,void 0===e?Zp(this._delegate):Zp(this._delegate,e))}catch(e){throw iy(e,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Wp(e.firestore,av),r=Zp(e),i=mm(e.converter,t);return Tm(n,[Sv(Ev(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,zu.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new ry(t.firestore,e)}))}},{key:"isEqual",value:function(e){return ev(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(ny.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(cy);function dy(e){return Wp(e,$p)}var py,vy,my={Firestore:Xm,GeoPoint:yv,Timestamp:ro,Blob:$m,Transaction:ey,WriteBatch:ty,DocumentReference:ry,DocumentSnapshot:uy,Query:cy,QueryDocumentSnapshot:sy,QuerySnapshot:fy,CollectionReference:hy,FieldPath:function(){function e(){zm(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Pm(pv,n)}return Hm(e,[{key:"isEqual",value:function(e){return(e=q(e))instanceof pv&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(fo.keyField().canonicalString())}}]),e}(),FieldValue:function(){function e(t){zm(this,e),this._delegate=t}return Hm(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Rv("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Iv("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Cm.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Om.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Cv("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),setLogLevel:function(e){!function(e){Pa.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};function yy(e){return function(e){if(Array.isArray(e))return xy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gy(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function by(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){gy(a,r,i,o,u,"next",e)}function u(e){gy(a,r,i,o,u,"throw",e)}o(void 0)}))}}function wy(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||_y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ky(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function _y(e,t){if(e){if("string"==typeof e)return xy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xy(e,t):void 0}}function xy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ey(e){return Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ey(e)}function Sy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ty(e,t,n){return t&&Iy(e.prototype,t),n&&Iy(e,n),e}function Ry(e,t){return Ry=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ry(e,t)}function Ny(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oy(e);if(t){var i=Oy(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ay(this,n)}}function Ay(e,t){if(t&&("object"===Ey(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Cy(e)}function Cy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oy(e){return Oy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Oy(e)}(function(e,t){e.INTERNAL.registerComponent(new B("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},my)))})(py=Qe,(function(e,t){return new Xm(e,t,new Ym)})),py.registerVersion("@firebase/firestore-compat","0.1.2"),function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(vy||(vy={}));var Py="firebasestorage.googleapis.com",Dy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ry(e,t)}(n,e);var t=Ny(n);function n(e,r){var i;return Sy(this,n),(i=t.call(this,Ly(e),"Firebase Storage: ".concat(r," (").concat(Ly(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(Cy(i),n.prototype),i}return Ty(n,[{key:"_codeEquals",value:function(e){return Ly(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(R);function Ly(e){return"storage/"+e}function My(){return new Dy("unknown","An unknown error occurred, please check the error payload for server response.")}function Uy(){return new Dy("canceled","User canceled the upload/download.")}function Fy(){return new Dy("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function jy(){return new Dy("no-download-url","The given file does not have any download URLs.")}function Vy(e){return new Dy("invalid-argument",e)}function qy(){return new Dy("app-deleted","The Firebase app was deleted.")}function By(e){return new Dy("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zy(e,t){return new Dy("invalid-format","String does not match format '"+e+"': "+t)}function Wy(e){throw new Dy("internal-error","Internal error: "+e)}var Hy=function(){function e(){var t=this;Sy(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=vy.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=vy.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=vy.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Ty(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Wy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Wy("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Wy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponseText",value:function(){if(!this.sent_)throw Wy("cannot .getResponseText() before sending");return this.xhr_.responseText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}();var Ky=function(){function e(){Sy(this,e)}return Ty(e,[{key:"createConnection",value:function(){return new Hy}}]),e}(),Gy=function(){function e(t,n){Sy(this,e),this.bucket=t,this.path_=n}return Ty(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(n){return new e(t,"")}if(""===r.path)return r;throw new Dy("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Py?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Dy("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Qy=function(){function e(t){Sy(this,e),this.promise_=Promise.reject(t)}return Ty(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function $y(e){return"string"==typeof e||e instanceof String}function Jy(e){return Yy()&&e instanceof Blob}function Yy(){return"undefined"!=typeof Blob}function Xy(e,t,n,r){if(r<t)throw Vy("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Vy("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Zy(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function eg(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}var tg=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this;Sy(this,e),this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=u,this.errorCallback_=s,this.progressCallback_=l,this.timeout_=c,this.pool_=f,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return Ty(e,[{key:"start_",value:function(){var e=this;function t(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponseText());!function(e){return void 0!==e}(o)?r():r(o)}catch(e){i(e)}else if(null!==a){var u=My();u.serverResponse=a.getResponseText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?qy():Uy());else i(new Dy("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?t(0,new ng(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=!1,o=0;function u(){return 2===o}var s=!1;function c(){if(!s){s=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function l(t){i=setTimeout((function(){i=null,e(f,u())}),t)}function f(e){if(!s){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var f;if(e)c.call.apply(c,[null,e].concat(n));else u()||a?c.call.apply(c,[null,e].concat(n)):(r<64&&(r*=2),1===o?(o=2,f=0):f=1e3*(r+Math.random()),l(f))}}var h=!1;function d(e){h||(h=!0,s||(null!==i?(e||(o=2),clearTimeout(i),l(0)):e||(o=1)))}return l(0),setTimeout((function(){a=!0,d(!0)}),n),d}((function(t,n){if(n)t(!1,new ng(!1,null,!0));else{var r=e.pool_.createConnection();e.pendingConnection_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===vy.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new ng(o,r))}else{var u=r.getErrorCode()===vy.ABORT;t(!1,new ng(!1,null,u))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),ng=function e(t,n,r){Sy(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r};function rg(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ig(){for(var e=rg(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Yy())return new Blob(n);throw new Dy("unsupported-environment","This browser doesn't seem to support creating Blobs")}var ag={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},og=function e(t,n){Sy(this,e),this.data=t,this.contentType=n||null};function ug(e,t){switch(e){case ag.RAW:return new og(sg(t));case ag.BASE64:case ag.BASE64URL:return new og(cg(e,t));case ag.DATA_URL:return new og((n=new lg(t)).base64?cg(ag.BASE64,n.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw zy(ag.DATA_URL,"Malformed data URL.")}return sg(t)}(n.rest),function(e){return new lg(e).contentType}(t))}var n;throw My()}function sg(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function cg(e,t){switch(e){case ag.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw zy(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case ag.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw zy(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(t){throw zy(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var lg=function e(t){Sy(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw zy(ag.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var fg=function(){function e(t,n){Sy(this,e);var r=0,i="";Jy(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return Ty(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Jy(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Yy()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(ig.apply(null,i))}var a=n.map((function(e){return $y(e)?ug(ag.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function hg(e){var t;try{t=JSON.parse(e)}catch(e){return null}return function(e){return"object"===Ey(e)&&!Array.isArray(e)}(t)?t:null}function dg(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function pg(e,t){return t}var vg=function e(t,n,r,i){Sy(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||pg},mg=null;function yg(){if(mg)return mg;var e=[];e.push(new vg("bucket")),e.push(new vg("generation")),e.push(new vg("metageneration")),e.push(new vg("name","fullPath",!0));var t=new vg("name");t.xform=function(e,t){return function(e){return!$y(e)||e.length<2?e:dg(e)}(t)},e.push(t);var n=new vg("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new vg("timeCreated")),e.push(new vg("updated")),e.push(new vg("md5Hash",null,!0)),e.push(new vg("cacheControl",null,!0)),e.push(new vg("contentDisposition",null,!0)),e.push(new vg("contentEncoding",null,!0)),e.push(new vg("contentLanguage",null,!0)),e.push(new vg("contentType",null,!0)),e.push(new vg("metadata","customMetadata",!0)),mg=e}function gg(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Gy(n,r);return t._makeStorageReference(i)}})}(r,e),r}function bg(e,t,n){var r=hg(t);return null===r?null:gg(e,r,n)}function wg(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function kg(e,t,n){var r=hg(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=ky(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new Gy(t,o));r.prefixes.push(u)}}catch(e){a.e(e)}finally{a.f()}}if(n.items){var s,c=ky(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new Gy(t,l.name));r.items.push(f)}}catch(e){c.e(e)}finally{c.f()}}return r}(e,t,r)}var _g=function e(t,n,r,i){Sy(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function xg(e){if(!e)throw My()}function Eg(e,t){return function(n,r){var i=bg(e,r,t);return xg(null!==i),i}}function Sg(e,t){return function(n,r){var i=bg(e,r,t);return xg(null!==i),function(e,t,n,r){var i=hg(t);if(null===i)return null;if(!$y(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Zy("/b/"+o(i)+"/o/"+o(a),n,r)+eg({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Ig(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getResponseText().includes("Firebase App Check token is invalid")?new Dy("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Dy("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Dy("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Dy("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Tg(e){var t=Ig(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Dy("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Rg(e,t,n){var r=Zy(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new _g(r,"GET",Eg(e,n),i);return a.errorHandler=Tg(t),a}function Ng(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Zy(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new _g(o,"GET",function(e,t){return function(n,r){var i=kg(e,t,r);return xg(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=Ig(t),s}function Ag(e,t,n){var r=Zy(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new _g(r,"GET",Sg(e,n),i);return a.errorHandler=Tg(t),a}function Cg(e,t,n,r){var i=Zy(t.fullServerUrl(),e.host,e._protocol),a=wg(n,r),o=e.maxOperationRetryTime,u=new _g(i,"PATCH",Eg(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=Tg(t),u}function Og(e,t){var n=Zy(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime;var i=new _g(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Tg(t),i}function Pg(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Dg(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=Pg(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wg(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=fg.getBlob(c,r,l);if(null===f)throw Fy();var h={name:s.fullPath},d=Zy(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new _g(d,"POST",Eg(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Ig(t),v}var Lg=function e(t,n,r,i){Sy(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null};function Mg(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){xg(!1)}return xg(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Ug=262144;function Fg(e,t,n,r,i,a,o,u){var s=new Lg(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new Dy("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw Fy();var v=t.maxUploadRetryTime,m=new _g(n,"POST",(function(e,n){var i,o=Mg(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?Eg(t,a)(e,n):null,new Lg(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=Ig(e),m}var jg={STATE_CHANGED:"state_changed"},Vg={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qg(e){switch(e){case"running":case"pausing":case"canceling":return Vg.RUNNING;case"paused":return Vg.PAUSED;case"success":return Vg.SUCCESS;case"canceled":return Vg.CANCELED;default:return Vg.ERROR}}var Bg=function e(t,n,r){Sy(this,e);var i=function(e){return"function"==typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!=n?n:void 0,this.complete=null!=r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}};function zg(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Wg=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Sy(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=yg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return Ty(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=wy(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Pg(t,r,i),u={name:o.fullPath},s=Zy(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=wg(o,n),f=e.maxUploadRetryTime,h=new _g(s,"POST",(function(e){var t;Mg(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){xg(!1)}return xg($y(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=Ig(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new _g(n,"POST",(function(e){var t=Mg(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){xg(!1)}n||xg(!1);var i=Number(n);return xg(!isNaN(i)),new Lg(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Ig(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Ug*this._chunkMultiplier,n=new Lg(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Fg(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(t){return e._error=t,void e._transition("error")}var u=e._ref.storage._makeRequest(o,i,a);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){Ug*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Rg(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Dg(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Uy(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=qg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Bg(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(qg(this._state)){case Vg.SUCCESS:zg(this._resolve.bind(null,this.snapshot))();break;case Vg.CANCELED:case Vg.ERROR:zg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(qg(this._state)){case Vg.RUNNING:case Vg.PAUSED:e.next&&zg(e.next.bind(e,this.snapshot))();break;case Vg.SUCCESS:e.complete&&zg(e.complete.bind(e))();break;default:e.error&&zg(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Hg=function(){function e(t,n){Sy(this,e),this._service=t,this._location=n instanceof Gy?n:Gy.makeFromUrl(n,t.host)}return Ty(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Gy(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return dg(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Gy(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw By(e)}}]),e}();function Kg(e,t,n){return Gg.apply(this,arguments)}function Gg(){return(Gg=by(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Qg(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,yy(u.prefixes)),(a=n.items).push.apply(a,yy(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,Kg(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qg(e,t){return $g.apply(this,arguments)}function $g(){return($g=by(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=n&&"number"==typeof n.maxResults&&Xy("options.maxResults",1,1e3,n.maxResults),r=n||{},i=Ng(t.storage,t._location,"/",r.pageToken,r.maxResults),e.next=5,t.storage.makeRequestWithTokens(i);case 5:return e.abrupt("return",e.sent.getPromise());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jg(){return(Jg=by(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._throwIfRoot("getMetadata"),n=Rg(t.storage,t._location,yg()),e.next=4,t.storage.makeRequestWithTokens(n);case 4:return e.abrupt("return",e.sent.getPromise());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yg(){return(Yg=by(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._throwIfRoot("updateMetadata"),r=Cg(t.storage,t._location,n,yg()),e.next=4,t.storage.makeRequestWithTokens(r);case 4:return e.abrupt("return",e.sent.getPromise());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xg(){return(Xg=by(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._throwIfRoot("getDownloadURL"),n=Ag(t.storage,t._location,yg()),e.next=4,t.storage.makeRequestWithTokens(n);case 4:return e.abrupt("return",e.sent.getPromise().then((function(e){if(null===e)throw jy();return e})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zg(){return(Zg=by(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._throwIfRoot("deleteObject"),n=Og(t.storage,t._location),e.next=4,t.storage.makeRequestWithTokens(n);case 4:return e.abrupt("return",e.sent.getPromise());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eb(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Gy(e._location.bucket,n);return new Hg(e.storage,r)}function tb(e,t){if(e instanceof ab){var n=e;if(null==n._bucket)throw new Dy("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Hg(n,n._bucket);return null!=t?tb(r,t):r}return void 0!==t?eb(e,t):e}function nb(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof ab)return new Hg(e,t);throw Vy("To use ref(service, url), the first argument must be a Storage instance.")}return tb(e,t)}function rb(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:Gy.makeFromBucketSpec(n,e)}function ib(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"==typeof i?i:w(i,e.app.options.projectId))}var ab=function(){function e(t,n,r,i,a,o){Sy(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._pool=i,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=Py,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?Gy.makeFromBucketSpec(a,this._host):rb(this._host,this.app.options)}var t,n,r;return Ty(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Gy.makeFromBucketSpec(this._url,e):this._bucket=rb(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Xy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Xy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:(r=by(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"_getAppCheckToken",value:(n=by(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Hg(this,e)}},{key:"_makeRequest",value:function(e,t,n){var r=this;if(this._deleted)return new Qy(qy());var i=function(e,t,n,r,i,a){var o=eg(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new tg(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i}},{key:"makeRequestWithTokens",value:(t=by(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return n=e.sent,r=wy(n,2),i=r[0],a=r[1],e.abrupt("return",this._makeRequest(t,i,a));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),ob="storage";function ub(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Wg(e,new fg(t),n)}(e=q(e),t,n)}function sb(e){return function(e){return Jg.apply(this,arguments)}(e=q(e))}function cb(e,t){return function(e,t){return Yg.apply(this,arguments)}(e=q(e),t)}function lb(e){return function(e){var t={prefixes:[],items:[]};return Kg(e,t).then((function(){return t}))}(e=q(e))}function fb(e){return function(e){return Xg.apply(this,arguments)}(e=q(e))}function hb(e){return function(e){return Zg.apply(this,arguments)}(e=q(e))}function db(e,t){return nb(e=q(e),t)}function pb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};ib(e,t,n,r)}function vb(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new ab(r,i,a,new Ky,n,Ae)}function mb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gb(e,t,n){return t&&yb(e.prototype,t),n&&yb(e,n),e}ke(new B(ob,vb,"PUBLIC").setMultipleInstances(!0)),Me("@firebase/storage","0.8.2");var bb=function(){function e(t,n,r){mb(this,e),this._delegate=t,this.task=n,this.ref=r}return gb(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),wb=function(){function e(t,n){mb(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return gb(e,[{key:"snapshot",get:function(){return new bb(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new bb(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"==typeof t?function(e){return t(new bb(e,i,i._ref))}:{next:t.next?function(e){return t.next(new bb(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),kb=function(){function e(t,n){mb(this,e),this._delegate=t,this._service=n}return gb(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new _b(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new _b(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),_b=function(){function e(t,n){mb(this,e),this._delegate=t,this.storage=n}return gb(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return eb(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new wb(ub(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ag.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=ug(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new wb(new Wg(this._delegate,new fg(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return lb(this._delegate).then((function(t){return new kb(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Qg(e=q(e),t)}(this._delegate,e||void 0).then((function(e){return new kb(e,t.storage)}))}},{key:"getMetadata",value:function(){return sb(this._delegate)}},{key:"updateMetadata",value:function(e){return cb(this._delegate,e)}},{key:"getDownloadURL",value:function(){return fb(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),hb(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw By(e)}}]),e}(),xb=function(){function e(t,n){mb(this,e),this.app=t,this._delegate=n}return gb(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Eb(e))throw Vy("ref() expected a child path but got a URL, use refFromURL instead.");return new _b(db(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Eb(e))throw Vy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Gy.makeFromUrl(e,this._delegate.host)}catch(e){throw Vy("refFromUrl() expected a valid full URL but got an invalid one.")}return new _b(db(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};pb(this._delegate,e,t,n)}}]),e}();function Eb(e){return/^[A-Za-z]+:\/\//.test(e)}var Sb;function Ib(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new xb(r,i)}function Tb(e){return Tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tb(e)}function Rb(e,t,n){return Rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Db(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},Rb(e,t,n||e)}function Nb(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ab(e,t)}function Ab(e,t){return Ab=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ab(e,t)}function Cb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Db(e);if(t){var i=Db(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ob(this,n)}}function Ob(e,t){if(t&&("object"===Tb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pb(e)}function Pb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Db(e){return Db=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Db(e)}function Lb(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zb(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Mb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||zb(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ub(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function Fb(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ub(a,r,i,o,u,"next",e)}function u(e){Ub(a,r,i,o,u,"throw",e)}o(void 0)}))}}function jb(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qb(e,t,n){return t&&Vb(e.prototype,t),n&&Vb(e,n),e}function Bb(e){return function(e){if(Array.isArray(e))return Wb(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||zb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zb(e,t){if(e){if("string"==typeof e)return Wb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wb(e,t):void 0}}function Wb(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){var t={TaskState:Vg,TaskEvent:jg,StringFormat:ag,Storage:xb,Reference:_b};e.INTERNAL.registerComponent(new B("storage-compat",Ib,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.2")}(Qe);var Kb="facebook.com",Gb="github.com",Qb="google.com",$b="password",Jb="twitter.com",Yb="EMAIL_SIGNIN",Xb="PASSWORD_RESET",Zb="RECOVER_EMAIL",ew="REVERT_SECOND_FACTOR_ADDITION",tw="VERIFY_AND_CHANGE_EMAIL",nw="VERIFY_EMAIL";function rw(){return Hb({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var iw=function(){var e;return Hb(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Hb(e,"argument-error",""),Hb(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Hb(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Hb(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Hb(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Hb(e,"cordova-not-ready","Cordova framework is not ready."),Hb(e,"cors-unsupported","This browser is not supported."),Hb(e,"credential-already-in-use","This credential is already associated with a different user account."),Hb(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Hb(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Hb(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Hb(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Hb(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Hb(e,"email-already-in-use","The email address is already in use by another account."),Hb(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Hb(e,"expired-action-code","The action code has expired."),Hb(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Hb(e,"internal-error","An internal AuthError has occurred."),Hb(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Hb(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Hb(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Hb(e,"invalid-auth-event","An internal AuthError has occurred."),Hb(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Hb(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Hb(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Hb(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Hb(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Hb(e,"invalid-email","The email address is badly formatted."),Hb(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Hb(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Hb(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Hb(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Hb(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Hb(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Hb(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Hb(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Hb(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Hb(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Hb(e,"wrong-password","The password is invalid or the user does not have a password."),Hb(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Hb(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Hb(e,"invalid-provider-id","The specified provider ID is invalid."),Hb(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Hb(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Hb(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Hb(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Hb(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Hb(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Hb(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Hb(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Hb(e,"missing-continue-uri","A continue URL must be provided in the request."),Hb(e,"missing-iframe-start","An internal AuthError has occurred."),Hb(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Hb(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Hb(e,"missing-multi-factor-info","No second factor identifier is provided."),Hb(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Hb(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Hb(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Hb(e,"app-deleted","This instance of FirebaseApp has been deleted."),Hb(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Hb(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Hb(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Hb(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Hb(e,"no-auth-event","An internal AuthError has occurred."),Hb(e,"no-such-provider","User was not linked to an account with the given provider."),Hb(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Hb(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Hb(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Hb(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Hb(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Hb(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Hb(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Hb(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Hb(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Hb(e,"rejected-credential","The request contains malformed or mismatching credentials."),Hb(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Hb(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Hb(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Hb(e,"timeout","The operation has timed out."),Hb(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Hb(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Hb(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Hb(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Hb(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Hb(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Hb(e,"unverified-email","The operation requires a verified email."),Hb(e,"user-cancelled","The user did not grant your application the permissions it requested."),Hb(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Hb(e,"user-disabled","The user account has been disabled by an administrator."),Hb(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Hb(e,"user-signed-out",""),Hb(e,"weak-password","The password must be 6 characters long or more."),Hb(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Hb(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},aw=rw,ow=new N("auth","Firebase",rw()),uw=new ne("@firebase/auth");function sw(e){if(uw.logLevel<=Q.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];uw.error.apply(uw,["Auth (".concat(Ae,"): ").concat(e)].concat(n))}}function cw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw dw.apply(void 0,[e].concat(n))}function lw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dw.apply(void 0,[e].concat(n))}function fw(e,t,n){var r=Object.assign(Object.assign({},aw()),Hb({},t,n));return new N("auth","Firebase",r).create(t,{appName:e.name})}function hw(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&cw(e,"argument-error"),fw(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function dw(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,a=n[0],o=Bb(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Bb(o)))}return ow.create.apply(ow,[e].concat(n))}function pw(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw dw.apply(void 0,[t].concat(r))}}function vw(e){var t="INTERNAL ASSERTION FAILED: "+e;throw sw(t),new Error(t)}function mw(e,t){e||vw(t)}var yw=new Map;function gw(e){mw(e instanceof Function,"Expected a class definition");var t=yw.get(e);return t?(mw(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yw.set(e,t),t)}function bw(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ww(){return"http:"===kw()||"https:"===kw()}function kw(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var _w=function(){function e(t,n){jb(this,e),this.shortDelay=t,this.longDelay=n,mw(n>t,"Short delay should be less than long delay!"),this.isMobile=_()||S()}return qb(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ww()||E()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function xw(e,t){mw(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Ew=function(){function e(){jb(this,e)}return qb(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void vw("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void vw("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void vw("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Sw=(Hb(Sb={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Hb(Sb,"MISSING_CUSTOM_TOKEN","internal-error"),Hb(Sb,"INVALID_IDENTIFIER","invalid-email"),Hb(Sb,"MISSING_CONTINUE_URI","internal-error"),Hb(Sb,"INVALID_PASSWORD","wrong-password"),Hb(Sb,"MISSING_PASSWORD","internal-error"),Hb(Sb,"EMAIL_EXISTS","email-already-in-use"),Hb(Sb,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Hb(Sb,"INVALID_IDP_RESPONSE","invalid-credential"),Hb(Sb,"INVALID_PENDING_TOKEN","invalid-credential"),Hb(Sb,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Hb(Sb,"MISSING_REQ_TYPE","internal-error"),Hb(Sb,"EMAIL_NOT_FOUND","user-not-found"),Hb(Sb,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Hb(Sb,"EXPIRED_OOB_CODE","expired-action-code"),Hb(Sb,"INVALID_OOB_CODE","invalid-action-code"),Hb(Sb,"MISSING_OOB_CODE","internal-error"),Hb(Sb,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Hb(Sb,"INVALID_ID_TOKEN","invalid-user-token"),Hb(Sb,"TOKEN_EXPIRED","user-token-expired"),Hb(Sb,"USER_NOT_FOUND","user-token-expired"),Hb(Sb,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Hb(Sb,"INVALID_CODE","invalid-verification-code"),Hb(Sb,"INVALID_SESSION_INFO","invalid-verification-id"),Hb(Sb,"INVALID_TEMPORARY_PROOF","invalid-credential"),Hb(Sb,"MISSING_SESSION_INFO","missing-verification-id"),Hb(Sb,"SESSION_EXPIRED","code-expired"),Hb(Sb,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Hb(Sb,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Hb(Sb,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Hb(Sb,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Hb(Sb,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Hb(Sb,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Hb(Sb,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Hb(Sb,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Hb(Sb,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Hb(Sb,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Hb(Sb,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Sb),Iw=new _w(3e4,6e4);function Tw(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Rw(e,t,n,r){return Nw.apply(this,arguments)}function Nw(){return Nw=Fb(regeneratorRuntime.mark((function e(t,n,r,i){var a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Aw(t,a,(function(){var e={},a={};i&&("GET"===n?a=i:e={body:JSON.stringify(i)});var o=L(Object.assign({key:t.config.apiKey},a)).slice(1),u=new(Ew.headers());return u.set("Content-Type","application/json"),u.set("X-Client-Version",t._getSdkClientVersion()),t.languageCode&&u.set("X-Firebase-Locale",t.languageCode),Ew.fetch()(Dw(t,t.config.apiHost,r,o),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},e))})));case 2:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Aw(e,t,n){return Cw.apply(this,arguments)}function Cw(){return Cw=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Sw),n),e.prev=2,a=new Lw(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Mw(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=Mb(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Mw(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw Mw(t,"email-already-in-use",u);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw fw(t,d,h);case 30:cw(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof R)){e.next=37;break}throw e.t0;case 37:cw(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),Cw.apply(this,arguments)}function Ow(e,t,n,r){return Pw.apply(this,arguments)}function Pw(){return Pw=Fb(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Rw(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&cw(t,"multi-factor-auth-required",{serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Pw.apply(this,arguments)}function Dw(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?xw(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Lw=function(){function e(t){var n=this;jb(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(lw(n.auth,"timeout"))}),Iw.get())}))}return qb(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Mw(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=lw(e,t,r);return i.customData._tokenResponse=n,i}function Uw(e,t){return Fw.apply(this,arguments)}function Fw(){return Fw=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Fw.apply(this,arguments)}function jw(e,t){return Vw.apply(this,arguments)}function Vw(){return Vw=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Vw.apply(this,arguments)}function qw(e,t){return Bw.apply(this,arguments)}function Bw(){return Bw=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Bw.apply(this,arguments)}function zw(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Ww(){return Ww=Fb(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,u,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=q(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,pw((a=Kw(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===Tb(a.firebase)?a.firebase:void 0,u=null==o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:zw(Hw(a.auth_time)),issuedAtTime:zw(Hw(a.iat)),expirationTime:zw(Hw(a.exp)),signInProvider:u||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ww.apply(this,arguments)}function Hw(e){return 1e3*Number(e)}function Kw(e){var t=Mb(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return sw("JWT malformed, contained fewer than 3 sections"),null;try{var a=m(r);return a?JSON.parse(a):(sw("Failed to decode base64 JWT payload"),null)}catch(e){return sw("Caught error parsing JWT payload as JSON",e),null}}function Gw(e,t){return Qw.apply(this,arguments)}function Qw(){return Qw=Fb(regeneratorRuntime.mark((function e(t,n){var r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof R&&$w(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Qw.apply(this,arguments)}function $w(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Jw=function(){function e(t){jb(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}var t;return qb(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Fb(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:(t=Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(){return t.apply(this,arguments)})}]),e}(),Yw=function(){function e(t,n){jb(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return qb(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=zw(this.lastLoginAt),this.creationTime=zw(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Xw(e){return Zw.apply(this,arguments)}function Zw(){return Zw=Fb(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Gw(t,qw(r,{idToken:i}));case 6:pw(null==(a=e.sent)?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?nk(o.providerUserInfo):[],s=tk(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash||(null==s?void 0:s.length)),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Yw(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function ek(){return(ek=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q(t),e.next=3,Xw(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tk(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Bb(n),Bb(t))}function nk(e){return e.map((function(e){var t=e.providerId,n=o(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function rk(e,t){return ik.apply(this,arguments)}function ik(){return ik=Fb(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aw(t,{},(function(){var e=L({grant_type:"refresh_token",refresh_token:n}).slice(1),r=t.config,i=r.tokenApiHost,a=r.apiKey,o=Dw(t,i,"/v1/token","key=".concat(a));return Ew.fetch()(o,{method:"POST",headers:{"X-Client-Version":t._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:e})}));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),ik.apply(this,arguments)}var ak=function(){function e(){jb(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}var t,n;return qb(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){pw(e.idToken,"internal-error"),pw(void 0!==e.idToken,"internal-error"),pw(void 0!==e.refreshToken,"internal-error");var t,n,r="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):(t=e.idToken,pw(n=Kw(t),"internal-error"),pw(void 0!==n.exp,"internal-error"),pw(void 0!==n.iat,"internal-error"),Number(n.exp)-Number(n.iat));this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}},{key:"getToken",value:(n=Fb(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],pw(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:(t=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rk(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return vw("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(pw("string"==typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(pw("string"==typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(pw("number"==typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function ok(e,t){pw("string"==typeof e||void 0===e,"internal-error",{appName:t})}var uk=function(){function e(t){jb(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=o(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Jw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.metadata=new Yw(a.createdAt||void 0,a.lastLoginAt||void 0)}var t,n,r,i;return qb(e,[{key:"getIdToken",value:(i=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gw(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(pw(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"getIdTokenResult",value:function(e){return function(e){return Ww.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ek.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(pw(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){pw(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:(r=Fb(regeneratorRuntime.mark((function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Xw(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"delete",value:(n=Fb(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Gw(this,Uw(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,w=n.emailVerified,k=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;pw(b&&x,t,"internal-error");var E=ak.fromJSON(this.name,x);pw("string"==typeof b,t,"internal-error"),ok(f,t.name),ok(h,t.name),pw("boolean"==typeof w,t,"internal-error"),pw("boolean"==typeof k,t,"internal-error"),ok(d,t.name),ok(p,t.name),ok(v,t.name),ok(m,t.name),ok(y,t.name),ok(g,t.name);var S=new e({uid:b,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:k,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:(t=Fb(regeneratorRuntime.mark((function t(n,r){var i,a,o,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new ak).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Xw(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),sk=function(){function e(){jb(this,e),this.type="NONE",this.storage={}}var t,n,r,i;return qb(e,[{key:"_isAvailable",value:(i=Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)}))),function(){return i.apply(this,arguments)})},{key:"_set",value:(r=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"_get",value:(n=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_remove",value:(t=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();sk.type="NONE";var ck=sk;function lk(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var fk=function(){function e(t,n,r){jb(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=lk(this.userKey,a.apiKey,o),this.fullPersistenceKey=lk("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}var t,n,r;return qb(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:(r=Fb(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?uk._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:(n=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:(t=Fb(regeneratorRuntime.mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(gw(ck),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||gw(ck),u=lk(i,n.config.apiKey,n.name),s=null,c=Lb(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=uk._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])}))),function(e,n){return t.apply(this,arguments)})}]),e}();function hk(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(mk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gk(t))return"Blackberry";if(bk(t))return"Webos";if(pk(t))return"Safari";if((t.includes("chrome/")||vk(t))&&!t.includes("edge/"))return"Chrome";if(yk(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function dk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/firefox\//i.test(e)}function pk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/crios\//i.test(e)}function mk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/iemobile/i.test(e)}function yk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/android/i.test(e)}function gk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/blackberry/i.test(e)}function bk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/webos/i.test(e)}function wk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/iphone|ipad|ipod/i.test(e)}function kk(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return wk(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function _k(){return I()&&10===document.documentMode}function xk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return wk(e)||yk(e)||bk(e)||gk(e)||/windows phone/i.test(e)||mk(e)}function Ek(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=hk(k());break;case"Worker":t="".concat(hk(k()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ae,"/").concat(r)}var Sk=function(){function e(t,n){jb(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Tk(this),this.idTokenSubscription=new Tk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ow,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}var t,n,r,i,a,o,u,s,c,l,f,h,d;return qb(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=gw(t)),this._initializationPromise=this.queue(Fb(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,fk.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=10;break}return r.next=10,n._popupRedirectResolver._initialize(n);case 10:return r.next=12,n.initializeCurrentUser(t);case 12:if(!n._deleted){r.next=14;break}return r.abrupt("return");case 14:n._isInitialized=!0;case 15:case"end":return r.stop()}}),r)})))),this._initializationPromise}},{key:"_onStorageEvent",value:(d=Fb(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"initializeCurrentUser",value:(h=Fb(regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null==r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null==o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return pw(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"tryRedirectSignIn",value:(f=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])}))),function(e){return f.apply(this,arguments)})},{key:"reloadAndSetCurrentUserOrClear",value:(l=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xw(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return l.apply(this,arguments)})},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:(c=Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"updateCurrentUser",value:(s=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?q(t):null)&&pw(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"_updateCurrentUser",value:(u=Fb(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&pw(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"signOut",value:(o=Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"setPersistence",value:function(e){var t=this;return this.queue(Fb(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(gw(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new N("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:(a=Fb(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getOrInitRedirectPersistenceManager",value:(i=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return pw(n=t&&gw(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,fk.create(this,[gw(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_redirectUserForId",value:(r=Fb(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_persistUserIfCurrent",value:(n=Fb(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"==typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return pw(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:(t=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return pw(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ek(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getSdkClientVersion",value:function(){return this.clientVersion}}]),e}();function Ik(e){return q(e)}var Tk=function(){function e(t){var n=this;jb(this,e),this.auth=t,this.observer=null,this.addObserver=F((function(e){return n.observer=e}))}return qb(e,[{key:"next",get:function(){return pw(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Rk(e,t,n){var r=Ik(e);pw(r._canInitEmulator,r,"emulator-config-failed"),pw(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null==n?void 0:n.disableWarnings),a=Nk(t),o=function(e){var t=Nk(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Ak(r.substr(a.length+1))}}var o=Mb(r.split(":"),2);return{host:o[0],port:Ak(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),function(e){function t(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"==typeof window||"undefined"==typeof document||e||("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}(i)}function Nk(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ak(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ck=function(){function e(t,n){jb(this,e),this.providerId=t,this.signInMethod=n}return qb(e,[{key:"toJSON",value:function(){return vw("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return vw("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return vw("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return vw("not implemented")}}]),e}();function Ok(e,t){return Pk.apply(this,arguments)}function Pk(){return Pk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:resetPassword",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pk.apply(this,arguments)}function Dk(e,t){return Lk.apply(this,arguments)}function Lk(){return Lk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Lk.apply(this,arguments)}function Mk(e,t){return Uk.apply(this,arguments)}function Uk(){return Uk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:update",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),Uk.apply(this,arguments)}function Fk(e,t){return jk.apply(this,arguments)}function jk(){return jk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:signInWithPassword",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),jk.apply(this,arguments)}function Vk(e,t){return qk.apply(this,arguments)}function qk(){return qk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:sendOobCode",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),qk.apply(this,arguments)}function Bk(e,t){return zk.apply(this,arguments)}function zk(){return zk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vk(t,n));case 1:case"end":return e.stop()}}),e)}))),zk.apply(this,arguments)}function Wk(e,t){return Hk.apply(this,arguments)}function Hk(){return Hk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vk(t,n));case 1:case"end":return e.stop()}}),e)}))),Hk.apply(this,arguments)}function Kk(e,t){return Gk.apply(this,arguments)}function Gk(){return Gk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vk(t,n));case 1:case"end":return e.stop()}}),e)}))),Gk.apply(this,arguments)}function Qk(e,t){return $k.apply(this,arguments)}function $k(){return $k=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vk(t,n));case 1:case"end":return e.stop()}}),e)}))),$k.apply(this,arguments)}function Jk(e,t){return Yk.apply(this,arguments)}function Yk(){return Yk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:signInWithEmailLink",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yk.apply(this,arguments)}function Xk(e,t){return Zk.apply(this,arguments)}function Zk(){return Zk=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:signInWithEmailLink",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),Zk.apply(this,arguments)}var e_=function(e){Nb(i,e);var t,n,r=Cb(i);function i(e,t,n){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return jb(this,i),(a=r.call(this,"password",n))._email=e,a._password=t,a._tenantId=o,a}return qb(i,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:(n=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Fk(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Jk(t,{email:this._email,oobCode:this._password}));case 5:cw(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_linkToIdToken",value:(t=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Dk(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Xk(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:cw(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new i(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new i(e,t,"emailLink",n)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),i}(Ck);function t_(e,t){return n_.apply(this,arguments)}function n_(){return n_=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:signInWithIdp",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}var r_=function(e){Nb(n,e);var t=Cb(n);function n(){var e;return jb(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return qb(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return t_(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,t_(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,t_(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=L(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cw("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=o(t,["providerId","signInMethod"]);if(!r||!i)return null;var u=new n(r,i);return Object.assign(u,a),u}}]),n}(Ck);function i_(e,t){return a_.apply(this,arguments)}function a_(){return a_=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:sendVerificationCode",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),a_.apply(this,arguments)}function o_(){return o_=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:signInWithPhoneNumber",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),o_.apply(this,arguments)}function u_(){return u_=Fb(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ow(t,"POST","/v1/accounts:signInWithPhoneNumber",Tw(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Mw(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),u_.apply(this,arguments)}var s_=Hb({},"USER_NOT_FOUND","user-not-found");function c_(){return c_=Fb(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ow(t,"POST","/v1/accounts:signInWithPhoneNumber",Tw(t,r),s_));case 2:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}var l_=function(e){Nb(n,e);var t=Cb(n);function n(e){var r;return jb(this,n),(r=t.call(this,"phone","phone")).params=e,r}return qb(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return o_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return u_.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return c_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ck);var f_=function(){function e(t){var n,r,i,a,o,u;jb(this,e);var s=M(U(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);pw(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return qb(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=M(U(e)).link,n=t?M(U(t)).deep_link_id:null,r=M(U(e)).deep_link_id;return(r?M(U(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(e){return null}}}]),e}();var h_=function(){function e(){jb(this,e),this.providerId=e.PROVIDER_ID}return qb(e,null,[{key:"credential",value:function(e,t){return e_._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=f_.parseLink(t);return pw(n,"argument-error"),e_._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();h_.PROVIDER_ID="password",h_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",h_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var d_=function(){function e(t){jb(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return qb(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),p_=function(e){Nb(n,e);var t=Cb(n);function n(){var e;return jb(this,n),(e=t.apply(this,arguments)).scopes=[],e}return qb(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Bb(this.scopes)}}]),n}(d_),v_=function(e){Nb(n,e);var t=Cb(n);function n(){return jb(this,n),t.apply(this,arguments)}return qb(n,[{key:"credential",value:function(e){return this._credential(e)}},{key:"_credential",value:function(e){return pw(e.idToken||e.accessToken,"argument-error"),r_._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return pw("providerId"in t&&"signInMethod"in t,"argument-error"),r_._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!(i||a||r||o))return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,rawNonce:u,pendingToken:o})}catch(e){return null}}}]),n}(p_),m_=function(e){Nb(n,e);var t=Cb(n);function n(){return jb(this,n),t.call(this,"facebook.com")}return qb(n,null,[{key:"credential",value:function(e){return r_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(e){return null}}}]),n}(p_);m_.FACEBOOK_SIGN_IN_METHOD="facebook.com",m_.PROVIDER_ID="facebook.com";var y_=function(e){Nb(n,e);var t=Cb(n);function n(){var e;return jb(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return qb(n,null,[{key:"credential",value:function(e,t){return r_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(e){return null}}}]),n}(p_);y_.GOOGLE_SIGN_IN_METHOD="google.com",y_.PROVIDER_ID="google.com";var g_=function(e){Nb(n,e);var t=Cb(n);function n(){return jb(this,n),t.call(this,"github.com")}return qb(n,null,[{key:"credential",value:function(e){return r_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(e){return null}}}]),n}(p_);g_.GITHUB_SIGN_IN_METHOD="github.com",g_.PROVIDER_ID="github.com";var b_=function(e){Nb(n,e);var t=Cb(n);function n(e,r){var i;return jb(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return qb(n,[{key:"_getIdTokenResponse",value:function(e){return t_(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,t_(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,t_(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ck),w_=function(e){Nb(n,e);var t=Cb(n);function n(){return jb(this,n),t.call(this,"twitter.com")}return qb(n,null,[{key:"credential",value:function(e,t){return r_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(e){return null}}}]),n}(p_);function k_(e,t){return __.apply(this,arguments)}function __(){return __=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:signUp",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),__.apply(this,arguments)}w_.TWITTER_SIGN_IN_METHOD="twitter.com",w_.PROVIDER_ID="twitter.com";var x_=function(){function e(t){jb(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}var t,n;return qb(e,null,[{key:"_fromIdTokenResponse",value:(n=Fb(regeneratorRuntime.mark((function t(n,r,i){var a,o,u,s,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,uk._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=E_(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)}))),function(e,t,r){return n.apply(this,arguments)})},{key:"_forOperation",value:(t=Fb(regeneratorRuntime.mark((function t(n,r,i){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=E_(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)}))),function(e,n,r){return t.apply(this,arguments)})}]),e}();function E_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function S_(){return S_=Fb(regeneratorRuntime.mark((function e(t){var n,r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ik(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new x_({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,k_(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,x_._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),S_.apply(this,arguments)}var I_=function(e){Nb(n,e);var t=Cb(n);function n(e,r,i,a){var o,u;return jb(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,o.name="FirebaseError",Object.setPrototypeOf(Pb(o),n.prototype),o.appName=e.name,o.code=r.code,o.tenantId=null!==(u=e.tenantId)&&void 0!==u?u:void 0,o.serverResponse=r.customData.serverResponse,o}return qb(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(R);function T_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw I_._fromErrorAndOperation(e,n,t,r);throw n}))}function R_(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function N_(e,t){return A_.apply(this,arguments)}function A_(){return A_=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q(t),e.next=3,P_(!0,r,n);case 3:return e.t0=jw,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=R_(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),A_.apply(this,arguments)}function C_(e,t){return O_.apply(this,arguments)}function O_(){return O_=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Gw,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",x_._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),O_.apply(this,arguments)}function P_(e,t,n){return D_.apply(this,arguments)}function D_(){return(D_=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xw(n);case 2:i=R_(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",pw(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return M_=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Gw(t,T_(i,a,n,t),r);case 6:return pw((o=e.sent).idToken,i,"internal-error"),pw(u=Kw(o.idToken),i,"internal-error"),s=u.sub,pw(t.uid===s,i,"user-mismatch"),e.abrupt("return",x_._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&cw(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),M_.apply(this,arguments)}function U_(e,t){return F_.apply(this,arguments)}function F_(){return F_=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,T_(t,i,n);case 4:return a=e.sent,e.next=7,x_._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function j_(e,t){return V_.apply(this,arguments)}function V_(){return V_=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U_(Ik(t),n));case 1:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function q_(e,t){return B_.apply(this,arguments)}function B_(){return(B_=Fb(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q(t),e.next=3,P_(!1,r,n.providerId);case 3:return e.abrupt("return",C_(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z_(e,t){return W_.apply(this,arguments)}function W_(){return(W_=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",L_(q(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H_(e,t){return K_.apply(this,arguments)}function K_(){return K_=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ow(t,"POST","/v1/accounts:signInWithCustomToken",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),K_.apply(this,arguments)}function G_(){return G_=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ik(t),e.next=3,H_(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,x_._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),G_.apply(this,arguments)}var Q_=function(){function e(t,n){jb(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return qb(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?$_._fromServerResponse(e,t):cw(e,"internal-error")}}]),e}(),$_=function(e){Nb(n,e);var t=Cb(n);function n(e){var r;return jb(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return qb(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Q_);function J_(e,t,n){var r;pw((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),pw(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(pw(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iosBundleId=n.iOS.bundleId),n.android&&(pw(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Y_(){return Y_=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=q(t),a={requestType:"PASSWORD_RESET",email:n},r&&J_(i,a,r),e.next=5,Wk(i,a);case 5:case"end":return e.stop()}}),e)}))),Y_.apply(this,arguments)}function X_(){return X_=Fb(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ok(q(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),X_.apply(this,arguments)}function Z_(){return Z_=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mk(q(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Z_.apply(this,arguments)}function ex(e,t){return tx.apply(this,arguments)}function tx(){return tx=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q(t),e.next=3,Ok(r,{oobCode:n});case 3:i=e.sent,pw(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return pw(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:pw(i.mfaInfo,r,"internal-error");case 13:pw(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Q_._fromServerResponse(Ik(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),tx.apply(this,arguments)}function nx(){return nx=Fb(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ex(q(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t,n){return ix.apply(this,arguments)}function ix(){return ix=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ik(t),e.next=3,k_(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,x_._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(){return ax=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=q(t),a={requestType:"EMAIL_SIGNIN",email:n},pw(r.handleCodeInApp,i,"argument-error"),r&&J_(i,a,r),e.next=6,Kk(i,a);case 6:case"end":return e.stop()}}),e)}))),ax.apply(this,arguments)}function ox(){return ox=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=q(t),pw((a=h_.credentialWithLink(n,r||bw()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",j_(i,a));case 4:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e,t){return sx.apply(this,arguments)}function sx(){return sx=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:createAuthUri",Tw(t,n)));case 1:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(){return cx=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ww()?bw():"http://localhost",i={identifier:n,continueUri:r},e.next=4,ux(q(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),cx.apply(this,arguments)}function lx(){return(lx=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=q(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&J_(r.auth,a,n),e.next=8,Bk(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fx(){return(fx=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=q(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&J_(i.auth,o,r),e.next=8,Qk(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hx(e,t){return dx.apply(this,arguments)}function dx(){return dx=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),dx.apply(this,arguments)}function px(){return(px=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=q(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Gw(a,hx(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vx(e,t,n){return mx.apply(this,arguments)}function mx(){return mx=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Gw(t,Dk(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}var yx=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jb(this,e),this.isNewUser=t,this.providerId=n,this.profile=r},gx=function(e){Nb(n,e);var t=Cb(n);function n(e,r,i,a){var o;return jb(this,n),(o=t.call(this,e,r,i)).username=a,o}return n}(yx),bx=function(e){Nb(n,e);var t=Cb(n);function n(e,r){return jb(this,n),t.call(this,e,"facebook.com",r)}return n}(yx),wx=function(e){Nb(n,e);var t=Cb(n);function n(e,r){return jb(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return n}(gx),kx=function(e){Nb(n,e);var t=Cb(n);function n(e,r){return jb(this,n),t.call(this,e,"google.com",r)}return n}(yx),_x=function(e){Nb(n,e);var t=Cb(n);function n(e,r,i){return jb(this,n),t.call(this,e,"twitter.com",r,i)}return n}(gx);function xx(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var o=null===(n=null===(t=Kw(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new yx(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new bx(a,i);case"github.com":return new wx(a,i);case"google.com":return new kx(a,i);case"twitter.com":return new _x(a,i,e.screenName||null);case"custom":case"anonymous":return new yx(a,null);default:return new yx(a,r,i)}}(n)}var Ex=function(){function e(t,n){jb(this,e),this.type=t,this.credential=n}return qb(e,[{key:"toJSON",value:function(){return{multiFactorSession:Hb({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null==t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Sx=function(){function e(t,n,r){jb(this,e),this.session=t,this.hints=n,this.signInResolver=r}var t;return qb(e,[{key:"resolveSignIn",value:(t=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}],[{key:"_fromError",value:function(t,n){var r=Ik(t),i=(n.serverResponse.mfaInfo||[]).map((function(e){return Q_._fromServerResponse(r,e)}));pw(n.serverResponse.mfaPendingCredential,r,"internal-error");var a=Ex._fromMfaPendingCredential(n.serverResponse.mfaPendingCredential);return new e(a,i,function(){var e=Fb(regeneratorRuntime.mark((function e(t){var i,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,a);case 2:i=e.sent,delete n.serverResponse.mfaInfo,delete n.serverResponse.mfaPendingCredential,o=Object.assign(Object.assign({},n.serverResponse),{idToken:i.idToken,refreshToken:i.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,x_._fromIdTokenResponse(r,n.operationType,o);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return pw(n.user,r,"internal-error"),e.abrupt("return",x_._forOperation(n.user,n.operationType,o));case 17:cw(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Ix(e,t){return Rw(e,"POST","/v2/accounts/mfaEnrollment:start",Object.assign({tenantId:e.tenantId},t))}function Tx(e,t){return Rw(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Object.assign({tenantId:e.tenantId},t))}var Rx=function(){function e(t){var n=this;jb(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Q_._fromServerResponse(t.auth,e)})))}))}var t,n,r;return qb(e,[{key:"getSession",value:(r=Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ex,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"enroll",value:(n=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Gw(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"unenroll",value:(t=Fb(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"==typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Gw(this.user,Tx(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])}))),function(e){return t.apply(this,arguments)})}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Nx=new WeakMap;var Ax="__sak",Cx=function(){function e(t,n){jb(this,e),this.storage=t,this.type=n}return qb(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ax,"1"),this.storage.removeItem(Ax),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}}]),e}();var Ox=function(e){Nb(a,e);var t,n,r,i=Cb(a);function a(){var e;return jb(this,a),(e=i.call(this,window.localStorage,"LOCAL")).listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=k();return pk(e)||wk(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=xk(),e._shouldAllowMigration=!0,e.boundEventHandler=e.onStorageEvent.bind(Pb(e)),e}return qb(a,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);_k()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:(r=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rb(Db(a.prototype),"_set",this).call(this,t,n);case 2:this.localCache[t]=JSON.stringify(n);case 3:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"_get",value:(n=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rb(Db(a.prototype),"_get",this).call(this,t);case 2:return n=e.sent,this.localCache[t]=JSON.stringify(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_remove",value:(t=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rb(Db(a.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),a}(Cx);Ox.type="LOCAL";var Px=Ox,Dx=function(e){Nb(n,e);var t=Cb(n);function n(){return jb(this,n),t.call(this,window.sessionStorage,"SESSION")}return qb(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Cx);Dx.type="SESSION";var Lx=Dx;function Mx(e){return Promise.all(e.map(function(){var e=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ux=function(){function e(t){jb(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}var t;return qb(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:(t=Fb(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,u,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null==(u=this.handlersMap[a])?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Mx(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Fx(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ux.receivers=[];var jx=function(){function e(t){jb(this,e),this.target=t,this.handlers=new Set}var t;return qb(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:(t=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!=typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Fx("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})}]),e}();function Vx(){return window}function qx(){return void 0!==Vx().WorkerGlobalScope&&"function"==typeof Vx().importScripts}function Bx(){return zx.apply(this,arguments)}function zx(){return(zx=Fb(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Wx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Hx="firebaseLocalStorageDb",Kx="firebaseLocalStorage",Gx="fbase_key",Qx=function(){function e(t){jb(this,e),this.request=t}return qb(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function $x(e,t){return e.transaction([Kx],t?"readwrite":"readonly").objectStore(Kx)}function Jx(){var e=indexedDB.deleteDatabase(Hx);return new Qx(e).toPromise()}function Yx(){var e=indexedDB.open(Hx,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Kx,{keyPath:Gx})}catch(e){n(e)}})),e.addEventListener("success",Fb(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Kx)){n.next=12;break}return r.close(),n.next=5,Jx();case 5:return n.t0=t,n.next=8,Yx();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Xx(e,t,n){return Zx.apply(this,arguments)}function Zx(){return Zx=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$x(t,!0).put((Hb(i={},Gx,n),Hb(i,"value",r),i)),e.abrupt("return",new Qx(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function eE(e,t){return tE.apply(this,arguments)}function tE(){return tE=Fb(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$x(t,!1).get(n),e.next=3,new Qx(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function nE(e,t){var n=$x(e,!0).delete(t);return new Qx(n).toPromise()}var rE=function(){function e(){jb(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}var t,n,r,i,a,o,u,s,c,l,f,h;return qb(e,[{key:"_openDb",value:(h=Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Yx();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"_withRetries",value:(f=Fb(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(e){return f.apply(this,arguments)})},{key:"initializeServiceWorkerMessaging",value:(l=Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qx()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"initializeReceiver",value:(c=Fb(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ux._getInstance(qx()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Fb(regeneratorRuntime.mark((function e(n,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"initializeSender",value:(s=Fb(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bx();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new jx(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"notifyServiceWorker",value:(u=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Wx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])}))),function(e){return u.apply(this,arguments)})},{key:"_isAvailable",value:(o=Fb(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Yx();case 5:return t=e.sent,e.next=8,Xx(t,Ax,"1");case 8:return e.next=10,nE(t,Ax);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}))),function(){return o.apply(this,arguments)})},{key:"_withPendingWrite",value:(a=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])}))),function(e){return a.apply(this,arguments)})},{key:"_set",value:(i=Fb(regeneratorRuntime.mark((function e(t,n){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Xx(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"_get",value:(r=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return eE(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"_remove",value:(n=Fb(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return nE(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_poll",value:(t=Fb(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=$x(e,!1).getAll();return new Qx(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Lb(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(e){i.e(e)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Fb(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();rE.type="LOCAL";var iE=rE;function aE(e,t){return Rw(e,"POST","/v2/accounts/mfaSignIn:start",Object.assign({tenantId:e.tenantId},t))}function oE(e){return uE.apply(this,arguments)}function uE(){return uE=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rw(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),uE.apply(this,arguments)}function sE(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=lw("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function cE(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var lE=1e12,fE=function(){function e(t){jb(this,e),this.auth=t,this.counter=lE,this._widgets=new Map}var t;return qb(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new hE(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||lE;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||lE;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:(t=Fb(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||lE,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),hE=function(){function e(t,n,r){var i=this;jb(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"==typeof t?document.getElementById(t):t;pw(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return qb(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(e){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(e){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var dE=cE("rcb"),pE=new _w(3e4,6e4),vE="https://www.google.com/recaptcha/api.js?",mE=function(){function e(){jb(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Vx().grecaptcha}return qb(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return pw(yE(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Vx().grecaptcha):new Promise((function(r,i){var a=Vx().setTimeout((function(){i(lw(e,"network-request-failed"))}),pE.get());Vx()[dE]=function(){Vx().clearTimeout(a),delete Vx()[dE];var o=Vx().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(lw(e,"internal-error"))},sE("".concat(vE,"?").concat(L({onload:dE,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(lw(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Vx().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function yE(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var gE=function(){function e(){jb(this,e)}var t;return qb(e,[{key:"load",value:(t=Fb(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new fE(t));case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})},{key:"clearedOneInstance",value:function(){}}]),e}(),bE="recaptcha",wE={theme:"light",type:"image"},kE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},wE),r=arguments.length>2?arguments[2]:void 0;jb(this,e),this.parameters=n,this.type=bE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ik(r),this.isInvisible="invisible"===this.parameters.size,pw("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;pw(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gE:new mE,this.validateStartingState()}var t,n,r;return qb(e,[{key:"verify",value:(r=Fb(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){pw(!this.parameters.sitekey,this.auth,"argument-error"),pw(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pw("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"==typeof e)e(n);else if("string"==typeof e){var r=Vx()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){pw(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:(n=Fb(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"init",value:(t=Fb(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pw(ww()&&!qx(),this.auth,"internal-error"),e.next=3,_E();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,oE(this.auth);case 8:pw(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getAssertedRecaptcha",value:function(){return pw(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function _E(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var xE=function(){function e(t,n){jb(this,e),this.verificationId=t,this.onConfirmation=n}return qb(e,[{key:"confirm",value:function(e){var t=l_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function EE(){return EE=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ik(t),e.next=3,RE(i,n,q(r));case 3:return a=e.sent,e.abrupt("return",new xE(a,(function(e){return j_(i,e)})));case 5:case"end":return e.stop()}}),e)}))),EE.apply(this,arguments)}function SE(e,t,n){return IE.apply(this,arguments)}function IE(){return(IE=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=q(t),e.next=3,P_(!1,i,"phone");case 3:return e.next=5,RE(i.auth,n,q(r));case 5:return a=e.sent,e.abrupt("return",new xE(a,(function(e){return q_(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function TE(){return(TE=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=q(t),e.next=3,RE(i.auth,n,q(r));case 3:return a=e.sent,e.abrupt("return",new xE(a,(function(e){return z_(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RE(e,t,n){return NE.apply(this,arguments)}function NE(){return NE=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,pw("string"==typeof a,t,"argument-error"),pw(r.type===bE,t,"argument-error"),!("session"in(o="string"==typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return pw("enroll"===u.type,t,"internal-error"),e.next=13,Ix(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return pw("signin"===u.type,t,"internal-error"),pw(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,aE(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,i_(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),NE.apply(this,arguments)}function AE(){return(AE=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C_(q(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var CE=function(){function e(t){jb(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ik(t)}return qb(e,[{key:"verifyPhoneNumber",value:function(e,t){return RE(this.auth,e,q(t))}}],[{key:"credential",value:function(e,t){return l_._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?l_._fromTokenResponse(n,r):null}}]),e}();function OE(e,t){return t?gw(t):(pw(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}CE.PROVIDER_ID="phone",CE.PHONE_SIGN_IN_METHOD="phone";var PE=function(e){Nb(n,e);var t=Cb(n);function n(e){var r;return jb(this,n),(r=t.call(this,"custom","custom")).params=e,r}return qb(n,[{key:"_getIdTokenResponse",value:function(e){return t_(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return t_(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return t_(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ck);function DE(e){return U_(e.auth,new PE(e),e.bypassAuthState)}function LE(e){var t=e.auth,n=e.user;return pw(n,t,"internal-error"),L_(n,new PE(e),e.bypassAuthState)}function ME(e){return UE.apply(this,arguments)}function UE(){return UE=Fb(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,pw(r=t.user,n,"internal-error"),e.abrupt("return",C_(r,new PE(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),UE.apply(this,arguments)}var FE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];jb(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}var t;return qb(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Fb(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:(t=Fb(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e){return t.apply(this,arguments)})},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DE;case"linkViaPopup":case"linkViaRedirect":return ME;case"reauthViaPopup":case"reauthViaRedirect":return LE;default:cw(this.auth,"internal-error")}}},{key:"resolve",value:function(e){mw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){mw(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),jE=new _w(2e3,1e4);function VE(e,t,n){return qE.apply(this,arguments)}function qE(){return qE=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ik(t),hw(t,n,d_),a=OE(i,r),o=new HE(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),qE.apply(this,arguments)}function BE(){return(BE=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hw((i=q(t)).auth,n,d_),a=OE(i.auth,r),o=new HE(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zE(e,t,n){return WE.apply(this,arguments)}function WE(){return(WE=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hw((i=q(t)).auth,n,d_),a=OE(i.auth,r),o=new HE(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var HE=function(e){Nb(i,e);var t,n,r=Cb(i);function i(e,t,n,a,o){var u;return jb(this,i),(u=r.call(this,e,t,a,o)).provider=n,u.authWindow=null,u.pollId=null,i.currentPopupAction&&i.currentPopupAction.cancel(),i.currentPopupAction=Pb(u),u}return qb(i,[{key:"executeNotNull",value:(n=Fb(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return pw(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"onExecution",value:(t=Fb(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mw(1===this.filter.length,"Popup operations only handle one event"),t=Fx(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(lw(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(lw(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,i.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(lw(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,jE.get())}()}}]),i}(FE);HE.currentPopupAction=null;var KE=new Map,GE=function(e){Nb(a,e);var t,n,r,i=Cb(a);function a(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return jb(this,a),(n=i.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r)).eventId=null,n}return qb(a,[{key:"execute",value:(r=Fb(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=KE.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,QE(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Rb(Db(a.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:n=e.t0,t=function(){return Promise.resolve(n)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:KE.set(this.auth._key(),t);case 21:return e.abrupt("return",t());case 22:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(){return r.apply(this,arguments)})},{key:"onAuthEvent",value:(n=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Rb(Db(a.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(n=e.sent)){e.next=16;break}return this.user=n,e.abrupt("return",Rb(Db(a.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"onExecution",value:(t=Fb(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{key:"cleanUp",value:function(){}}]),a}(FE);function QE(e,t){return $E.apply(this,arguments)}function $E(){return $E=Fb(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ZE(n),e.next=3,XE(t)._get(r);case 3:return e.t0=e.sent,i="true"===e.t0,e.next=7,XE(t)._remove(r);case 7:return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)}))),$E.apply(this,arguments)}function JE(e,t){return YE.apply(this,arguments)}function YE(){return YE=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",XE(t)._set(ZE(n),"true"));case 1:case"end":return e.stop()}}),e)}))),YE.apply(this,arguments)}function XE(e){return gw(e._redirectPersistence)}function ZE(e){return lk("pendingRedirect",e.config.apiKey,e.name)}function eS(e,t,n){return function(e,t,n){return tS.apply(this,arguments)}(e,t,n)}function tS(){return tS=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ik(t),hw(t,n,d_),a=OE(i,r),e.next=5,JE(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),tS.apply(this,arguments)}function nS(e,t,n){return function(e,t,n){return rS.apply(this,arguments)}(e,t,n)}function rS(){return(rS=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hw((i=q(t)).auth,n,d_),a=OE(i.auth,r),e.next=5,JE(a,i.auth);case 5:return e.next=7,lS(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iS(e,t,n){return function(e,t,n){return aS.apply(this,arguments)}(e,t,n)}function aS(){return(aS=Fb(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hw((i=q(t)).auth,n,d_),a=OE(i.auth,r),e.next=5,P_(!1,i,n.providerId);case 5:return e.next=7,JE(a,i.auth);case 7:return e.next=9,lS(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oS(e,t){return uS.apply(this,arguments)}function uS(){return uS=Fb(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ik(t)._initializationPromise;case 2:return e.abrupt("return",sS(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),uS.apply(this,arguments)}function sS(e,t){return cS.apply(this,arguments)}function cS(){return cS=Fb(regeneratorRuntime.mark((function e(t,n){var r,i,a,o,u,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ik(t),a=OE(i,n),o=new GE(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),cS.apply(this,arguments)}function lS(e){return fS.apply(this,arguments)}function fS(){return(fS=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fx("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hS=function(){function e(t){jb(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return qb(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pS(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!pS(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(lw(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dS(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(dS(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function dS(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function pS(e){var t=e.type,n=e.error;return"unknown"===t&&(null==n?void 0:n.code)==="auth/".concat("no-auth-event")}function vS(e){return mS.apply(this,arguments)}function mS(){return mS=Fb(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Rw(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),mS.apply(this,arguments)}var yS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gS=/^https?/;function bS(){return bS=Fb(regeneratorRuntime.mark((function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,vS(t);case 4:n=e.sent,r=n.authorizedDomains,i=Lb(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!wS(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:cw(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),bS.apply(this,arguments)}function wS(e){var t=bw(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!gS.test(r))return!1;if(yS.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var kS=new _w(3e4,6e4);function _S(){var e=Vx().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Bb(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var xS=null;function ES(e){return xS=xS||function(e){return new Promise((function(t,n){var r,i,a;function o(){_S(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){_S(),n(lw(e,"network-request-failed"))},timeout:kS.get()})}if(null===(i=null===(r=Vx().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Vx().gapi)||void 0===a?void 0:a.load)){var u=cE("iframefcb");return Vx()[u]=function(){gapi.load?o():n(lw(e,"network-request-failed"))},sE("https://apis.google.com/js/api.js?onload=".concat(u))}o()}})).catch((function(e){throw xS=null,e}))}(e),xS}var SS=new _w(5e3,15e3),IS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},TS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RS(e){var t=e.config;pw(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?xw(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ae},i=TS.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(L(r).slice(1))}function NS(e){return AS.apply(this,arguments)}function AS(){return AS=Fb(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ES(t);case 2:return n=e.sent,pw(r=Vx().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:RS(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IS,dontclear:!0},(function(e){return new Promise(function(){var n=Fb(regeneratorRuntime.mark((function n(r,i){var a,o,u;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Vx().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=lw(t,"network-request-failed"),o=Vx().setTimeout((function(){i(a)}),SS.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),AS.apply(this,arguments)}var CS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OS="_blank",PS="http://localhost",DS=function(){function e(t){jb(this,e),this.window=t,this.associatedEvent=null}return qb(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function LS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},CS),{width:r.toString(),height:i.toString(),top:a,left:o}),c=k().toLowerCase();n&&(u=vk(c)?OS:n),dk(c)&&(t=t||PS,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=Mb(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(kk(c)&&"_self"!==u)return MS(t||"",u),new DS(null);var f=window.open(t||"",u,l);pw(f,e,"popup-blocked");try{f.focus()}catch(e){}return new DS(f)}function MS(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var US="__/auth/handler",FS="emulator/auth/handler";function jS(e,t,n,r,i,a){pw(e.config.authDomain,e,"auth-domain-config-required"),pw(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ae,eventId:i};if(t instanceof d_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=Mb(s[u],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof p_){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var m=v[p];void 0===d[m]&&delete d[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(US);return xw(t,FS)}(e),"?").concat(L(d).slice(1))}var VS,qS="webStorageSupport",BS=function(){function e(){jb(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lx,this._completeRedirectFn=sS}var t,n,r;return qb(e,[{key:"_openPopup",value:(r=Fb(regeneratorRuntime.mark((function e(t,n,r,i){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mw(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=jS(t,n,r,bw(),i),e.abrupt("return",LS(t,o,Fx()));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"_openRedirect",value:(n=Fb(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=jS(t,n,r,bw(),i),Vx().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"_initialize",value:function(e){var t=e._key();if(this.eventManagers[t]){var n=this.eventManagers[t],r=n.manager,i=n.promise;return r?Promise.resolve(r):(mw(i,"If manager is not set, promise should be"),i)}var a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a}},{key:"initAndGetManager",value:(t=Fb(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,NS(t);case 2:return n=e.sent,r=new hS(t),n.register("authEvent",(function(e){return pw(null==e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(qS,{type:qS},(function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),cw(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return bS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return xk()||pk()||wk()}}]),e}(),zS=BS,WS=function(){function e(t){jb(this,e),this.factorId=t}return qb(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return vw("unexpected MultiFactorSessionType")}}}]),e}(),HS=function(e){Nb(n,e);var t=Cb(n);function n(e){var r;return jb(this,n),(r=t.call(this,"phone")).credential=e,r}return qb(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Rw(e,"POST","/v2/accounts/mfaEnrollment:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Rw(e,"POST","/v2/accounts/mfaSignIn:finalize",Object.assign({tenantId:e.tenantId},t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(WS),KS=function(){function e(){jb(this,e)}return qb(e,null,[{key:"assertion",value:function(e){return HS._fromCredential(e)}}]),e}(),GS=function(){function e(t){jb(this,e),this.auth=t,this.internalListeners=new Map}var t;return qb(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:(t=Fb(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){pw(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function QS(e){return QS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QS(e)}function $S(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return JS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JS(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YS(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZS(e,t,n){return t&&XS(e.prototype,t),n&&XS(e,n),e}function eI(e,t,n){return eI="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iI(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}},eI(e,t,n||e)}function tI(e,t){return tI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},tI(e,t)}function nI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=iI(e);if(t){var i=iI(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return rI(this,n)}}function rI(e,t){if(t&&("object"===QS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function iI(e){return iI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},iI(e)}function aI(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function oI(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){aI(a,r,i,o,u,"next",e)}function u(e){aI(a,r,i,o,u,"throw",e)}o(void 0)}))}}function uI(){return window}VS="Browser",ke(new B("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){pw(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),pw(!(null==o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:VS,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ek(VS)},r=new Sk(e,t);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gw);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),ke(new B("auth-internal",(function(e){return function(e){return new GS(e)}(Ik(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Me("@firebase/auth","0.17.2",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(VS));function sI(e,t,n){return cI.apply(this,arguments)}function cI(){return cI=oI(regeneratorRuntime.mark((function e(t,n,r){var i,a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=uI(),o=a.BuildInfo,mw(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,vI(n.sessionId);case 4:return u=e.sent,s={},wk()?s.ibi=o.packageName:yk()?s.apn=o.packageName:cw(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",jS(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),cI.apply(this,arguments)}function lI(){return lI=oI(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uI(),r=n.BuildInfo,i={},wk()?i.iosBundleId=r.packageName:yk()?i.androidPackageName=r.packageName:cw(t,"operation-not-supported-in-this-environment"),e.next=5,vS(t,i);case 5:case"end":return e.stop()}}),e)}))),lI.apply(this,arguments)}function fI(e){var t=uI().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function hI(e,t,n){return dI.apply(this,arguments)}function dI(){return dI=oI(regeneratorRuntime.mark((function e(t,n,r){var i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=uI(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(lw(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),yk()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),dI.apply(this,arguments)}function pI(e){var t,n,r,i,a,o,u,s,c,l,f=uI();pw("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),pw(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),pw("function"==typeof(null===(a=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pw("function"==typeof(null===(s=null===(u=null===(o=null==f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pw("function"==typeof(null===(l=null===(c=null==f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function vI(e){return mI.apply(this,arguments)}function mI(){return(mI=oI(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yI(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yI(e){if(mw(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var gI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tI(e,t)}(r,e);var t,n=nI(r);function r(){var e;return YS(this,r),(e=n.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return ZS(r,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),eI(iI(r.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:(t=oI(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),r}(hS);function bI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:EI(),postBody:null,tenantId:e.tenantId,error:lw(e,"no-auth-event")}}function wI(e,t){return SI()._set(II(e),t)}function kI(e){return _I.apply(this,arguments)}function _I(){return _I=oI(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SI()._get(II(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,SI()._remove(II(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),_I.apply(this,arguments)}function xI(e,t){var n,r,i=function(e){var t=TI(e),n=t.link?decodeURIComponent(t.link):void 0,r=TI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return TI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=TI(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?lw(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function EI(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function SI(){return gw(Px)}function II(e){return lk("authEvent",e.config.apiKey,e.name)}function TI(e){if(!(null==e?void 0:e.includes("?")))return{};var t=$S(e.split("?"));t[0];return M(t.slice(1).join("?"))}var RI=function(){function e(){YS(this,e),this._redirectPersistence=Lx,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=sS}var t,n;return ZS(e,[{key:"_initialize",value:(n=oI(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new gI(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_openPopup",value:function(e){cw(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:(t=oI(regeneratorRuntime.mark((function e(t,n,r,i){var a,o,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pI(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),KE.clear(),e.next=10,this._originValidation(t);case 10:return o=bI(t,r,i),e.next=13,wI(t,o);case 13:return e.next=15,sI(t,o,n);case 15:return u=e.sent,e.next=18,fI(u);case 18:return s=e.sent,e.abrupt("return",hI(t,a,s));case 20:case"end":return e.stop()}}),e,this)}))),function(e,n,r,i){return t.apply(this,arguments)})},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return lI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=uI(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(oI(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,kI(e);case 2:t.onEvent(AI());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=oI(regeneratorRuntime.mark((function n(r){var i,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,kI(e);case 3:i=n.sent,a=null,i&&(null==r?void 0:r.url)&&(a=xI(i,r.url)),t.onEvent(a||AI());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();void 0!==r&&"function"==typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");uI().handleOpenURL=function(){var e=oI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"==typeof s)try{s(t)}catch(e){console.error(e)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),NI=RI;function AI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:lw("no-auth-event")}}function CI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PI(e,t,n){return t&&OI(e.prototype,t),n&&OI(e,n),e}function DI(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function LI(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){DI(a,r,i,o,u,"next",e)}function u(e){DI(a,r,i,o,u,"throw",e)}o(void 0)}))}}function MI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function UI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return!("file:"!==MI()&&"ionic:"!==MI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function FI(){return I()&&11===(null===document||void 0===document?void 0:document.documentMode)}function jI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return/Edge\/\d+/.test(e)}function VI(){try{var e=self.localStorage,t=Fx();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k();return FI()||jI(e)}()||T()}catch(e){return qI()&&T()}return!1}function qI(){return void 0!==i.g&&"WorkerGlobalScope"in i.g&&"importScripts"in i.g}function BI(){return("http:"===MI()||"https:"===MI()||E()||UI())&&!(S()||x())&&VI()&&!qI()}function zI(){return UI()&&"undefined"!=typeof document}function WI(){return HI.apply(this,arguments)}function HI(){return(HI=LI(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(zI()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var KI={LOCAL:"local",NONE:"none",SESSION:"session"},GI=pw,QI="persistence";function $I(e,t){GI(Object.values(KI).includes(t),e,"invalid-persistence-type"),S()?GI(t!==KI.SESSION,e,"unsupported-persistence-type"):x()?GI(t===KI.NONE,e,"unsupported-persistence-type"):qI()?GI(t===KI.NONE||t===KI.LOCAL&&T(),e,"unsupported-persistence-type"):GI(t===KI.NONE||VI(),e,"unsupported-persistence-type")}function JI(e){return YI.apply(this,arguments)}function YI(){return YI=LI(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=XI(),r=lk(QI,t.config.apiKey,t.name),(null==n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),YI.apply(this,arguments)}function XI(){return"undefined"!=typeof window?window:null}var ZI=pw,eT=function(){function e(){CI(this,e),this.browserResolver=gw(zS),this.cordovaResolver=gw(NI),this.underlyingResolver=null,this._redirectPersistence=Lx,this._completeRedirectFn=sS}var t,n,r,i;return PI(e,[{key:"_initialize",value:(i=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"_openPopup",value:(r=LI(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,n,i){return r.apply(this,arguments)})},{key:"_openRedirect",value:(n=LI(regeneratorRuntime.mark((function e(t,n,r,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)}))),function(e,t,r,i){return n.apply(this,arguments)})},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return zI()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ZI(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:(t=LI(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,WI();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function tT(e){return e.unwrap()}function nT(e){return iT(e)}function rT(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new cT(e,function(e,t){var n,r=q(e),i=t;return pw(t.operationType,r,"argument-error"),pw(null===(n=i.serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Sx._fromError(r,i)}(e,t));else if(r){var i=iT(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function iT(e){var t=(e instanceof R?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof R)&&"temporaryProof"in t&&"phoneNumber"in t)return CE.credentialFromResult(e);var n,r=t.providerId;if(!r||r===$b)return null;switch(r){case Qb:n=y_;break;case Kb:n=m_;break;case Gb:n=g_;break;case Jb:n=w_;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?b_._create(r,u):r_._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new v_(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof R?n.credentialFromError(e):n.credentialFromResult(e)}function aT(e,t){return oT.apply(this,arguments)}function oT(){return oT=LI(regeneratorRuntime.mark((function e(t,n){var r,i,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n;case 3:r=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),e.t0 instanceof R&&rT(t,e.t0),e.t0;case 10:return a=(i=r).operationType,o=i.user,e.abrupt("return",{operationType:a,credential:nT(r),additionalUserInfo:xx(r),user:lT.getOrCreate(o)});case 12:case"end":return e.stop()}}),e,null,[[0,6]])}))),oT.apply(this,arguments)}function uT(e,t){return sT.apply(this,arguments)}function sT(){return sT=LI(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return aT(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),sT.apply(this,arguments)}var cT=function(){function e(t,n){CI(this,e),this.resolver=n,this.auth=t.wrapped()}return PI(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return aT(tT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),lT=function(){function e(t){var n;CI(this,e),this._delegate=t,this.multiFactor=(n=q(t),Nx.has(n)||Nx.set(n,Rx._fromUser(n)),Nx.get(n))}return PI(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(this.auth,q_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=LI(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uT(this.auth,SE(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(this.auth,zE(this._delegate,t,eT)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JI(Ik(this.auth));case 2:return e.abrupt("return",iS(this._delegate,t,eT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(this.auth,z_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return uT(this.auth,function(e,t,n){return TE.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return aT(this.auth,function(e,t,n){return BE.apply(this,arguments)}(this._delegate,e,eT))}},{key:"reauthenticateWithRedirect",value:function(){var e=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JI(Ik(this.auth));case 2:return e.abrupt("return",nS(this._delegate,t,eT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return lx.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N_(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return vx(q(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return vx(q(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return AE.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return px.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return fx.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();lT.USER_MAP=new WeakMap;var fT=pw,hT=function(){function e(t,n){if(CI(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;fT(r,"invalid-api-key",{appName:t.name});var i=[ck];if("undefined"!=typeof window){i=function(e,t){var n=XI();if(!(null==n?void 0:n.sessionStorage))return[];var r=lk(QI,e,t);switch(n.sessionStorage.getItem(r)){case KI.NONE:return[ck];case KI.LOCAL:return[iE,Lx];case KI.SESSION:return[Lx];default:return[]}}(r,t.name);for(var a=0,o=[iE,Px,Lx];a<o.length;a++){var u=o[a];i.includes(u)||i.push(u)}}fT(r,"invalid-api-key",{appName:t.name});var s="undefined"!=typeof window?eT:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(iw),this.linkUnderlyingAuth()}var t;return PI(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?lT.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Rk(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Z_.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ex(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return X_.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=LI(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aT(this._delegate,rx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return cx.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=f_.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=LI(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fT(BI(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,oS(this._delegate,eT);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",aT(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Ik(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=dT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=dT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ax.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Y_.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:(t=LI(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$I(this._delegate,t),e.t0=t,e.next=e.t0===KI.SESSION?4:e.t0===KI.LOCAL?6:e.t0===KI.NONE?11:13;break;case 4:return n=Lx,e.abrupt("break",14);case 6:return e.next=8,gw(iE)._isAvailable();case 8:return r=e.sent,n=r?iE:Px,e.abrupt("break",14);case 11:return n=ck,e.abrupt("break",14);case 13:return e.abrupt("return",cw("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return aT(this._delegate,function(e){return S_.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return aT(this._delegate,j_(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return aT(this._delegate,function(e,t){return G_.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return aT(this._delegate,function(e,t,n){return j_(q(e),h_.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return aT(this._delegate,function(e,t,n){return ox.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return uT(this._delegate,function(e,t,n){return EE.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fT(BI(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",aT(this._delegate,VE(this._delegate,t,eT)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=LI(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fT(BI(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,JI(this._delegate);case 3:return e.abrupt("return",eS(this._delegate,t,eT));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return nx.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function dT(e,t,n){var r=e;"function"!=typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&lT.getOrCreate(e))},error:t,complete:n}}hT.Persistence=KI;var pT=function(){function e(){CI(this,e),this.providerId="phone",this._delegate=new CE(tT(Qe.auth()))}return PI(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return CE.credential(e,t)}}]),e}();pT.PHONE_SIGN_IN_METHOD=CE.PHONE_SIGN_IN_METHOD,pT.PROVIDER_ID=CE.PROVIDER_ID;var vT=pw,mT=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qe.app();CI(this,e),vT(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new kE(t,n,i.auth()),this.type=this._delegate.type}return PI(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new B("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new hT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Yb,PASSWORD_RESET:Xb,RECOVER_EMAIL:Zb,REVERT_SECOND_FACTOR_ADDITION:ew,VERIFY_AND_CHANGE_EMAIL:tw,VERIFY_EMAIL:nw}},EmailAuthProvider:h_,FacebookAuthProvider:m_,GithubAuthProvider:g_,GoogleAuthProvider:y_,OAuthProvider:v_,PhoneAuthProvider:pT,PhoneMultiFactorGenerator:KS,RecaptchaVerifier:mT,TwitterAuthProvider:w_,Auth:hT,AuthCredential:Ck,Error:R}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.1.2")}(Qe);Qe.initializeApp({apiKey:"AIzaSyDh02xdVEfBeqmH33tJb400jZILLmmHL0g",authDomain:"prototype-ae9eb.firebaseapp.com",databaseURL:"https://prototype-ae9eb-default-rtdb.europe-west1.firebasedatabase.app",projectId:"prototype-ae9eb",storageBucket:"prototype-ae9eb.appspot.com",messagingSenderId:"122319683458",appId:"1:122319683458:web:0364b2f50fde6ac375d99b",measurementId:"G-RE1ETFTFQE"});var yT=Qe.auth(),gT=new Qe.auth.GoogleAuthProvider,bT=new Qe.auth.FacebookAuthProvider;const wT=Qe;var kT=(0,t.createContext)({}),_T="?api_key=29ab4f75bb2db1deeb32771398e6c025&language=en-US";function xT(e,t){return xT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},xT(e,t)}function ET(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xT(e,t)}var ST=i(526),IT=i.n(ST);function TT(){return TT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TT.apply(this,arguments)}function RT(e){return"/"===e.charAt(0)}function NT(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const AT=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],a=e&&RT(e),o=t&&RT(t),u=a||o;if(e&&RT(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var s=i[i.length-1];n="."===s||".."===s||""===s}else n=!1;for(var c=0,l=i.length;l>=0;l--){var f=i[l];"."===f?NT(i,l):".."===f?(NT(i,l),c++):c&&(NT(i,l),c--)}if(!u)for(;c--;c)i.unshift("..");!u||""===i[0]||i[0]&&RT(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};var CT="Invariant failed";const OT=function(e,t){if(!e)throw new Error(CT)};function PT(e){return"/"===e.charAt(0)?e:"/"+e}function DT(e){return"/"===e.charAt(0)?e.substr(1):e}function LT(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function MT(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function UT(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function FT(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=TT({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=AT(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function jT(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var a="function"==typeof e?e(t,n):e;"string"==typeof a?"function"==typeof r?r(a,i):i(!0):i(!1!==a)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var VT=!("undefined"==typeof window||!window.document||!window.document.createElement);function qT(e,t){t(window.confirm(e))}var BT="popstate",zT="hashchange";function WT(){try{return window.history.state||{}}catch(e){return{}}}function HT(e){void 0===e&&{},VT||OT(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,a=i.forceRefresh,o=void 0!==a&&a,u=i.getUserConfirmation,s=void 0===u?qT:u,c=i.keyLength,l=void 0===c?6:c,f=e.basename?MT(PT(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,a=i.pathname+i.search+i.hash;return f&&LT(a,f),FT(a,r,n)}function d(){return Math.random().toString(36).substr(2,l)}var p=jT();function v(e){TT(T,e),T.length=t.length,p.notifyListeners(T.location,T.action)}function m(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||b(h(e.state))}function y(){b(h(WT()))}var g=!1;function b(e){if(g)!1,v();else{p.confirmTransitionTo(e,"POP",s,(function(t){t?v({action:"POP",location:e}):function(e){var t=T.location,n=k.indexOf(t.key);-1===n&&0;var r=k.indexOf(e.key);-1===r&&0;var i=n-r;i&&(!0,x(i))}(e)}))}}var w=h(WT()),k=[w.key];function _(e){return f+UT(e)}function x(e){t.go(e)}var E=0;function S(e){1===(E+=e)&&1===e?(window.addEventListener(BT,m),r&&window.addEventListener(zT,y)):0===E&&(window.removeEventListener(BT,m),r&&window.removeEventListener(zT,y))}var I=!1;var T={length:t.length,action:"POP",location:w,createHref:_,push:function(e,r){var i="PUSH",a=FT(e,r,d(),T.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=_(a),u=a.key,s=a.state;if(n)if(t.pushState({key:u,state:s},null,r),o)window.location.href=r;else{var c=k.indexOf(T.location.key),l=k.slice(0,c+1);l.push(a.key),l,v({action:i,location:a})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",a=FT(e,r,d(),T.location);p.confirmTransitionTo(a,i,s,(function(e){if(e){var r=_(a),u=a.key,s=a.state;if(n)if(t.replaceState({key:u,state:s},null,r),o)window.location.replace(r);else{var c=k.indexOf(T.location.key);-1!==c&&(k[c]=a.key),v({action:i,location:a})}else window.location.replace(r)}}))},go:x,goBack:function(){x(-1)},goForward:function(){x(1)},block:function(e){void 0===e&&!1;var t=p.setPrompt(e);return I||(S(1),!0),function(){return I&&(!1,S(-1)),t()}},listen:function(e){var t=p.appendListener(e);return S(1),function(){S(-1),t()}}};return T}var KT="hashchange",GT={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+DT(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:DT,decodePath:PT},slash:{encodePath:PT,decodePath:PT}};function QT(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function $T(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function JT(e){window.location.replace(QT(window.location.href)+"#"+e)}function YT(e){void 0===e&&(e={}),VT||OT(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?qT:r,a=n.hashType,o=void 0===a?"slash":a,u=e.basename?MT(PT(e.basename)):"",s=GT[o],c=s.encodePath,l=s.decodePath;function f(){var e=l($T());return u&&(e=LT(e,u)),FT(e)}var h=jT();function d(e){TT(S,e),S.length=t.length,h.notifyListeners(S.location,S.action)}var p=!1,v=null;function m(){var e=$T(),t=c(e);if(e!==t)JT(t);else{var n=f(),r=S.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(v===UT(n))return;v=null,function(e){if(p)p=!1,d();else{var t="POP";h.confirmTransitionTo(e,t,i,(function(n){n?d({action:t,location:e}):function(e){var t=S.location,n=w.lastIndexOf(UT(t));-1===n&&(n=0);var r=w.lastIndexOf(UT(e));-1===r&&(r=0);var i=n-r;i&&(p=!0,k(i))}(e)}))}}(n)}}var y=$T(),g=c(y);y!==g&&JT(g);var b=f(),w=[UT(b)];function k(e){t.go(e)}var _=0;function x(e){1===(_+=e)&&1===e?window.addEventListener(KT,m):0===_&&window.removeEventListener(KT,m)}var E=!1;var S={length:t.length,action:"POP",location:b,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=QT(window.location.href)),n+"#"+c(u+UT(e))},push:function(e,t){var n="PUSH",r=FT(e,void 0,void 0,S.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=UT(r),i=c(u+t);if($T()!==i){v=t,function(e){window.location.hash=e}(i);var a=w.lastIndexOf(UT(S.location)),o=w.slice(0,a+1);o.push(t),w=o,d({action:n,location:r})}else d()}}))},replace:function(e,t){var n="REPLACE",r=FT(e,void 0,void 0,S.location);h.confirmTransitionTo(r,n,i,(function(e){if(e){var t=UT(r),i=c(u+t);$T()!==i&&(v=t,JT(i));var a=w.indexOf(UT(S.location));-1!==a&&(w[a]=t),d({action:n,location:r})}}))},go:k,goBack:function(){k(-1)},goForward:function(){k(1)},block:function(e){void 0===e&&(e=!1);var t=h.setPrompt(e);return E||(x(1),E=!0),function(){return E&&(E=!1,x(-1)),t()}},listen:function(e){var t=h.appendListener(e);return x(1),function(){x(-1),t()}}};return S}function XT(e,t,n){return Math.min(Math.max(e,t),n)}function ZT(e){void 0===e&&{};var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,a=t.initialIndex,o=void 0===a?0:a,u=t.keyLength,s=void 0===u?6:u,c=jT();function l(e){TT(m,e),m.length=m.entries.length,c.notifyListeners(m.location,m.action)}function f(){return Math.random().toString(36).substr(2,s)}var h=XT(o,0,i.length-1),d=i.map((function(e){return FT(e,void 0,"string"==typeof e?f():e.key||f())})),p=UT;function v(e){var t=XT(m.index+e,0,m.entries.length-1),r=m.entries[t];c.confirmTransitionTo(r,"POP",n,(function(e){e?l({action:"POP",location:r,index:t}):l()}))}var m={length:d.length,action:"POP",location:d[h],index:h,entries:d,createHref:p,push:function(e,t){var r="PUSH",i=FT(e,t,f(),m.location);c.confirmTransitionTo(i,r,n,(function(e){if(e){var t=m.index+1,n=m.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),l({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=FT(e,t,f(),m.location);c.confirmTransitionTo(i,r,n,(function(e){e&&(m.entries[m.index]=i,l({action:r,location:i}))}))},go:v,goBack:function(){v(-1)},goForward:function(){v(1)},canGo:function(e){var t=m.index+e;return t>=0&&t<m.entries.length},block:function(e){return void 0===e&&!1,c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return m}var eR=1073741823,tR="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:{};function nR(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var rR=t.createContext||function(e,n){var r,i,a="__create-react-context-"+function(){var e="__global_unique_id__";return tR[e]=(tR[e]||0)+1}()+"__",o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).emitter=nR(t.props.value),t}ET(t,e);var r=t.prototype;return r.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,i)?(t="function"==typeof n?n(r,i):eR,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},r.render=function(){return this.props.children},t}(t.Component);o.childContextTypes=((r={})[a]=IT().object.isRequired,r);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}ET(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?eR:t},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?eR:e},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return u.contextTypes=((i={})[a]=IT().object,i),{Provider:o,Consumer:u}};const iR=rR;var aR=i(231),oR=i.n(aR);i(532);function uR(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}i(480);var sR=function(e){var t=iR();return t.displayName=e,t},cR=sR("Router-History"),lR=sR("Router"),fR=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}ET(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var r=n.prototype;return r.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return t.createElement(lR.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(cR.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;t.Component;var hR={},dR=0;function pR(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,a=void 0!==i&&i,o=n.strict,u=void 0!==o&&o,s=n.sensitive,c=void 0!==s&&s;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=hR[n]||(hR[n]={});if(r[e])return r[e];var i=[],a={regexp:oR()(e,i,t),keys:i};return dR<1e4&&(r[e]=a,dR++),a}(n,{end:a,strict:u,sensitive:c}),i=r.regexp,o=r.keys,s=i.exec(e);if(!s)return null;var l=s[0],f=s.slice(1),h=e===l;return a&&!h?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:h,params:o.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var vR=function(e){function n(){return e.apply(this,arguments)||this}return ET(n,e),n.prototype.render=function(){var e=this;return t.createElement(lR.Consumer,null,(function(n){n||OT(!1);var r=e.props.location||n.location,i=TT({},n,{location:r,match:e.props.computedMatch?e.props.computedMatch:e.props.path?pR(r.pathname,e.props):n.match}),a=e.props,o=a.children,u=a.component,s=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(lR.Provider,{value:i},i.match?o?"function"==typeof o?o(i):o:u?t.createElement(u,i):s?s(i):null:"function"==typeof o?o(i):null)}))},n}(t.Component);function mR(e){return"/"===e.charAt(0)?e:"/"+e}function yR(e,t){if(!e)return t;var n=mR(e);return 0!==t.pathname.indexOf(n)?t:TT({},t,{pathname:t.pathname.substr(n.length)})}function gR(e){return"string"==typeof e?e:UT(e)}function bR(e){return function(){OT(!1)}}function wR(){}t.Component;var kR=function(e){function n(){return e.apply(this,arguments)||this}return ET(n,e),n.prototype.render=function(){var e=this;return t.createElement(lR.Consumer,null,(function(n){n||OT(!1);var r,i,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==i&&t.isValidElement(e)){r=e;var o=e.props.path||e.props.from;i=o?pR(a.pathname,TT({},e.props,{path:o})):n.match}})),i?t.cloneElement(r,{location:a,computedMatch:i}):null}))},n}(t.Component);var _R=t.useContext;function xR(){return _R(cR)}function ER(){return _R(lR).location}t.Component;var SR=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=YT(t.props),t}return ET(n,e),n.prototype.render=function(){return t.createElement(fR,{history:this.history,children:this.props.children})},n}(t.Component);var IR=function(e,t){return"function"==typeof e?e(t):e},TR=function(e,t){return"string"==typeof e?FT(e,null,null,t):e},RR=function(e){return e},NR=t.forwardRef;void 0===NR&&(NR=RR);var AR=NR((function(e,n){var r=e.innerRef,i=e.navigate,a=e.onClick,o=uR(e,["innerRef","navigate","onClick"]),u=o.target,s=TT({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||u&&"_self"!==u||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return s.ref=RR!==NR&&n||r,t.createElement("a",s)}));var CR=NR((function(e,n){var r=e.component,i=void 0===r?AR:r,a=e.replace,o=e.to,u=e.innerRef,s=uR(e,["component","replace","to","innerRef"]);return t.createElement(lR.Consumer,null,(function(e){e||OT(!1);var r=e.history,c=TR(IR(o,e.location),e.location),l=c?r.createHref(c):"",f=TT({},s,{href:l,navigate:function(){var t=IR(o,e.location),n=UT(e.location)===UT(TR(t));(a||n?r.replace:r.push)(t)}});return RR!==NR?f.ref=n||u:f.innerRef=u,t.createElement(i,f)}))})),OR=function(e){return e},PR=t.forwardRef;void 0===PR&&(PR=OR);PR((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.activeClassName,o=void 0===a?"active":a,u=e.activeStyle,s=e.className,c=e.exact,l=e.isActive,f=e.location,h=e.sensitive,d=e.strict,p=e.style,v=e.to,m=e.innerRef,y=uR(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(lR.Consumer,null,(function(e){e||OT(!1);var r=f||e.location,a=TR(IR(v,r),r),g=a.pathname,b=g&&g.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=b?pR(r.pathname,{path:b,exact:c,sensitive:h,strict:d}):null,k=!!(l?l(w,r):w),_="function"==typeof s?s(k):s,x="function"==typeof p?p(k):p;k&&(_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(_,o),x=TT({},x,u));var E=TT({"aria-current":k&&i||null,className:_,style:x,to:a},y);return OR!==PR?E.ref=n||m:E.innerRef=m,t.createElement(CR,E)}))}));function DR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const MR=function(){var e=DR((0,t.useState)({title:"",subtitle:"",imageURL:"",actionNote:""}),2),n=e[0],r=e[1],i=(0,t.useContext)(kT),a=wT.firestore().collection("ATF"),o=(0,t.useCallback)((function(){var e=[];a.onSnapshot((function(t){t.forEach((function(t){e.push(t.data())})),r({title:e[0].title,subtitle:e[0].subtitle,imageURL:e[0].imageURL,actionNote:e[0].actionNote})}))}),[a]);return(0,t.useEffect)((function(){o()}),[o]),t.createElement("div",{className:"above-the-fold-wrapper"},t.createElement("img",{className:"above-the-fold_cover-image",src:n.imageURL,alt:"movies list cover"}),t.createElement("div",{className:"above-the-fold_info-wrapper"},t.createElement("div",{className:"above-the-fold_info-container"},t.createElement("h1",{className:"above-the-fold_title"},n.title),!0===i.loggedIn&&i.subscribed?t.createElement("div",{className:"above-the-fold_loggedIn__true_div"},t.createElement("h2",{className:"above-the-fold_subtitle"},"Begin your journey"),t.createElement("button",{className:"above-the-fold_action-button"},t.createElement(CR,{to:"/movies"}," Watch Now "))):t.createElement("div",{className:"above-the-fold_loggedIn__false_div"},t.createElement("h2",{className:"above-the-fold_subtitle"},n.subtitle),t.createElement("h3",{className:"above-the-fold_action-note"},n.actionNote),i.subscribed?null:t.createElement("button",{className:"above-the-fold_join-btn",onClick:function(){i.setSubscriptionStatus(!0)}},"Subscribe")))))};const UR=function(e){var n=e.downloadGif,r=e.name,i=e.imageURL;return t.createElement("div",{className:"additional-box_wrapper"},t.createElement("img",{src:i,alt:"",className:"additional-box_image"}),t.createElement("div",{className:"additional-box_info-container"},t.createElement("h4",{className:"additional-box_info-container_name"},r),t.createElement("h4",{className:"additional-box_info-container_downloading"},"Downloading")),t.createElement("img",{src:n,alt:"",className:"additional-box_gif"}))};const FR=function(e){var n=e.videoCover;return t.createElement("div",{className:"video-cover_wrapper"},t.createElement("video",{autoPlay:!0,loop:!0,className:"video-cover_item"},t.createElement("source",{src:n})))};const jR=function(e){var n=e.title,r=e.subtitle,i=e.mediaURL,a=e.mediaAlt,o=e.additionalBox,u=e.videoCover,s=e.downloadGif,c=e.imageURL,l=e.name;return t.createElement("div",{className:"list-gallery-item_wrapper"},t.createElement("div",{className:"list-gallery-item_content-wrapper"},t.createElement("div",{className:"list-gallery-item_info-container"},t.createElement("h2",{className:"list-gallery-item_title"},n),t.createElement("h3",{className:"list-gallery-item_subtitle"},r)),t.createElement("div",{className:"list-gallery-item_media-container"},u?t.createElement(FR,{videoCover:u}):null,t.createElement("img",{src:i,alt:a,className:"list-gallery-item_image"}),o?t.createElement(UR,{downloadGif:s,imageURL:c,name:l}):null)))};function VR(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function qR(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){VR(a,r,i,o,u,"next",e)}function u(e){VR(a,r,i,o,u,"throw",e)}o(void 0)}))}}function BR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const WR=function(){var e=wT.firestore(),n=BR((0,t.useState)([null]),2),r=n[0],i=n[1],a=(0,t.useCallback)(qR(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.collection("HomeListGallery");case 2:r=n.sent,a=[],r.onSnapshot((function(e){e.forEach((function(e){var n=e.data(),r=n.title,i=n.subtitle,o=n.mediaURL,u=n.mediaAlt,s=n.additionalBox,c=n.videoCover,l=n.downloadGif,f=n.imageURL,h=n.name;a.push(t.createElement(jR,{title:r,subtitle:i,mediaURL:o,mediaAlt:u,additionalBox:s,videoCover:c,downloadGif:l,imageURL:f,name:h,key:r}))})),i(a)}));case 5:case"end":return n.stop()}}),n)}))),[e]);return(0,t.useEffect)((function(){a()}),[a]),t.createElement("div",{className:"list-gallery_wrapper"},r)};function HR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return KR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const GR=function(e){var n=e.question,r=e.answer,i=HR((0,t.useState)("none"),2),a=i[0],o=i[1],u={display:a},s=r.map((function(e,n){return t.createElement("h3",{className:"faq_answer-body",id:"faq_answer-body__".concat(n),key:n},e)}));return t.createElement("div",{className:"faq-item_wrapper"},t.createElement("div",{className:"faq_question_wrapper",onClick:function(){o("none"===a?"block":"none")}},t.createElement("h3",{className:"faq_question-body"},n),"none"===a?t.createElement("button",{className:"faq_toggle-btn"},"＋"):t.createElement("button",{className:"faq_toggle-btn",style:{fontSize:"22px",fontWeight:900}},"⨉")),t.createElement("div",{className:"faq_answer-wrapper",style:u},s))};function QR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const JR=function(){var e=QR((0,t.useState)([null]),2),n=e[0],r=e[1],i=wT.firestore().collection("FAQ"),a=(0,t.useCallback)((function(){i.onSnapshot((function(e){var n=[];e.forEach((function(e){var r=e.data(),i=r.question,a=r.answer,o=r.sort;n.push({item:t.createElement(GR,{question:i,answer:a,key:o}),num:o})})),n=n.sort((function(e,t){return e.num-t.num}));var i=n.map((function(e){return e.item}));r(i)}))}),[i]);return(0,t.useEffect)((function(){a()}),[a]),t.createElement("div",{className:"faq-list_wrapper"},t.createElement("div",{className:"faq-list_content-container"},t.createElement("h2",{className:"faq_title"},"Frequently Asked Questions"),t.createElement("div",{className:"faq-items_wrapper"},n)))};var YR=i(691);function XR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ZR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZR(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZR(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const eN=function(e){var n=e.setModalVisibility,r=(0,t.useContext)(kT),i=XR((0,t.useState)("none"),2),a=i[0],o=i[1];return t.createElement("div",{className:"members-bar_wrapper"},r.loggedIn?t.createElement("button",{className:"member_welcome-message",onClick:function(){YR.tq&&o("none"===a?"block":"none")}},"Welcome, ",r.name):null,t.createElement("button",{className:"members-bar_login-button",style:{display:YR.tq&&!r.loggedIn||!YR.tq?"block":a,top:YR.tq&&r.loggedIn?"-10px":YR.tq&&!r.loggedIn?"-35px":"25px"},onClick:function(){r.loggedIn?(r.setStatus(!1),window.localStorage.removeItem("appAuth-email"),window.localStorage.removeItem("appAuth-name")):n(!0)}},r.loggedIn?"Log Out":"Log In"))};function tN(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function nN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){tN(a,r,i,o,u,"next",e)}function u(e){tN(a,r,i,o,u,"throw",e)}o(void 0)}))}}function rN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return iN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const aN=function(e){var n=e.setModalVisibility,r=rN((0,t.useState)("login"),2),i=r[0],a=r[1],o=rN((0,t.useState)({visible:!1,code:""}),2),u=o[0],s=o[1],c=(0,t.useContext)(kT),l=function(e,t){window.localStorage.setItem("appAuth-email",e),window.localStorage.setItem("appAuth-name",t),c.setEmail(e),c.setStatus(!0),c.setName(t),s({visible:!1,code:""}),n(!1)},f=function(){var e=nN(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("login-form_email"),n=document.getElementById("login-form_password"),"signup"!==i){e.next=15;break}return e.prev=3,e.next=6,yT.createUserWithEmailAndPassword(t.value,n.value);case 6:(r=e.sent).user&&r.user.email&&l(r.user.email,r.user.email.split("@")[0]),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),s({visible:!0,code:""+e.t0});case 13:e.next=25;break;case 15:return e.prev=15,e.next=18,yT.signInWithEmailAndPassword(t.value,n.value);case 18:(a=e.sent).user&&a.user.email&&l(a.user.email,a.user.email.split("@")[0]),e.next=25;break;case 22:e.prev=22,e.t1=e.catch(15),s({visible:!0,code:""+e.t1});case 25:case"end":return e.stop()}}),e,null,[[3,10],[15,22]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=nN(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("google"!==t){e.next=13;break}return e.prev=1,e.next=4,yT.signInWithPopup(gT);case 4:(n=e.sent).user&&n.user.email&&n.user.displayName&&l(n.user.email,n.user.displayName),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({visible:!0,code:"Error here: "+e.t0});case 11:e.next=23;break;case 13:return e.prev=13,e.next=16,yT.signInWithPopup(bT);case 16:(r=e.sent).user&&r.user.email&&r.user.displayName&&l(r.user.email,r.user.displayName),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),s({visible:!0,code:"Error here: "+e.t1});case 23:case"end":return e.stop()}}),e,null,[[1,8],[13,20]])})));return function(t){return e.apply(this,arguments)}}();return t.createElement("div",{className:"login-modal_wrapper"},t.createElement("div",{className:"login-modal_container"},t.createElement("h1",{className:"login-modal_title",onClick:function(){a("login"===i?"signup":"login")}},"login"===i?"Click here to Sign Up":"Click here to Log In"),t.createElement("input",{type:"email",className:"login-form_email",id:"login-form_email",onInput:function(e){return s({visible:!1,code:""})}}),t.createElement("input",{type:"password",className:"login-form_password",id:"login-form_password",onInput:function(e){return s({visible:!1,code:""})}}),u.visible?t.createElement("h5",{className:"login-modal_error-message",style:{color:"red"}},u.code):null,t.createElement("button",{className:"login-form_submit-btn",onClick:f},"Submit"),t.createElement("hr",{style:{width:"300px",color:"rgba(109, 109, 109, 0.322)",margin:"30px 0"}}),t.createElement("div",{className:"login-modal_oauth_container"},t.createElement("button",{className:"login-form_google-login",type:"button",onClick:function(){return h("google")}},"login"===i?"Login with Google":"Sign Up with Google"),t.createElement("button",{className:"login-form_facebook-login",type:"button",onClick:function(){return h("facebook")}},"login"===i?"Login with Facebook":"Sign Up with Facebook")),t.createElement("button",{className:"login-modal_close-btn",onClick:function(){return n(!1)}},"×")))};function oN(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function uN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){oN(a,r,i,o,u,"next",e)}function u(e){oN(a,r,i,o,u,"throw",e)}o(void 0)}))}}function sN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const lN=function(){var e=sN((0,t.useState)(""),2),n=e[0],r=e[1],i=sN((0,t.useState)(!1),2),a=i[0],o=i[1],u=(0,t.useCallback)(uN(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=wT.storage().ref(),e.next=3,t.child("ATFImages/netflix.png");case 3:return n=e.sent,e.next=6,n.getDownloadURL();case 6:i=e.sent,r(i);case 8:case"end":return e.stop()}}),e)}))),[]);return(0,t.useEffect)((function(){u()}),[u]),t.createElement("div",{className:"header-home_wrapper"},t.createElement(CR,{to:"/"},t.createElement("img",{className:"site-logo-img",src:n,alt:"Netflix logo"})),t.createElement(eN,{setModalVisibility:o}),a?t.createElement(aN,{setModalVisibility:o}):null)};const fN=function(){return t.createElement("div",{className:"home-page-wrapper"},t.createElement(lN,null),t.createElement(MR,null),t.createElement(WR,null),t.createElement(JR,null))};const hN=function(e){var n=e.title,r=e.poster_path;return t.createElement("div",{className:"search-item_wrapper",style:{backgroundImage:"url(".concat(r?"https://image.tmdb.org/t/p/original"+r:"https://imgix.bustle.com/uploads/image/2017/8/29/c8c8077a-10fc-44d5-93f0-da4e592a299e-netflix-logo-print_pms.jpg",")")}},t.createElement("h5",{className:"search-item_title"},n))};function dN(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function pN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const mN=function(){var e=pN((0,t.useState)(null),2),n=e[0],r=e[1],i=pN((0,t.useState)("none"),2),a=i[0],o=i[1],u=xR(),s=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){dN(a,r,i,o,u,"next",e)}function u(e){dN(a,r,i,o,u,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(n){var i,a,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=n.currentTarget).value.length>2)){e.next=10;break}return e.next=4,fetch("https://api.themoviedb.org/3/search/movie"+_T+"&query="+i.value+"&page=1").then((function(e){return e.json()}));case 4:a=e.sent,u=a.results,s=u.map((function(e){return t.createElement(CR,{to:"/movies/"+e.id,key:e.id},t.createElement(hN,{title:e.title,poster_path:e.poster_path}))})),r(s),i.focus(),o("grid");case 10:""===i.value.trim()&&c();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){o("none")};return(0,t.useEffect)((function(){u.listen((function(e,t){"PUSH"===t&&c()}))}),[u]),t.createElement("div",{className:"search-bar_wrapper"},t.createElement("input",{className:"search-bar_input-bar",list:"movies-list",name:"moviesSearch",placeholder:"Search a movie...",autoComplete:"off",onInput:s}),t.createElement("div",{className:"search-options_wrapper",style:{display:a}},n))};function yN(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function gN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){yN(a,r,i,o,u,"next",e)}function u(e){yN(a,r,i,o,u,"throw",e)}o(void 0)}))}}function bN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const kN=function(){var e=bN((0,t.useState)(""),2),n=e[0],r=e[1],i=(0,t.useContext)(kT),a=i.loggedIn,o=bN((0,t.useState)(!1),2),u=o[0],s=o[1],c=bN((0,t.useState)(!1),2),l=c[0],f=c[1],h=(0,t.useCallback)(gN(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=wT.storage().ref(),e.next=3,t.child("ATFImages/netflix.png");case 3:return n=e.sent,e.next=6,n.getDownloadURL();case 6:i=e.sent,r(i);case 8:case"end":return e.stop()}}),e)}))),[]);return(0,t.useEffect)((function(){h()}),[h]),t.createElement("div",{className:"header-global_wrapper"},t.createElement(CR,{to:"/"},t.createElement("img",{className:"site-logo-img",src:n,alt:"Netflix logo"})),t.createElement(mN,null),t.createElement("div",{className:"header-global_members-area",style:{display:YR.tq&&!l?"none":"flex"}},t.createElement("span",null," ",i.loggedIn?"Welcome, ".concat(i.name,"!"):"UNLIMITED TV SHOWS & MOVIES"),!i.subscribed&&i.loggedIn?t.createElement("button",{className:"subscription-bar",onClick:function(){i.subscribed?i.setSubscriptionStatus(!1):i.setSubscriptionStatus(!0)}},"Join Now"):null,t.createElement("button",{className:"login-bar",onClick:function(){i.loggedIn?(i.setStatus(!1),window.localStorage.removeItem("appAuth-email")):s(!0)}},a?"Sign Out":"Sign Up")),YR.tq?t.createElement("button",{className:"members-bar_mobile-more-btn",onClick:function(){f(!l)}},"More"):null,u?t.createElement(aN,{setModalVisibility:s}):null)};function _N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const EN=function(e){var n=e.data,r=e.category,i=xR(),a=ER(),o=_N((0,t.useState)("gray"),2),u=o[0],s=o[1],c=(0,t.useCallback)((function(){var e=a.search.replace("?","");e&&e.split("&").map((function(e){return e.split("=")})).map((function(e){return{key:e[0],value:e[1].toString().split("|")}})).forEach((function(e){["true","false"].includes(n[1].toString())?(s("gray"),e.value.includes(n[1].toString())&&s("green")):e.value.includes(n[1].toString())&&s("green")}))}),[a,n]);return(0,t.useEffect)((function(){c()}),[c]),t.createElement("div",{className:"filter-subcategory-item_wrapper"},t.createElement("button",{className:"filter-subcategory-item_button",onClick:function(){var e=a.search.replace("?","");if(e){var t=e.split("&").map((function(e){return e.split("=")})).map((function(e){return{key:e[0],value:e[1].toString().split("|")}})),o=[],u=!1;t.forEach((function(e){if(e.key===r.toLowerCase().replace(" ","_")){if(-1===e.value.indexOf(n[1].toString()))["true","false"].includes(n[1].toString())?o.push("".concat(e.key,"=").concat(n[1].toString())):(e.value.push(n[1].toString()),o.push("".concat(e.key,"=").concat(e.value.join("|"))));else{var t=e.value.filter((function(e){return e!==n[1].toString()}));t.length>0&&o.push("".concat(e.key,"=").concat(t.join("|"))),s("gray")}u=!0}else o.push("".concat(e.key,"=").concat(e.value.join("|")))})),!1===u&&(o=["".concat(e,"&").concat(r.toLowerCase().replace(" ","_"),"=").concat(n[1])]),i.push({search:o.join("&")})}else i.push({search:"".concat(r.toLowerCase().replace(" ","_"),"=").concat(n[1])})},style:{color:u}},n[0]))};function SN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return IN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const TN=function(e){var n=e.data,r=SN((0,t.useState)([]),2),i=r[0],a=r[1],o=SN((0,t.useState)("block"),2),u=o[0],s=o[1],c=(0,t.useCallback)((function(){var e=n.value.map((function(e,r){return t.createElement(EN,{data:[e.lab,e.val],category:n.label,key:"value"+r})}));a(e)}),[n]);return(0,t.useEffect)((function(){return c()}),[c]),t.createElement("div",{className:"filter-category-item_wrapper"},t.createElement("button",{className:"category-label_wrapper",onClick:function(){s("block"===u?"none":"block")}},n.label),t.createElement("div",{className:"subcategories-list_wrapper",style:{display:u}},i))};function RN(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function NN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){RN(a,r,i,o,u,"next",e)}function u(e){RN(a,r,i,o,u,"throw",e)}o(void 0)}))}}function AN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return CN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function CN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ON=function(){var e=AN((0,t.useState)([null]),2),n=e[0],r=e[1],i=function(){var e=NN(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/genre/movie/list"+_T).then((function(e){return e.json()}));case 2:return t=e.sent,n=t.genres.map((function(e){return{lab:e.name,val:e.id.toString()}})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=(0,t.useCallback)(NN(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:n=e.sent,a=[{label:"Categories",value:[{val:"top_rated",lab:"Top Rated"},{val:"popular",lab:"Popular"},{val:"upcoming",lab:"Upcoming"},{val:"now_playing",lab:"Now Playing"}]},{label:"Genres",value:n},{label:"Include Adult",value:[{lab:"Include",val:!0},{lab:"Exclude",val:!1}]}].map((function(e,n){return t.createElement(TN,{data:e,key:"cat"+n})})),r(a);case 6:case"end":return e.stop()}}),e)}))),[]);return(0,t.useEffect)((function(){a()}),[a]),t.createElement("div",{className:"filter-categories-list_wrapper"},n)};const PN=function(e){var n=e.setFiltersStatus;return t.createElement("div",{className:"filter-widget_wrapper",style:{top:0}},t.createElement(ON,null),t.createElement("button",{className:"filter-widget_close-btn",onClick:n},"Close"))};const DN=function(e){var n=e.title,r=e.id,i=e.poster_path;return t.createElement(CR,{to:"/movies/".concat(r)},t.createElement("div",{className:"movie-item_wrapper",key:r.toString()},t.createElement("div",{className:"movie-item_poster-container",style:{backgroundImage:"url(".concat("https://image.tmdb.org/t/p/original").concat(i).concat(_T,")")}}),t.createElement("h3",{className:"movie-item_title"},n)))};function LN(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function MN(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){LN(a,r,i,o,u,"next",e)}function u(e){LN(a,r,i,o,u,"throw",e)}o(void 0)}))}}function UN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jN=window.innerWidth,VN=480;const qN=function(e){var n=e.category,r=UN((0,t.useState)([null]),2),i=r[0],a=r[1],o=UN((0,t.useState)(0),2),u=o[0],s=o[1],c=UN((0,t.useState)("none"),2),l=c[0],f=c[1],h=UN((0,t.useState)("flex"),2),d=h[0],p=h[1],v=(0,t.useCallback)(MN(regeneratorRuntime.mark((function e(){var r,i,o,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(n).concat(_T));case 2:return r=e.sent,e.next=5,r.json();case 5:i=e.sent,o=i.results,u=[],o.forEach((function(e){var n=e.title,r=e.id,i=e.poster_path;u.push(t.createElement(DN,{title:n,id:r,poster_path:i,key:r}))})),a(u);case 10:case"end":return e.stop()}}),e)}))),[n]),m=function(e){var t=u;if("forward"===e){var r=document.getElementById("movies-container_".concat(n)).lastElementChild.getBoundingClientRect().right;s(t-=VN),r<jN+VN?p("none"):f("flex")}else s(t+=VN),0===t||t>VN?f("none"):p("flex")};return(0,t.useEffect)((function(){v()}),[v]),t.createElement("div",{className:"movies-list_wrapper"},t.createElement("h2",{className:"movies-page_subtitle"},n.toUpperCase()),t.createElement("div",{className:"movies-page_movies-list"},t.createElement("div",{className:"movies-list_navigation movies-list_navigation__left",style:{display:l}},t.createElement("button",{className:"movies-list_nav-btn movies-list_nav-btn_left",onClick:function(e){return m("back")}},t.createElement("span",null))),t.createElement("div",{className:"movies-list_movies-container",id:"movies-container_".concat(n),style:{transform:"translateX(".concat(u,"px)")}},i),t.createElement("div",{className:"movies-list_navigation movies-list_navigation__right",style:{display:d}},t.createElement("button",{className:"movies-list_nav-btn movies-list_nav-btn_right",onClick:function(e){return m("forward")}},t.createElement("span",null)))))};const BN=function(e){var n=e.title,r=e.poster_path,i=e.id;return t.createElement(CR,{to:"/movies/".concat(i)},t.createElement("div",{className:"filtered-movie_item_wrapper"},t.createElement("h3",{className:"filtered-movie_item_title"},n),t.createElement("div",{className:"filtered-movie_item_poster",style:{backgroundImage:"url(".concat("https://image.tmdb.org/t/p/original"+r,")")}})))};function zN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return WN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const HN=function(e){var n=e.pageNum,r=e.setPage,i=e.page,a=zN((0,t.useState)("black"),2),o=a[0],u=a[1],s=(0,t.useCallback)((function(){u(n===i?"blue":"black")}),[i,n]);return(0,t.useEffect)((function(){s()}),[s]),t.createElement("div",{className:"pagination-item_wrapper"},t.createElement("button",{className:"pagination-item_btn",onClick:function(){return r(n)},style:{color:o,borderColor:o}},n))};function KN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return GN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GN(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const QN=function(e){var n=e.setPage,r=e.page,i=KN((0,t.useState)(null),2),a=i[0],o=i[1],u=(0,t.useCallback)((function(){var e=new Array(5).fill(0).map((function(e,t){return t})).map((function(e){return t.createElement(HN,{pageNum:e+1,setPage:n,page:r})}));o(e)}),[n,r]);return(0,t.useEffect)((function(){u()}),[u]),t.createElement("div",{className:"pagination-widget_wrapper"},a)};function $N(e){return function(e){if(Array.isArray(e))return XN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||YN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||YN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YN(e,t){if(e){if("string"==typeof e)return XN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XN(e,t):void 0}}function XN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const ZN=function(){var e=JN((0,t.useState)(!1),2),n=e[0],r=e[1],i=JN((0,t.useState)(null),2),a=i[0],o=i[1],u=JN((0,t.useState)(1),2),s=u[0],c=u[1],l=ER().search,f=function(){r(!n)},h=(0,t.useCallback)((function(){if(l){var e=l.replace("?","").split("&").map((function(e){return e.split("=")})).map((function(e){return{key:e[0],value:e[1].toString().split("|")}})).map((function(e){switch(e.key){case"categories":return new Promise((function(t,n){var r=e.value.map((function(e){return fetch("https://api.themoviedb.org/3/movie/"+e+_T+"&page="+s).then((function(e){return e.json()})).then((function(e){return e.results}))}));Promise.all(r).then((function(e){t([].concat.apply([],e))}))}));case"genres":return fetch("https://api.themoviedb.org/3/discover/movie"+_T+"&with_genres="+e.value.join("|")+"&page="+s).then((function(e){return e.json()})).then((function(e){return e.results}));case"include_adult":return fetch("https://api.themoviedb.org/3/discover/movie"+_T+"&include_adult"+e.value.join("|")+"&page="+s).then((function(e){return e.json()})).then((function(e){return e.results}))}}));Promise.all(e).then((function(e){var n=[].concat.apply([],e);console.log("all results: ",n);var r=n.map((function(e){return e.id})),i=$N(new Set(r)).map((function(e){return n.filter((function(t){return t.id===e}))[0]})).map((function(e,n){return t.createElement(BN,{title:e.title,id:e.id,poster_path:e.poster_path,key:n})}));o(t.createElement("div",{className:"filtered-movie-list_wrapper"},i))}))}else{var n=["upcoming","top_rated"].map((function(e,n){return t.createElement(qN,{category:e,key:"cat"+n})}));o(n)}}),[l,s]);return(0,t.useEffect)((function(){h()}),[h]),t.createElement("div",{className:"movies-page_wrapper"},t.createElement(kN,null),t.createElement("div",{className:"filter-widget-space_wrapper"},n?t.createElement(PN,{setFiltersStatus:f}):t.createElement("h3",{className:"filter-widget-space_title",onClick:f,style:{top:"50px"}},"Discover More")),t.createElement("h1",{className:"movies-page_title"},"Netflix choice"),t.createElement("div",{className:"movies-list_page-container"},a),l?t.createElement(QN,{setPage:c,page:s}):null)};function eA(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function tA(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){eA(a,r,i,o,u,"next",e)}function u(e){eA(a,r,i,o,u,"throw",e)}o(void 0)}))}}function nA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const iA=function(e){var n=e.id,r=nA((0,t.useState)(null),2),i=r[0],a=r[1],o=(0,t.useCallback)(tA(regeneratorRuntime.mark((function e(){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(n,"/videos")+_T).then((function(e){return e.json()}));case 2:(r=e.sent).results&&(i=r.results,o=i.map((function(e,n){return t.createElement("iframe",{className:"movie-item_video_container",style:{border:"none",margin:"5px"},width:YR.Em?"45%":"500px",height:"250px",src:"https://www.youtube.com/embed/".concat(e.key,"/"),title:"YouTube video player",key:"video"+n})})),a(o));case 4:case"end":return e.stop()}}),e)}))),[n]);return(0,t.useEffect)((function(){o()}),[o]),t.createElement("div",{className:"movie-item-video_wrapper",style:{marginTop:"50px",display:"flex",justifyContent:"space-around",flexWrap:"wrap"}},i)};const aA=function(e){var n=e.movieData[0],r=n.id,i=n.adult,a=n.genres,o=n.original_title,u=n.overview,s=n.popularity,c=n.poster_path,l=n.release_date,f=n.revenue,h=n.status,d=n.tagline,p=n.vote_count,v=a.map((function(e){return e.name})).join(", "),m=(0,t.useContext)(kT);return t.createElement("div",{className:"movie-item-details_wrapper"},t.createElement("div",{className:"movie-item_poster",style:{backgroundImage:"url(".concat(c?"https://image.tmdb.org/t/p/original"+c:"https://static.wikia.nocookie.net/netflix/images/5/54/Netflix_logo.png/revision/latest?cb=20190623201834&path-prefix=ru",")")}}),t.createElement("div",{className:"movie-item_main-data movie-item_block"},t.createElement("div",{className:"movie-item_audience-data movie-item_sub-block"},t.createElement("h3",{className:"movie-item_audience-data_adult-status"},i?"Rated":"General audience")),t.createElement("div",{className:"movie-item_info movie-item_sub-block"},t.createElement("h2",{className:"movie-item_info_title"},o),t.createElement("h3",{className:"movie-item_info_release-date"},l),t.createElement("h3",{className:"movie-item_info_overview"},u))),m.subscribed?t.createElement("div",null):t.createElement("div",{className:"join-now-banner"},t.createElement("div",{className:"join-now_text"},t.createElement("img",{className:"join-now_logo",src:"https://pngimg.com/uploads/netflix/netflix_PNG15.png",alt:"netflix-logo"}),t.createElement("h3",{className:"join-now_subtitle"},"Watch all movies now.")),t.createElement("button",{className:"join-now_action-btn"},"Join Now")),t.createElement("div",{className:"movie-item_tagline-wrapper"},t.createElement("h3",{className:"movie-item_info_tagline"},d)),t.createElement("div",{className:"movie-item_additional-info movie-item_block"},t.createElement("h2",{className:"movie-item_additional-info_details"},"More Details"),t.createElement("div",{className:"movie-item_stats movie-item_sub-block"},t.createElement("h3",{className:"movie-item_stats_popularity"}," ",t.createElement("span",null,"Popularity: ")," ",t.createElement("br",null)," ",s),t.createElement("h3",{className:"movie-item_genres"},t.createElement("span",null,"Genres:")," ",t.createElement("br",null)," ",v),t.createElement("h3",{className:"movie-item_stats_revenue"}," ",t.createElement("span",null,"Revenue: ")," ",t.createElement("br",null),"  ",f),t.createElement("h3",{className:"movie-item_stats_vote-count"}," ",t.createElement("span",null,"Voted:"),"  ",t.createElement("br",null),"  ",p),t.createElement("h3",{className:"movie-item_stats_status"},t.createElement("span",null,"Release status:")," ",t.createElement("br",null),"  ",h))),t.createElement(iA,{id:r.toString()}))};const oA=function(e){var n=e.data,r=n.poster_path,i=n.original_title;return t.createElement("div",{className:"similar-item_wrapper"},t.createElement("div",{className:"similar-item_poster",style:{backgroundImage:"url(".concat("https://image.tmdb.org/t/p/original").concat(r,")")}}),t.createElement("h3",{className:"similar-item_title"},i))};function uA(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function sA(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){uA(a,r,i,o,u,"next",e)}function u(e){uA(a,r,i,o,u,"throw",e)}o(void 0)}))}}function cA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const fA=function(e){var n=e.id,r=cA((0,t.useState)([]),2),i=r[0],a=r[1],o=(0,t.useCallback)(sA(regeneratorRuntime.mark((function e(){var r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.themoviedb.org/3/movie/".concat(n,"/similar").concat(_T)).then((function(e){return e.json()}));case 2:r=e.sent,i=r.results,o=i.map((function(e,n){return t.createElement(CR,{to:"/movies/"+e.id,key:"simLink"+n},t.createElement(oA,{data:e,key:"similar"+n}))})),a(o);case 6:case"end":return e.stop()}}),e)}))),[n]);return(0,t.useEffect)((function(){o()}),[o]),t.createElement("div",{className:"movie-item-similar_wrapper"},t.createElement("h3",{className:"movie-item_similar_text"},"Discover More:"),t.createElement("div",{className:"movie-item_similar_container"},i))};function hA(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function dA(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){hA(a,r,i,o,u,"next",e)}function u(e){hA(a,r,i,o,u,"throw",e)}o(void 0)}))}}function pA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mA={id:0,adult:!1,genres:[{id:1,name:""}],original_title:"",overview:"",popularity:12,poster_path:"",release_date:"",revenue:12345,status:"Released",tagline:"",vote_count:123};const yA=function(){var e=ER().pathname.replace("/movies",""),n=pA((0,t.useState)(mA),2),r=n[0],i=n[1],a=(0,t.useCallback)(dA(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("screen width: ",window.innerWidth),t.next=3,fetch("https://api.themoviedb.org/3/movie".concat(e).concat(_T)).then((function(e){return e.json()}));case 3:n=t.sent,i(n),window.scroll({top:0,behavior:"smooth"});case 6:case"end":return t.stop()}}),t)}))),[e]);return(0,t.useEffect)((function(){a()}),[a]),t.createElement("div",{className:"movie_item_individual_wrapper"},t.createElement(kN,null),t.createElement(aA,{movieData:[r]}),t.createElement(fA,{id:e}))};const gA=function(){return t.createElement("div",{className:"footer_wrapper"},t.createElement(SR,null,t.createElement(CR,{to:"/builder"},t.createElement("h3",{className:"footer_title"},"Click to build your own widget!"))))};var bA=[{group:"div",backgroundColor:"#fe02e0",title:"Boxes",items:[{key:"div",class:"element-child box-element",id:"redDiv",style:{backgroundColor:"#ff0000",width:"150px",height:"60px",cursor:"pointer",borderWidth:"1px",borderColor:"#ffffff",color:"#ffffff",borderRadius:"0",borderStyle:"solid"},content:"",offsetTop:0,offsetLeft:0,count:1},{key:"div",class:"element-child box-element",id:"yellowDiv",style:{backgroundColor:"#f8ed04",width:"150px",height:"60px",cursor:"pointer",borderWidth:"0",borderColor:"#ffffff",color:"#ffffff",borderRadius:"0",borderStyle:"none"},content:"",offsetTop:200,offsetLeft:200,count:1}]},{group:"button",backgroundColor:"#000000",title:"Buttons",items:[{key:"button",class:"element-child button-element",id:"blueButton",style:{backgroundColor:"blue",width:"100px",height:"50px",cursor:"pointer",borderWidth:"1px",borderColor:"#ffffff",borderRadius:"15px",borderStyle:"none",color:"#ffffff"},content:"Hello World!",offsetTop:200,offsetLeft:200,count:1},{key:"button",class:"element-child button-element",id:"fuchsiaButton",style:{backgroundColor:"#e10a9d",width:"100px",height:"50px",cursor:"pointer",borderWidth:"0",borderColor:"#ffffff",borderRadius:"5px",color:"#ffffff",borderStyle:"none"},content:"Contact Us!",offsetTop:200,offsetLeft:200,count:1}]}];function wA(e){return function(e){if(Array.isArray(e))return xA(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||_A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _A(e,t){if(e){if("string"==typeof e)return xA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xA(e,t):void 0}}function xA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const EA=function(e){var n=e.previewElements,r=e.setPreviewElements,i=kA((0,t.useState)(700),2),a=i[0],o=i[1],u=window.localStorage.getItem("previewItems"),s=function(e){var t,n=e.clientX;(t=a-(a-n-100))>=350&&t<=700&&o(t)},c=(0,t.useCallback)((function(){u&&r(u)}),[u,r]);return(0,t.useEffect)((function(){return c()}),[c]),t.createElement("div",{className:"builder-editor_wrapper",id:"builder-editor_wrapper",style:{width:a+"px"}},t.createElement("button",{id:"resize-handler",onMouseDown:function(){window.addEventListener("mousemove",s),window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",s)}))}}),t.createElement("div",{className:"editor-elements_container"},bA.map((function(e,i){return t.createElement("div",{className:"elements-group_container",style:{backgroundColor:e.backgroundColor},key:i},t.createElement("h3",{className:"elements-group_title"},e.title),t.createElement("div",{className:"element-group_elements-list"},e.items.map((function(e,i){var a=t.createElement(e.key,{style:e.style,className:e.class},e.content);return t.createElement("div",{className:"element-item_wrapper",key:i+"child",onClick:function(t){return function(e,t){var i,a={element:t};if(n){var o=JSON.parse(n),u=Math.max.apply(Math,wA(o.items.map((function(e){return e.element.count}))));u>0?(a.element.count=u+1,i=JSON.stringify({items:[].concat(wA(o.items),[a])})):i=JSON.stringify({items:[a]})}else i=JSON.stringify({items:[a]});r(i)}(0,e)}},a)}))))}))))};const SA=function(e){var n=e.element,r=e.previewState,i=e.closePanel,a=r.previewElements,o=r.setPreviewElements,u=[{wrapperClassName:"border-panel_wrapper",inputClassName:"border_range",titleClassName:"border_title",inputType:"range",min:1,max:10,value:n.style.borderWidth,title:"Border width: "},{wrapperClassName:"bg-color_wrapper",inputClassName:"bg-color_range",titleClassName:"bg-color_title",inputType:"color",min:0,max:0,value:n.style.backgroundColor,title:"Background: "},{wrapperClassName:"border-color_wrapper",inputClassName:"border-color_range",titleClassName:"border-color_title",inputType:"color",min:0,max:0,value:n.style.borderColor,title:"Border color: "}],s=function(e){var t=e.target.classList[0];if(a){var r=null,i=JSON.parse(a);switch(t){case"bg-color_range":r=i.items.map((function(t){return n.id===t.element.id&&n.count===t.element.count&&(t.element.style.backgroundColor=e.target.value),t}));break;case"border_range":r=i.items.map((function(t){return n.id===t.element.id&&n.count===t.element.count&&("none"!==n.style.borderStyle||(t.element.style.borderStyle="solid",t.element.style.borderColor="white"),t.element.style.borderWidth=e.target.value+"px"),t}));break;case"border-color_range":r=i.items.map((function(t){return n.id===t.element.id&&n.count===t.element.count&&n.style.borderStyle&&(t.element.style.borderColor=e.target.value),t}))}o(JSON.stringify({items:r}))}};return window.addEventListener("mouseup",(function(e){for(var t=document.getElementsByClassName("preview-edit-panel_wrapper"),n=e.target.className,r=0;r<t.length;r++){var a;null!==(a=t.item(r))&&void 0!==a&&a.innerHTML.includes(n)||i()}})),t.createElement("div",{className:"preview-edit-panel_wrapper"},u.map((function(e,n){return t.createElement("div",{className:"edit-panel_item-wrapper ".concat(e.wrapperClassName),key:n},t.createElement("h5",{className:e.titleClassName},e.title,"  ",e.value," "),t.createElement("input",{type:e.inputType,className:"".concat(e.inputClassName," input-range"),min:e.min,max:e.max,value:e.value,onChange:s}))})))};function IA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return TA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function TA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const RA=function(e){var n=e.element,r=e.previewState,i=r.previewElements,a=r.setPreviewElements,o=IA((0,t.useState)("none"),2),u=o[0],s=o[1],c=function e(t){if(i){var r=JSON.parse(i).items.map((function(r){if(r.element.id===n.id&&r.element.count===n.count){var i=document.getElementById("preview-item-"+n.id+"_".concat(n.count));console.log(i);var a=document.getElementById("builder-editor_wrapper");if(i.scrollWidth>0&&i.scrollHeight>0){var o=t.clientX-a.offsetWidth-Number(n.style.width.replace("px","")),u=t.clientY-i.offsetHeight-Number(n.style.height.replace("px",""));r.element.offsetLeft=o,r.element.offsetTop=u}else window.removeEventListener("mousemove",e);return r}return r}));a(JSON.stringify({items:r}))}},l=function(){console.log(u),s("none"===u?"block":"none")},f=function(e){if(i){var t=JSON.parse(i).items.map((function(t){if(t.element.id===n.id&&t.element.count===n.count){var r=document.getElementById("preview-item-".concat(n.id,"_").concat(n.count)),i=e.clientX,a=e.clientY;return t.element.style.width=i-r.offsetLeft-Number(t.element.style.width.replace("px",""))+"px",t.element.style.height=a-r.offsetTop-Number(t.element.style.height.replace("px",""))+"px",console.log(i,r),t}return t}));a(JSON.stringify({items:t}))}};return t.createElement("div",{className:"preview-item_wrapper",id:"preview-item-".concat(n.id,"_").concat(n.count),style:{top:n.offsetTop+"px",left:n.offsetLeft+"px"}},t.createElement("div",{className:"preview-item_wrapper"},"none"===u?t.createElement("button",{className:"preview-item_edit-btn",onClick:l},t.createElement("i",{className:"far fa-edit fa-lg"})):t.createElement(SA,{previewState:r,element:n,closePanel:l}),t.createElement(n.key,{style:n.style,className:n.class+"_preview",onMouseDown:function(){window.addEventListener("mousemove",c),window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",c)}))}},n.content),t.createElement("button",{className:"preview-item_delete-btn",onClick:function(){if(i){var e=JSON.parse(i).items.filter((function(e){return e.element.count!==n.count}));a(JSON.stringify({items:e}))}}},t.createElement("i",{className:"fas fa-trash-alt fa-lg"})),t.createElement("button",{className:"preview-item_size-handler",onMouseDown:function(){window.addEventListener("mousemove",f),window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",f)}))}})))};function NA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return AA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const CA=function(e){var n=e.previewElements,r=e.setPreviewElements,i=NA((0,t.useState)(null),2),a=i[0],o=i[1],u=(0,t.useCallback)((function(){if(n){var e=JSON.parse(n);o(e.items.map((function(e){return e.element})))}}),[n]);return(0,t.useEffect)((function(){return u()}),[u]),t.createElement("div",{className:"builder-preview_wrapper"},a?a.map((function(e,i){return t.createElement(RA,{element:e,previewState:{previewElements:n,setPreviewElements:r},key:i})})):null)};function OA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return PA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const DA=function(){var e=OA((0,t.useState)(""),2),n=e[0],r=e[1];return t.createElement("div",{className:"builder-widget_wrapper"},t.createElement(EA,{previewElements:n,setPreviewElements:r}),t.createElement(CA,{previewElements:n,setPreviewElements:r}),t.createElement("button",{className:"save-changes_btn",onClick:function(){n&&window.localStorage.setItem("previewItems",n)}},"Save"))};const LA=function(){return t.createElement("div",{className:"builder-page_wrapper"},t.createElement(kN,null),t.createElement(DA,null))};const MA=function(){return t.createElement("div",{className:"App"},t.createElement(SR,null,t.createElement(kR,null,t.createElement(vR,{exact:!0,path:"/",component:fN}),t.createElement(vR,{exact:!0,path:"/movies/",component:ZN}),t.createElement(vR,{exact:!0,path:"/movies/:movieId",component:yA}),t.createElement(vR,{exact:!0,path:"/builder",component:LA}))),t.createElement(gA,null))};function UA(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return FA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FA(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FA(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const jA=function(){var e=window.localStorage.getItem("appAuth-email"),n=window.localStorage.getItem("appAuth-name"),r=null,i=!1,a=null;e&&(r=e,i=!0),n&&(a=n);var o=UA(t.useState(r),2),u=o[0],s=o[1],c=UA(t.useState(a),2),l=c[0],f=c[1],h=UA(t.useState(i),2),d=h[0],p=h[1],v=UA(t.useState(!1),2),m=v[0],y=v[1];return t.createElement(kT.Provider,{value:{loggedIn:d,email:u,name:l,setName:f,setEmail:s,setStatus:p,subscribed:m,setSubscriptionStatus:y}},t.createElement("div",{className:"appWrapper"},t.createElement(MA,null)))};const VA=function(e){e&&e instanceof Function&&i.e(276).then(i.bind(i,276)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};(0,n.render)(t.createElement(jA,null),document.getElementById("root")),VA()})()})();